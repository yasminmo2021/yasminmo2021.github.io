/*! For license information please see common-0f20902195fdfd49aff8.js.LICENSE.txt */
(()=>{var e,t={8783:(e,t,n)=>{"use strict";n.d(t,{fw:()=>y});var r=n(4456);class i{get apstag(){return window.apstag}init(e,t){this.initAmazon(e,t),this.subscribeToRemoveTargeting()}fetchBids(e){return new Promise(((t,n)=>{(e||[]).length&&this.apstag?this.apstag.fetchBids({slots:e,timeout:2e3},(e=>{t(e)})):t([])}))}resetAmazonSlots(){}initAmazon(e,t){window.apstagDEBUG={testBidTimeout:90},this.amazonSetup();const n={pubID:"3038",adServer:"googletag",deals:!0};e&&(n.params={si_pageview:e}),t&&(n.useSafeFrames=!0),this.apstag.init(n)}amazonSetup(){function e(e,t){window.apstag._Q.push([e,t])}window.apstag||(window.apstag={init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},setDisplayBids:function(){},_Q:[]},(0,r.loadScript)("//c.amazon-adsystem.com/aax2/apstag.js",(()=>{console.warn("amazon bidding script already loaded")})))}setAmazonTargeting(e,t){const n=(e.getTargeting("pos")||[])[0];t&&t.filter((e=>e&&e.slotID===n)).forEach((n=>{((n.helpers||{}).targetingKeys||[]).forEach((t=>{e.setTargeting(t,n.targeting[t])})),t.splice(t.indexOf(n),1)}))}subscribeToRemoveTargeting(){document.addEventListener("fbs-ad-render",(e=>{const t=e.detail;this.apstag&&this.apstag.targetingKeys&&"function"==typeof this.apstag.targetingKeys&&this.apstag.targetingKeys().forEach((function(e){t.slot.clearTargeting(e)}))}))}}class o{init(){return this.loadCriteo()}fetchBids(e){try{this.criteo.events.push((()=>{this.criteo.RequestBidsOnGoogleTagSlots({networkId:7525,placements:e,callback:()=>{this.criteo.SetDFPKeyValueTargeting()}})}))}catch(e){return void console.error(e)}}loadCriteo(){return new Promise(((e,t)=>{(0,r.loadScript)("https://static.criteo.net/js/ld/publishertag.js",(()=>{this.criteo=window.Criteo=window.Criteo||{},this.criteo.events=this.criteo.events||[],e()}))}))}}class a{constructor(){this.apiReady=!1}}var s=n(4239);class c{constructor(e){this.enabled=!1,this.queue=[],this.googletag=e}push(e){this.queue.push(e),this.enabled&&this.flush()}pushFirst(e){this.queue.unshift(e),this.enabled&&this.flush()}flush(){for(;this.queue.length;)this.googletag.cmd.push(this.queue.shift())}enable(){this.enabled=!0,this.flush()}disable(){this.enabled=!1}}const u={mobile:!1,ad_unit_path:"7175/fdc.forbes/article/standard/default/standard",positions:{top:{slot_id:"top",sizes:[[728,90],[970,250],[970,90],[970,66],[1,1],"fluid"],criteoZoneId:1168047},rec:{slot_id:"rec",sizes:[[300,250],[300,600],[1,1],"fluid"],criteoZoneId:1168043},mobile:{slot_id:"mobile",sizes:[[300,50],[320,50],[1,1]],params:{hero:!0}},mobilerec:{slot_id:"mobilerec",sizes:[[300,250],[300,50],[320,180],[320,50],[1,1]]}},params:{},isEurope:!1};class l{constructor(){this.channel="",this.section=""}init(e){const{params:{channel:t=[],section:n=[]}={}}=e,r=navigator.userAgent,i=r.match(/Android/i)&&r.match(/Mobile/i),o=r.match(/Nokia|NOKIA/i)&&r.match(/Symbian|Windows Phone/i),a=r.match(/iP(hone|od)/i)||r.match(/iPod/i)||r.match(/BlackBerry/i)||i||o;this.loadMedianet(!!a),this.setChannelSection({channel:t,section:n})}setChannelSection(e){const{channel:t,section:n}=e;this.channel=(t||[]).join(","),this.section=(n||[]).map((e=>e.split(":")[1])).join(","),this.applyConfig({channel:this.channel,section:this.section})}applyConfig(e){e&&(this.data=e||this.data,window.mnjs=window.mnjs||{},window.mnjs.channel=e.channel||this.channel,window.mnjs.section=e.section||this.section)}loadMedianet(e){if(!(window.forbes||{}).fastFetchMedianet){window.mnjs=window.mnjs||{customerId:e?"8CU243I76":"8CU4ZAPFY",domain:window.location.hostname,version:1};var t="https://warp.media.net/js/tags/clientag.js?cid="+window.mnjs.customerId+"&dn="+window.mnjs.domain+"&version="+window.mnjs.version;(0,r.loadScript)(t)}}}var d=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class h{init(){return d(this,void 0,void 0,(function*(){return Promise.resolve()}))}fetchMediaNetBids(){return d(this,void 0,void 0,(function*(){return new Promise((e=>{const t=t=>{if(t&&t.length>0){const n=new URL(t);e(n.searchParams.get("cust_params")||"")}else e("")};window.mnjs=window.mnjs||{},window.mnjs.que=window.mnjs.que||[],window.mnjs.que.push((()=>{window.mnjs.requestVideoBids({id:"HB Video",callback:t})}))}))}))}}class f{static getDomain(e){return e?e.replace(/http(s)?:\/\//,"").split("/")[0]:""}}var p=n(182);const m={google:"goog-o","news.google":"goog-news","news.url.google":"goog-news",bing:"bing-o","search.yahoo":"yaho-o",yahoo:"yaho-ref",facebook:"fb","m.facebook":"fb",linkedin:"li",twitter:"twtr","mobile.twitter":"twtr"};class y extends a{get adUnitPath(){return this._config.ad_unit_path}constructor(){super(),this.googletag=window.googletag=window.googletag||{cmd:[]},this.googleTagProxy=new c(this.googletag),this._config=u,this.initialized=!1,this.adSlots=new Map,this.adCounts={},this.simba=!1,this.trackingService=window.trackingService||new p.FbsTrackingService,this.bids=[],this.medianetService=new l,this.medianetVideoService=new h,this.amazonBiddingService=new i,this.criteoBiddingService=new o,this.simba=!!(navigator.userAgent||"").match(/iPhone OS 13.*? Safari/g)&&-1===(navigator.userAgent||"").indexOf("CriOS")}bootstrap(e){if(!e||"disapproved"===this.trackingService.getConsentState())return;const t=this.trackingService.getConsentState();if("disapproved"===t||"waiting"===t)return;this.loadBomboraTag(),this.apiReady=!0,e&&(this.medianetService.init(e),e.mobile||this.criteoBiddingService.init());const n=e&&this.getShoppingInsightsGroup(e.params||{}),i=e.mobile&&!!e.ad_unit_path.match(/article(-delta-[B-Zb-z])?/g);this.amazonBiddingService.init(n,i),function(){try{(0,r.loadScript)("//z.moatads.com/forbesprebidheader122641196143/moatheader.js",(()=>{console.warn("MOAT script already loaded")}))}catch(e){console.error("Error loading MOAT script")}}(),(0,r.loadScript)("//cdn.adsafeprotected.com/iasPET.1.js",(()=>{console.warn("integral script already loaded")})),e&&this.applyConfig(e),this.loadGoogletag(),this.loadDoubleVerify(),this.setup(),s.H.mark("Service Bootstrap")}setup(){this.setEventListeners();const e=new CustomEvent("FbsAdsBootstrapped");document.dispatchEvent(e),this.enableAds()}isSafari(){const{vendor:e=""}=navigator||{};return(e.match(/[Aa]+pple/g)||[]).length>0}getiOSVersion(){const{appVersion:e=""}=navigator||{},t=e.match(/OS (\d+_\d+)/i);return(t||[])[1]?+t[1].replace("_","."):0}applyConfig(e){const t=Object.assign({},e),n=Object.assign({},this._config);n.positions=Object.assign({},n.positions,t.positions),n.ad_unit_path=t.ad_unit_path||this.adUnitPath,n.mobile=t.mobile||n.mobile,t.params=t.params||{},t.params.src=this.getTargetingSource(),this._config=Object.assign({},t,n),this._config.params=Object.assign({},t.params||{},n.params||{}),this._config.mobile&&this._config.ad_unit_path.match(/article(-delta-[B-Zb-z])?/g)&&(this.simba&&(this._config.positions.mobile.params.hero=!1),this.isSafari()&&this.getiOSVersion()>=12&&this._config.positions.mobilerec.sizes.push([350,500])),this.applyTargeting(t.params);const{params:{channel:r=[],section:i=[]}}=t;this.medianetService.setChannelSection({channel:r,section:i}),this.fetchAmazonBids(e.amazonSlots).then((e=>{this.bids=e}))}initMediaNetVideoBidding(){return this.medianetVideoService.init()}fetchMediaNetVideoBids(){return this.medianetVideoService.fetchMediaNetBids()}fetchAmazonBids(e){return this.amazonBiddingService.fetchBids(e)}fetchCriteoBids(e){return this.criteoBiddingService.fetchBids(e)}enableAds(){setTimeout((()=>{this.googleTagProxy.pushFirst((()=>{if(this._config.single_request&&(this.googletag.pubads().enableSingleRequest(),this.googletag.pubads().disableInitialLoad()),this._config.safe_frame&&this.googletag.pubads().setSafeFrameConfig({sandbox:!0}),this._config.mobile&&this.simba&&this._config.ad_unit_path.match(/article(-delta-[B-Zb-z])?/g)&&this.googletag.pubads().setForceSafeFrame(!0),(this._config.params||{}).fvid&&this.googletag.pubads().setPublisherProvidedId(this._config.params.fvid),this.googletag.pubads().enableAsyncRendering(),this.googletag.pubads().collapseEmptyDivs(),s.H.mark("Enable Services"),this.googletag.enableServices(),this._config.enable_newrelic_tracker)if(window.nrvideo)window.nrvideo.GooglePublisherTagTracker.init();else{const e=window.setInterval((()=>{window.nrvideo&&(window.nrvideo.GooglePublisherTagTracker.init(),clearInterval(e))}),100);window.setTimeout((()=>{clearInterval(e)}),1e4)}})),this.googleTagProxy.enable()}),100)}createSlot(e,t,n,r,i){const o=this.getPosition(e),a=(t||o.slot_id||"").replace(/-\d+$/,"");o.incremental&&!r&&this.incrementAd(a);const c=this.adCounts[a];t=r||this.getDivId(o.slot_id,t),this.adSlots.get(t)||this.googleTagProxy.push((()=>{let e;s.H.mark(`Created ${t}`);try{e=this.googletag.defineSlot(o.ad_unit_path||this.adUnitPath,[...o.sizes,...i||[]],t),"ntv-contentm"===t&&e.setForceSafeFrame(!1)}catch(e){return}if(!e)return;this.adSlots.set(t,e.setTargeting("pos",o.slot_id).setTargeting("slotId",t).addService(this.googletag.pubads())),o.criteoZoneId&&this.fetchCriteoBids([e]);const r=Array.from(this.adSlots.keys()),a=new CustomEvent("fbs-ad-slots",{detail:r});if(document.dispatchEvent(a),this.amazonBiddingService.setAmazonTargeting(e,this.bids),function(e){try{window.moatPrebidApi.setMoatTargetingForSlot(e)}catch(t){console.error("Error targeting MOAT yield for slot",e.getSlotElementId())}}(e),function(e){const t=window.__iasPET||{};t.queue=t.queue||[],t.pubId="930392";const n=e.getSizes().map((function(e){return e.getWidth&&e.getHeight?[e.getWidth(),e.getHeight()]:[1,1]})),r=[{adSlotId:e.getSlotElementId(),adUnitPath:e.getAdUnitPath(),size:n}];t.queue.push({adSlots:r,dataHandler:function(t){if(t){const n=window.googletag=window.googletag||{cmd:[]},r=JSON.parse(t);Object.keys(r).map((t=>{const i=r[t];"slots"===t?Object.keys(i).forEach((t=>{e.setTargeting("iasId",i[t].id)})):"fr"===t?n.pubads().setTargeting(t,r[t]):Object.keys(i).forEach((e=>{n.pubads().setTargeting(e,i[e])}))}))}}})}(e),this.applyTargeting(o.params,this.adSlots.get(t)),o.incremental&&this.adSlots.get(t).setTargeting(o.slot_id,c.toString()),["top","rec","mobilerec"].indexOf(o.slot_id)>-1){const e="mobilerec"===o.slot_id?"mobilex":`${o.slot_id}x`;this.adSlots.get(t).setTargeting(e,"0")}this._config.mobile||this.googletag.pubads().setTargeting("adcount",Array.from(this.adSlots.keys()).filter((e=>-1===e.indexOf("ntv"))).length.toString()),n&&n.split(",").forEach((e=>{const n=e.split(":");this.adSlots.get(t).setTargeting(n[0]||"",n[1]||"")})),this._config.single_request&&(this.googletag.pubads().enableSingleRequest(),this.googletag.pubads().disableInitialLoad()),this.googletag.enableServices()}))}checkPerformance(){const e=[];return performance.getEntriesByType("mark").forEach((t=>{e.push([t.name,t.startTime])})),console.table(e),e}display(e){this.googleTagProxy.push((()=>{setTimeout((()=>{s.H.mark(`Called ${e}`),this.googletag.display(e),this._config.single_request&&this.refresh(e)}))}))}displayBatch(e){const t=e.map((e=>this.adSlots.get(e)));this.googleTagProxy.push((()=>{setTimeout((()=>{this.googletag.pubads().refresh(t,{changeCorrelator:!1})}))})),e.forEach((e=>{document.querySelector(`[ad-id=${e}]`).setAttribute("display-called","")}))}refresh(e){return new Promise((t=>{this.googleTagProxy.push((()=>{const n=this.adSlots.get(e);t(this.googletag.pubads().refresh([n],{changeCorrelator:!1}))}))}))}destroySlots(e){const t=this.adSlots.get(e);this.adSlots.delete(e),this.googleTagProxy.push((()=>this.googletag.destroySlots([t])))}resetIncrements(e){this.adCounts[e]=0}getPosition(e){if(!this._config.positions[e])throw new Error(`The position ${e} was not defined in the config.\r\nPlease use another position or define it.`);return this._config.positions[e]}getSite(){return this.adUnitPath.split("/")[2]}getZone(){const e=this.adUnitPath.split("/");return e.splice(0,3),e.join("/")}isIncremental(e){return this.getPosition(e).incremental}getDivId(e,t){const n=this.getPosition(e);return t=t||n.ad_id||n.slot_id,!this.isIncremental(e)||t.match(/-\d+$/)?t:`${t}-${this.adCounts[t]}`}getSlotId(e){return this.getPosition(e).slot_id}getSizes(e){try{return this.getPosition(e).sizes}catch(e){return console.error(e.stack),[[0,0]]}}getMaxWidth(e){let t=0;return this.getSizes(e).forEach((e=>{Array.isArray(e)&&(t=e[0]>t?e[0]:t)})),t}getMaxHeight(e){let t=0;return this.getSizes(e).forEach((e=>{Array.isArray(e)&&(t=e[1]>t?e[1]:t)})),t}getMaxSize(e){return[this.getMaxWidth(e),this.getMaxHeight(e)]}getTargeting(e){return new Promise((t=>{this.googleTagProxy.push((()=>{t(this.googletag.pubads().getTargeting(e))}))}))}getPageTargeting(){return new Promise((e=>{this.googleTagProxy.push((()=>{const t=this.googletag.pubads().getTargetingKeys().reduce(((e,t)=>(e[t]=this.googletag.pubads().getTargeting(t),e)),{});e(t)}))}))}resetAmazonSlots(){this.amazonBiddingService.resetAmazonSlots()}incrementAd(e){e&&(this.adCounts[e]=this.adCounts[e]||0,this.adCounts[e]++)}setEventListeners(){this.listenToRender(),this.listenToViewable()}listenToRender(){this.googleTagProxy.push((()=>{this.googletag.pubads().addEventListener("slotRenderEnded",(e=>{const t=new CustomEvent("fbs-ad-render",{detail:e});document.dispatchEvent(t)}))})),this.googleTagProxy.push((()=>{this.googletag.pubads().addEventListener("slotOnload",(e=>{const t=new CustomEvent("fbs-ad-load",{detail:e});document.dispatchEvent(t)}))})),window.aax=window.aax||{},window.aax.cmd=window.aax.cmd||[],window.aax.cmd.push((function(){window.aax.addEventListener("slotRenderEnded",(function(e){e.dfpDetails.aax=!0;const{size:t}=e.dfpDetails;if(!Array.isArray(t)){const n=t.split("x").map(Number);e.dfpDetails.size=n}const n=new CustomEvent("fbs-ad-render",{detail:e.dfpDetails});document.dispatchEvent(n)}))}))}listenToViewable(){this.googleTagProxy.push((()=>{this.googletag.pubads().addEventListener("impressionViewable",(e=>{const t=new CustomEvent("fbs-ad-viewable",{detail:e});document.dispatchEvent(t)}))}))}loadBomboraTag(){var e,t,n,r,i,o;e=window,t=document,n="script",e._bmb||(r=e._bmb=function(){r.x?r.x.apply(r,arguments):r.q.push(arguments)},r.q=[],(i=t.createElement(n)).async=!0,i.src="https://vi.ml314.com/get?eid=50061&tk=sykDcPW1eBz09sUvMFxZoRHVMwdQVYsDGLWIVHi2fGVg3d&fp="+(e.localStorage&&e.localStorage.getItem("_ccmaid")||""),(o=t.getElementsByTagName(n)[0]).parentNode.insertBefore(i,o));const a=this.googletag;a.cmd.push((function(){window._bmb("vi",(function(e){if(null!=e){const t=[e.industry_id,e.revenue_id,e.size_id,e.functional_area_id,e.professional_group_id,e.seniority_id,e.decision_maker_id,e.install_data_id,e.topic_id,e.interest_group_id,e.b2b_interest_cluster_id,e.segment].filter(Boolean).join(",");""!==t&&a.pubads().setTargeting("bmb",t.split(","))}}))}))}loadGoogletag(){(0,r.loadScript)("https://securepubads.g.doubleclick.net/tag/js/gpt.js",(()=>{}))}loadDoubleVerify(){(0,r.loadScript)("https://pub.doubleverify.com/dvtag/30290112/DV1110994/pub.js",(()=>{}))}applyTargeting(e,t){e&&(e=this.setCustomParams(window,e),this.googleTagProxy.push((()=>{if(!t){const e=(t=this.googletag.pubads()).getTargetingKeys();for(const n in e)"bmb"!==n&&t.clearTargeting(n)}Object.keys(e).forEach((n=>{let r=e[n];r=!Array.isArray(r)&&null!=r&&r.toString?r.toString():r,r||"mnet_adi"===n?t.setTargeting(n,r):t.clearTargeting(n)}))})))}getTargetingSource(){if(this.originalSource)return this.originalSource;const e=this.trackingService?this.trackingService.getPreviousUrl():document.referrer;if(!e)return"";let t=f.getDomain(e).replace("www.","");return t=t.slice(0,t.lastIndexOf(".")),this.originalSource=m[t]||"",this.originalSource}getChannelSection(e){return Array.isArray(e)?e[0]:(e||"").toString().split(",")[0]}getShoppingInsightsGroup(e){const{specialslot:t,section:n,channel:r,displaychannel:i,displaysection:o}=e,a=this.getChannelSection(n)||o,s=this.getChannelSection(r)||i;return t||a||s}setCustomParams(e,t){const n=e.location.search.substring(1).split("&");let r;for(let e=0;e<n.length;e++){const t=decodeURIComponent(n[e]||"").split("=");t[0].indexOf("ad_target_override")>-1&&(r=(t[1]||"").split(","))}if(!r)return t;for(let e=0;e<r.length;e++){const n=r[e].split(":");n[0]&&(t[n[0]]=n[1]||"")}return t}}},4239:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});class r{static mark(e){window.performance&&performance.mark&&performance.mark(`FbsAds_${e.replace(" ","_")}`)}}},4456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{loadScript:()=>i,loadStyle:()=>o});var r=new Map;function i(e,t){if(!e.includes(".js"))throw new Error("You can only load JS files with this function.");var n=r.get(e);return n?"false"!==n.dataset.loaded?t():n.addEventListener("load",t):(n=document.createElement("script"),r.set(e,n),n.dataset.loaded="false",Object.assign(n,{async:!0,defer:!0,src:e}),n.addEventListener("load",(function(){return n.dataset.loaded="true"})),n.addEventListener("load",t),document.head.appendChild(n)),n}function o(e,t){if(!e.includes(".css"))throw new Error("You can only load CSS files with this function.");var n=r.get(e);return n?"false"!==n.dataset.loaded?t():n.addEventListener("load",t):(n=document.createElement("link"),r.set(e,n),n.dataset.loaded="false",Object.assign(n,{href:e,rel:"stylesheet",type:"text/css"}),n.addEventListener("load",(function(){return n.dataset.loaded="true"})),n.addEventListener("load",t),document.head.appendChild(n)),n}},7567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r,i,o=n(938);!function(e){e.Follow="Follow"}(r||(r={})),function(e){e.Follow="Follow",e.Unfollow="Unfollow"}(i||(i={}));var a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const s={[i.Follow]:"follow-button",[i.Unfollow]:"unfollow-button"},c={[i.Follow]:"Follow Author",[i.Unfollow]:"Unfollow Author"},u={[i.Follow]:"Follow",[i.Unfollow]:"Unfollow"};class l extends HTMLElement{constructor(){super(),this.window=window,this.window.fbsCordial=this.window.fbsCordial||new o.Z,this.cordialService=this.window.fbsCordial}static get observedAttributes(){return["type","state"]}attributeChangedCallback(e,t,n){return a(this,void 0,void 0,(function*(){this.button&&this.isConnected&&("type"===e&&t!==n&&(this.disconnectedCallback(),yield this.connectedCallback()),this.type===r.Follow&&"state"===e&&t!==n&&(this.button.classList.add(s[n]),this.button.classList.remove(s[t]),this.button.setAttribute("aria-label",c[n]),this.button.innerText=u[n]))}))}followButtonClickEventListener(){var e,t,n,r;return a(this,void 0,void 0,(function*(){let o=this.state.toString();this.pagePosition&&(o+=`-${this.pagePosition}`),this.window.dataLayer.push({event:"analyticsEvent","event category":"newsletters","event action":"click","event label":o,onboardingStep:""}),(null===(e=null===window||void 0===window?void 0:window.Zephr)||void 0===e?void 0:e.user)?(this.cordialService.toggleFollowedAuthors([this.naturalId],[this.authorSlug],this.state===i.Follow),this.state=this.state===i.Follow?i.Unfollow:i.Follow):(this.cordialService.beforeLoginReloadQueue.push((()=>{this.cordialService.toggleFollowedAuthors([this.naturalId],[this.authorSlug],this.state===i.Follow)})),null===(r=null===(n=null===(t=this.window)||void 0===t?void 0:t.Zephr)||void 0===n?void 0:n.utils)||void 0===r||r.showLogin("following"))}))}createFollowButton(){this.button=document.createElement("button"),this.button.setAttribute("aria-label",c[this.state]),this.button.classList.add(s[this.state]),this.button.innerText=u[this.state],this.appendChild(this.button),this.button.addEventListener("click",(()=>this.followButtonClickEventListener())),this.cordialService.subscribe(this)}update(){return a(this,void 0,void 0,(function*(){this.type===r.Follow&&(yield this.cordialService.getUserCordialData().then((e=>{this.state=(e.followedAuthors||[]).includes(this.naturalId)?i.Unfollow:i.Follow})))}))}connectedCallback(){return a(this,void 0,void 0,(function*(){if(this.type===r.Follow)return this.cordialService.getUserCordialData().then((e=>{this.state=(e.followedAuthors||[]).includes(this.naturalId)?i.Unfollow:i.Follow,this.createFollowButton()}))}))}disconnectedCallback(){this.button&&(this.removeChild(this.button),delete this.button)}set type(e){this.setAttribute("type",e)}get type(){const e=this.getAttribute("type");return r[e]}set pagePosition(e){this.setAttribute("page-position",e)}get pagePosition(){return this.getAttribute("page-position")}set state(e){this.setAttribute("state",e)}get state(){const e=this.getAttribute("state");return i[e]}set naturalId(e){this.setAttribute("natural-id",e)}get naturalId(){return this.getAttribute("natural-id")}set authorSlug(e){this.setAttribute("author-slug",e)}get authorSlug(){return this.getAttribute("author-slug")}}},938:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const r=()=>{var e;return(null===(e=null===window||void 0===window?void 0:window.Zephr)||void 0===e?void 0:e.user)||(null===window||void 0===window?void 0:window.Zephr.error)},i=()=>{var e;return!!(null===(e=null===window||void 0===window?void 0:window.Zephr)||void 0===e?void 0:e.user)},o=(e,t,n=0)=>{return a=void 0,s=void 0,u=function*(){const a=new Promise((e=>{!r()&&n<=t?setTimeout((()=>{o(e,t,n+=100)}),100):r()?e(i()):e(!1)})),s=yield a;return yield e(s),!!s},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof c?i:new c((function(e){e(i)}))).then(n,r)}i((u=u.apply(a,s||[])).next())}));var a,s,c,u};var a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class s{constructor(e){this.window=window,this.beforeLoginReloadQueue=[],this.cordialEls=[],e&&(this.userCordialData=Promise.resolve(e))}setCordialCustomVariables(e,t,n,r){return a(this,void 0,void 0,(function*(){yield o((i=>a(this,void 0,void 0,(function*(){if(i){const i={};for(const e of t)i[`Newsletter:${e}`]=!0;for(const e of n)i[`FollowedAuthor:${e}`]=!0;for(const e of r)i[`EventInterest:${e}`]=!0;this.window.localStorage.setItem("fbs-tp-customVariables",JSON.stringify(Object.assign(Object.assign({},i),{expiration:(new Date).getTime()+2592e6}))),e&&this.window.localStorage.setItem("cID",e),this.window.localStorage.setItem("newslettersList",t.join(","))}}))),3e3)}))}getUserCordialDataFromServer(){return a(this,void 0,void 0,(function*(){let e={};return yield o((t=>a(this,void 0,void 0,(function*(){if(t){const t=yield fetch(`https://${Object.keys(window.forbes||{}).some((e=>{var t,n;return null===(n=null===(t=null===window||void 0===window?void 0:window.forbes)||void 0===t?void 0:t[e])||void 0===n?void 0:n.isProd}))||window.location.host.match(/^(www|account).forbes.com/)?"":"staging-"}account.forbes.com/api-data/get-cordial-data`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store, must-revalidate",Pragma:"no-cache"}}).then((e=>e.json())).catch((e=>(console.error("cordial post error: ",e),{}))),{attributes:{cID:n="",lists:r=[],followed_natural_id:i=[],eventinterests:o=[],title:a="","company-industry":s=""}={}}=t;e={cID:n,lists:r,followedAuthors:i,eventinterests:o,title:a,industry:s},this.window.dataLayer.push({cordialData:e}),this.setCordialCustomVariables(n,r,i,o)}}))),3e3),e}))}getUserCordialData(){return a(this,void 0,void 0,(function*(){if(i()||(yield new Promise((e=>{document.addEventListener("fbs-zephr-init",(()=>{e()}))}))),this.userCordialData){const{cID:e,lists:t=[],followedAuthors:n=[],eventinterests:r=[]}=yield this.userCordialData;return this.setCordialCustomVariables(e,t,n,r),this.userCordialData}return this.userCordialData=this.getUserCordialDataFromServer(),yield this.userCordialData}))}subscribe(e){this.cordialEls.push(e)}publish(){for(const e of this.cordialEls)e.update()}identify(){return a(this,void 0,void 0,(function*(){return yield o((e=>{var t,n,r;e&&this.window.crdl("contact",{email:null===(r=null===(n=null===(t=this.window)||void 0===t?void 0:t.Zephr)||void 0===n?void 0:n.user)||void 0===r?void 0:r.email},{})}),5e3),!!r()&&i()}))}forget(){this.window.crdl("forget")}toggleFollowedAuthors(e,t,n=!0){return a(this,void 0,void 0,(function*(){yield o((r=>a(this,void 0,void 0,(function*(){var i,o,a,s,c,u,l,d;if(r){const r=yield this.getUserCordialData();if(n)this.window.crdl("contact",{email:null===(o=null===(i=this.window)||void 0===i?void 0:i.Zephr)||void 0===o?void 0:o.user.email},{Follow:!0,followed_natural_id:{add:e},followed_author_slug:{add:t},follow_source:{add:[this.pageType]}}),e.forEach((e=>this.window.dataLayer.push({event:"analyticsEvent","event category":"newsletters","event action":"followSuccess","event label":e,onboardingStep:""}))),this.window.crdl("event","followed_author_newsletter"),e.forEach((e=>{const{followedAuthors:t=[]}=r;t.push(e)}));else{const{followedAuthors:n=[]}=r;0===n.filter((t=>!e.includes(t))).length&&this.window.crdl("contact",{email:null===(s=null===(a=this.window)||void 0===a?void 0:a.Zephr)||void 0===s?void 0:s.user.email},{Follow:!1}),this.window.crdl("contact",{email:null===(u=null===(c=this.window)||void 0===c?void 0:c.Zephr)||void 0===u?void 0:u.user.email},{followed_natural_id:{remove:e}}),this.window.crdl("contact",{email:null===(d=null===(l=this.window)||void 0===l?void 0:l.Zephr)||void 0===d?void 0:d.user.email},{followed_author_slug:{remove:t}}),r.followedAuthors=n.filter((t=>!e.includes(t)))}this.publish()}}))),3e3)}))}}},7015:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FbsCordial:()=>r.Z,trackCordial:()=>i});var r=n(7567);const i=e=>{var t;(null===(t=window.fbsCordial)||void 0===t?void 0:t.identify)&&window.fbsCordial.identify().then((t=>{var n,r,i;(t||null!==localStorage.getItem("contactID"))&&((null===(n=null==e?void 0:e.DFPZone)||void 0===n?void 0:n.includes("article-"))?(({author:e,published:t,primarySection:n,referrer:r,customPageTitle:i})=>{window.crdl("event","browseArticle",{author:e,pubDate:t,section:n,source:r,title:i})})(e):(null===(r=null==e?void 0:e.DFPZone)||void 0===r?void 0:r.includes("video"))?(({published:e,primarySection:t,referrer:n,customPageTitle:r})=>{window.crdl("event","browseVideo",{pubDate:e,section:t,source:n,title:r})})(e):(null===(i=null==e?void 0:e.DFPZone)||void 0===i?void 0:i.includes("contrib"))&&window.forbes["simple-site"].showFollowButton?(({author:e,primarySection:t,referrer:n})=>{window.crdl("event","browseCHPS",{author:e,section:t,source:n})})(e):e&&(({referrer:e,primarySection:t})=>{window.crdl("event","browseLanding",{section:t,source:e})})(e))}))};customElements.get("fbs-cordial")||customElements.define("fbs-cordial",r.Z)},182:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(252),t)},7230:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CookiesService=void 0;const r=n(3781),i={path:"/",domain:".forbes.com"};t.CookiesService=class{get(e){return(0,r.get)(e)}set(e,t,n){const i=this.getOptions(n);(0,r.set)(e,t,i)}remove(e,t){const n=this.getOptions(t);(0,r.remove)(e,n)}getOptions(e){return Object.assign(Object.assign({},i),e)}}},6542:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7230),t)},2183:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FbsTrackingService=void 0;const i=n(7015),o=n(5387),a=n(6542),s=n(803),c=n(898),u=n(4856),l=n(7969);t.FbsTrackingService=class{constructor(){this.gaPreviousUrl=null,this.previousUrl=null,this.previousPath=null,this.cookiesService=new a.CookiesService,this.googleAnalyticsService=new s.GoogleAnalyticsService,this.sharingHashService=new u.SharingHashService,this.trackingCalls=[],this.isEurope=!1,this.isChina=!1,this.isUsDpa=!1,this.pianoInitialized=!0}getUserLocationData(){return{isEurope:this.isEurope,isChina:this.isChina,isUsDpa:this.isUsDpa}}getSwbCookieValue(){return(0,l.getSwbCookieValue)()}getSwbCookie(){return(0,l.getSwbCookie)()}getFullConsent(e){return(0,l.getFullConsent)(e)}getUserConsent(e="all"){return(0,l.getUserConsent)(e)}checkJurisdictionCode(){return(0,l.checkJurisdictionCode)(this.getUserLocationData())}getConsentState(){return(0,l.getConsentState)(this.getUserLocationData())}cordialTracking(e){var t;const{shareChild:n}=e,r=null===(t=null===document||void 0===document?void 0:document.title)||void 0===t?void 0:t.replace(/\s-\shttps?:\/\/[\n\S]+/g,"").replace(n,"");(0,i.trackCordial)(Object.assign({customPageTitle:r},e))}track(e,t){return r(this,void 0,void 0,(function*(){window.pianoInitialized=!0;const n=(0,l.getConsentState)({isEurope:this.isEurope,isChina:this.isChina,isUsDpa:this.isUsDpa});if("disapproved"===n||"waiting"===n)return;if(!e)return;t&&(this.updatePreviousUrl(),this.sharingHashService.setHash()),this.getOrCreateClientId();const r=this.sharingHashService.getParentHash()||"none",i=this.sharingHashService.getChildHash()||"none";e=Object.assign(Object.assign({},e),{shareParent:r,shareChild:i,referrer:this.gaPreviousUrl,isEurope:this.isEurope.toString(),isChina:this.isChina.toString()}),yield(0,o.zephrRun)("",e),this.cordialTracking(e),delete e.isProd,delete e.swimLane,this.googleAnalyticsService.track(e),this.trackingCalls.push(e)}))}getOrCreateClientId(){const e=this.cookiesService.get("client_id")||c.TrackingUtil.generateClientId(),t=new Date;return t.setFullYear(t.getFullYear()+2),this.cookiesService.set("client_id",e,{expires:t}),e}getPreviousUrl(){return this.previousUrl||this.cookiesService.get("refURL")||document.referrer||""}getGAPreviousUrl(){return this.gaPreviousUrl||document.referrer||""}updatePreviousUrl(){this.previousPath&&this.previousPath!==window.location.pathname?(this.previousUrl=`${window.location.protocol}//${window.location.host}${this.previousPath}`,this.gaPreviousUrl=`${window.location.protocol}//${window.location.host}${this.previousPath}`):(this.gaPreviousUrl=this.getGAPreviousUrl(),this.previousUrl=this.getPreviousUrl(),this.cookiesService.remove("refURL",{path:"/",domain:".forbes.com"}),this.cookiesService.remove("toURL",{path:"/",domain:".forbes.com"})),this.previousPath=window.location.pathname}}},898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingUtil=void 0,t.TrackingUtil=class{static generateClientId(){const e=this.hash31(window.location.pathname+window.location.hash),t=2147483647&(new Date).getTime(),n=[];let r="";for(let e=0;e<5;e++)n[e]=268435456*Math.random()&2147483647;return n[0]^=268435455&e,n[1]^=268435455&t,n[2]^=t>>28<<3|e>>28,n.forEach((e=>{r+=this.pad(e.toString(16),7,"0",!1)})),r}static hash31(e){let t=2147483647,n=e.length;for(;n--;)t=(t<<5)-t+e.charCodeAt(n)&2147483647;return t}static pad(e,t,n,r){for(e=`${e}`;e.length<t;)e=r?e+n:n+e;return e}}},5387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlimitedSubscriptionBundleProducts=t.saveArticleProducts=t.zephrProductBundle=t.premiumPaywallProducts=t.clientSubscriptionProducts=t.unlimitedSubscriptionProducts=t.updateCordialListData=t.doesUserHaveProduct=t.shouldShowListProfile=t.shouldHideForbesServices=t.createZephrModalContainer=t.hideModal=t.showModal=t.logout=t.hideLogin=t.showLogin=t.zephrRun=void 0;var r=n(4664);Object.defineProperty(t,"zephrRun",{enumerable:!0,get:function(){return r.zephrRun}}),Object.defineProperty(t,"showLogin",{enumerable:!0,get:function(){return r.showLogin}}),Object.defineProperty(t,"hideLogin",{enumerable:!0,get:function(){return r.hideLogin}}),Object.defineProperty(t,"logout",{enumerable:!0,get:function(){return r.logout}}),Object.defineProperty(t,"showModal",{enumerable:!0,get:function(){return r.showModal}}),Object.defineProperty(t,"hideModal",{enumerable:!0,get:function(){return r.hideModal}}),Object.defineProperty(t,"createZephrModalContainer",{enumerable:!0,get:function(){return r.createZephrModalContainer}}),Object.defineProperty(t,"shouldHideForbesServices",{enumerable:!0,get:function(){return r.shouldHideForbesServices}}),Object.defineProperty(t,"shouldShowListProfile",{enumerable:!0,get:function(){return r.shouldShowListProfile}}),Object.defineProperty(t,"doesUserHaveProduct",{enumerable:!0,get:function(){return r.doesUserHaveProduct}}),Object.defineProperty(t,"updateCordialListData",{enumerable:!0,get:function(){return r.updateCordialListData}}),Object.defineProperty(t,"unlimitedSubscriptionProducts",{enumerable:!0,get:function(){return r.unlimitedSubscriptionProducts}}),Object.defineProperty(t,"clientSubscriptionProducts",{enumerable:!0,get:function(){return r.clientSubscriptionProducts}}),Object.defineProperty(t,"premiumPaywallProducts",{enumerable:!0,get:function(){return r.premiumPaywallProducts}}),Object.defineProperty(t,"zephrProductBundle",{enumerable:!0,get:function(){return r.zephrProductBundle}}),Object.defineProperty(t,"saveArticleProducts",{enumerable:!0,get:function(){return r.saveArticleProducts}}),Object.defineProperty(t,"unlimitedSubscriptionBundleProducts",{enumerable:!0,get:function(){return r.unlimitedSubscriptionBundleProducts}})},8449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6611:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleAnalyticsService=void 0;const r=n(4456);class i{constructor(){this.initialized=!1,this.dataLayer=window.dataLayer=window.dataLayer||[],this.containerId="GTM-NMQJM4"}static convertData(e){e.eventLabel&&(e["event label"]=e.eventLabel),e.eventCategory&&(e["event category"]=e.eventCategory),e.eventAction&&(e["event action"]=e.eventAction),e.eventValue&&(e["event value"]=e.eventValue),delete e.eventLabel,delete e.eventCategory,delete e.eventAction,delete e.eventValue}track(e){e&&(i.convertData(e),this.dataLayerPush(e),this.initialized||this.init())}init(){this.initialized=!0,this.dataLayerPush({"gtm.start":(new Date).getTime(),event:"gtm.js"}),window.analyticsEvent=window.analyticsSocial=window.analyticsVPV=window.analyticsClearVPV=window.analyticsForm=function(){},(0,r.loadScript)(`https://www.googletagmanager.com/gtm.js?id=${this.containerId}`,(()=>{const e=new CustomEvent("fbs-gtm-init");window.dispatchEvent(e)}))}dataLayerPush(e){this.dataLayer.push(e)}}t.GoogleAnalyticsService=i},803:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6611),t),i(n(8449),t)},252:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.zephr=t.TrackingService=void 0;var o=n(325);Object.defineProperty(t,"TrackingService",{enumerable:!0,get:function(){return o.TrackingService}}),i(n(2183),t),i(n(898),t),i(n(803),t),t.zephr=n(5387),i(n(7969),t)},7969:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7730),t)},7730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConsentState=t.getIsConsentCookieSet=t.checkJurisdictionCode=t.getUserConsent=t.getFullConsent=t.getSwbCookie=t.getSwbCookieValue=void 0,t.getSwbCookieValue=()=>{let e="";return document.cookie.match(/_swb_consent_=/)?(document.cookie.split(";").forEach((t=>{t.trim().startsWith("_swb_consent_=")&&(e=decodeURIComponent(t.split("=")[1]))})),e):e},t.getSwbCookie=()=>{const e=(0,t.getSwbCookieValue)();try{const t=window.atob(e);return JSON.parse(t)}catch(e){return}},t.getFullConsent=e=>{let t=!0,n=[];try{n=Object.keys((e||{}).purposes||{})}catch(e){console.log("no keys found")}return!(n.length<=1)&&(n.forEach((n=>{"false"===e.purposes[n].allowed&&(t=!1)})),t)},t.getUserConsent=(e="all")=>{const n=(0,t.getSwbCookie)();return!!n&&("all"===e?(0,t.getFullConsent)(n):!!n.purposes[e]&&"false"!==n.purposes[e].allowed)},t.checkJurisdictionCode=e=>{const{isEurope:n,isChina:r,isUsDpa:i}=e;if(n||r||i)return!0;const o=(0,t.getSwbCookie)();return!(!o||!o.jurisdictionCode||"ccpa"!==o.jurisdictionCode&&"PIPL"!==o.jurisdictionCode&&"gdpr"!==o.jurisdictionCode)},t.getIsConsentCookieSet=()=>!!document.cookie.match(/_swb_consent_=/),t.getConsentState=e=>{const n=(0,t.getIsConsentCookieSet)(),{isEurope:r,isChina:i}=e;let o="ready";return!r&&!i||n?!r&&!i||(0,t.getUserConsent)()||(o="disapproved"):o="waiting",n&&(0,t.checkJurisdictionCode)(e)&&!(0,t.getUserConsent)()&&(o="disapproved"),o}},4856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingHashService=void 0,t.SharingHashService=class{constructor(){this.hash="",this.paramKey="sh",this.storageKey="FORBES_SHARING_TREE_ID"}getParentHash(){return"2715e4857a0b"!==this.hash.slice(0,12)?this.hash.slice(0,12):""}getChildHash(){return this.hash.slice(12)}getHash(){return this.hash}updateStorage(e){const t=localStorage.getItem(this.storageKey)||void 0,n=t?t.split(","):[],r=`${location.pathname}?${this.paramKey}=${e}`;n.push(r),n.length>=20&&n.shift(),localStorage.setItem(this.storageKey,n.join(","))}updateUrlQueryParameter(e,t){const n=location.search,r=new RegExp(`([?&])${e}=.*?(&|$)`,"i"),i=-1!==n.indexOf("?")?"&":"?";return n.match(r)?n.replace(r,`$1${e}=${t}$2`):`${n}${i}${e}=${t}`}hasTrackingHash(e){return/^(?=.*?\d)(?=.*?[a-z])[a-z\d]{12}$/.test(e)}getTrackingParam(){return new URLSearchParams(location.search).get(this.paramKey)}updateUrl(e){const t=this.hasTrackingHash(location.hash.slice(1))?"":location.hash;history.replaceState(history.state||null,"",`${location.pathname}${e}${t}`)}setHash(){const e=this.hasTrackingHash(location.hash.slice(1))?location.hash.slice(1):void 0,t=this.getTrackingParam()||e,n=localStorage.getItem(this.storageKey)||void 0;if(n&&t){const e=n.split(",").map((e=>{const t=e.split(`?${this.paramKey}=`);return{urlPath:t[0],shId:t[1]}})),r=e.findIndex((e=>e.shId.slice(0,12)===t));if(~r){const t=this.updateUrlQueryParameter(this.paramKey,e[r].shId.slice(12));return this.updateUrl(t),void(this.hash=e[r].shId)}const i=e.findIndex((e=>e.shId.slice(12)===t));if(~i&&e[i].urlPath===location.pathname){const t=e[i].shId,n=this.updateUrlQueryParameter(this.paramKey,t.slice(12));return this.updateUrl(n),void(this.hash=t)}}const r=this.harvestSharingHashTree(t),i=this.updateUrlQueryParameter(this.paramKey,r.slice(12));this.updateUrl(i),this.updateStorage(r)}harvestSharingHashTree(e){let t;return e=!e||12!==e.length&&24!==e.length?`${this.hash31("WhereDidYouComeFromWhereDidYouGo").toString(16)}${this.hash31("SomethingSomethingCottonEyedJoe").toString(16)}`.slice(0,12):e.slice(e.length-12),t=(2147483647&(Math.floor(4096*Math.random())<<20|1048575&+new Date)).toString(16),t+=this.pad(this.hash31(`${location.protocol}//${location.host}${location.pathname}`).toString(16),4,"0"),t+=this.pad(t,4,"0"),t=this.pad(t,12,"0").slice(0,12),this.hash=e+=t,e}hash31(e){let t=2147483647,n=e.length;for(;n--;)t=(t<<5)-t+e.charCodeAt(n)&2147483647;return t}pad(e,t,n,r){for(e=`${e}`;e.length<t;)e=r?e+n:n+e;return e}}},325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingService=void 0,t.TrackingService=class{}},3781:(e,t,n)=>{var r,i,o;void 0===(i="function"==typeof(r=o=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))})?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},1615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchAsync=void 0;var n=function(){function e(e){void 0===e&&(e={}),this.tasks={resolved:{},active:{},waiting:{},timedOut:{}},this.resolvedData={},this.init(e)}return e.prototype.init=function(e){var t=this;this.promise=new Promise((function(n,r){t._resolve=n,t._reject=r,Object.keys(e).forEach((function(n){var r=e[n];(r.requires||[]).length>0?t.tasks.waiting[n]=r:t.tasks.active[n]=r})),Object.keys(t.tasks.active).forEach((function(e){var n=t.tasks.active[e];t.createTask(e,n).catch((function(e){return t._reject(e)}))})),0===Object.keys(t.tasks.active).length&&t._resolve({})}))},e.prototype.createTask=function(e,t){var n=this;return new Promise((function(r,i){var o=[];t.params&&o.push(t.params),(t.requires||[]).forEach((function(e){o.push(n.resolvedData[e])})),t.task.apply(null,o).then((function(i){clearTimeout(t.timeoutObj),n.completeTask(e,i,!0),r(i)})).catch((function(o){t.optional?(n.completeTask(e,o),r(o)):i(o)})),t.timeout&&(t.timeoutObj=setTimeout((function(){var o=!1;if(Object.keys(n.tasks.waiting).forEach((function(t){o=o||n.tasks.waiting[t].requires.indexOf(e)>=0})),o||Object.keys(n.tasks.active).length<=Object.keys(n.tasks.timedOut).length+1){var a=new Error("Task '".concat(e,"' timed out!"));t.optional?(n.completeTask(e,a),r(a)):i(a)}else n.tasks.timedOut[e]=t}),t.timeout))}))},e.prototype.completeTask=function(e,t,n){void 0===n&&(n=!1),this.tasks.active[e]&&(this.tasks.active[e].succeeded=n,this.tasks.resolved[e]=this.tasks.active[e],this.resolvedData[e]=t,delete this.tasks.active[e],delete this.tasks.timedOut[e],n||!this.tasks.resolved[e].optional||this.tasks.resolved[e].silenceOptionalErrors||console.error(t),this.initWaitingTasks(),this.checkAllTasksResolved())},e.prototype.initWaitingTasks=function(){var e=this;Object.keys(this.tasks.waiting).forEach((function(t){var n=e.tasks.waiting[t],r={ready:!0,anyParentSuccess:!1,allParentsSucceeded:!0};if(n.requires.forEach((function(t){e.tasks.resolved[t]?e.tasks.resolved[t].succeeded?r.anyParentSuccess=!0:r.allParentsSucceeded=!1:r.ready=!1})),r.ready){var i=n;r.allParentsSucceeded||n.allowSingleParentSuccess&&r.anyParentSuccess||(i={task:function(){return new Promise((function(e,n){return n(new Error("Precondition not met: ".concat(t)))}))},optional:!0}),e.tasks.active[t]=i,delete e.tasks.waiting[t],e.createTask(t,i).catch((function(t){return e._reject(t)}))}}))},e.prototype.checkAllTasksResolved=function(){var e=this;if(Object.keys(this.tasks.active).length<=Object.keys(this.tasks.timedOut).length){var t=!0;Object.keys(this.tasks.timedOut).forEach((function(n){if(t){var r=new Error("Task '".concat(n,"' timed out!"));if(!e.tasks.timedOut[n].optional)return t=!1,void e._reject(r);e.resolvedData[n]=r,delete e.tasks.timedOut[n]}})),t&&this._resolve(this.resolvedData)}},e}();t.batchAsync=function(e){return new n(e).promise}},7849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookieValue=t.getCookie=void 0,t.getCookie=function(e,t){if(e)return e.split(";").find((function(e){return e.indexOf("".concat(t,"="))>-1}))},t.getCookieValue=function(e,n){if(e)return((0,t.getCookie)(e,n)||"").split("=")[1]}},903:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCookieValue=t.getCookie=t.checkIsIOS=t.checkIsTablet=t.checkIsMobile=t.throttle=t.batchAsync=void 0;var i=n(1615);Object.defineProperty(t,"batchAsync",{enumerable:!0,get:function(){return i.batchAsync}});var o=n(8595);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return r(o).default}});var a=n(7803);Object.defineProperty(t,"checkIsMobile",{enumerable:!0,get:function(){return a.checkIsMobile}}),Object.defineProperty(t,"checkIsTablet",{enumerable:!0,get:function(){return a.checkIsTablet}}),Object.defineProperty(t,"checkIsIOS",{enumerable:!0,get:function(){return a.checkIsIOS}});var s=n(7849);Object.defineProperty(t,"getCookie",{enumerable:!0,get:function(){return s.getCookie}}),Object.defineProperty(t,"getCookieValue",{enumerable:!0,get:function(){return s.getCookieValue}})},7803:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsIOS=t.checkIsTablet=t.checkIsMobile=void 0,t.checkIsMobile=function(e){return Boolean(e&&(e.match(/iP(hone|od)/i)||e.match(/BlackBerry/i)||e.match(/Android/i)&&e.match(/Mobile/i)||e.match(/Nokia/i)&&e.match(/Symbian|Windows Phone/i)))},t.checkIsTablet=function(e){return Boolean(e&&e.match(/Tablet|iPad/i))},t.checkIsIOS=function(e,t){return Boolean(e&&t&&/iPad|iPhone|iPod/.test(e)&&!t.MSStream)}},8595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,i,o=this;return t||(t=100),function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=n||o||{},u=+new Date;r&&u<r+t?(clearTimeout(i),i=setTimeout((function(){r=u,c.deferred=!0,e.apply(c,a)}),t+u+1-r)):(r=u,e.apply(c,a))}}},3300:()=>{"use strict";var e=["Ready","Removed","SetupError","IsViewable","SizeChanged","BrandingClicked","ImpressionPrice","ImpressionRevenue","SessionInView","Bid","PrefetchStart","Play","Pause","QualityChanged","PlayError","VolumeChanged","FullscreenChanged","PlayerFloatChanged","FloatingEnterStart","FloatingEnterStop","FloatingExitStart","FloatingExitStop","CloseButtonClicked","CtaButtonClicked","OmidViewabilityThreshold","OmidAdSessionStart","OmidAdSessionFinish","AdOpportunity","AdLoaded","AdStarted","AdClick","AdPlay","AdPause","AdImpression","AdCompleted25","AdCompleted50","AdCompleted75","AdCompleted100","AdVolumeChange","AdSkipped","AdError","AdStopped","AdCompanion","VideoStarted","VideoCompleted25","VideoCompleted50","VideoCompleted75","VideoCompleted100","NewVideo","VideoChapterChanged","SubtitlesVisibilityChanged","PlayerClicked","ApiButtonClicked","GalleryCardClicked","Collapsed","AdCycleComplete","LegacyIdPlaybackError","FbsVideoComponentMounted","PlayerMounted","PlayerMountError"],t=["AdStarted","AdPlay"],n=["AdPause","AdSkipped","AdError","AdStopped","AdCompleted100"],r=["VideoStarted","Play"],i=["Pause","PlayError","VideoCompleted100"],o=function(e){return!!e.match(/-/)};function a(e){"undefined"!=typeof window&&window.performance&&performance.mark&&performance.mark("Fbs Video: "+e)}var s={r1eC2PU2G:{adsDisabled:!0},WrxGNsM25:{adsDisabled:!0},fyFvh0vAX:{adsDisabled:!0},SkRWvYDlW:{adsDisabled:!0,disableAnalytics:!0},V1t65Ch0l:{adsDisabled:!0}},c=(new Date).getTime(),u="undefined"!=typeof window&&(new URL(window.location.href).searchParams.has("debug")||"localhost"===window.location.hostname||"fbs.forbes.com"===window.location.hostname),l=function(e,t){if(u){var n=(new Date).getTime()-c,r="[fbs-video][".concat(n.toLocaleString("en-US"),"ms] - ").concat(e);t?console.log(r,t):console.log(r)}},d=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},f="event-id",p="pardot-form",m=function(e){return!!(null==e?void 0:e.getAttribute(f))||!!(null==e?void 0:e.getAttribute(p))},y=function(e){var t=e.component,n=e.html;!function(){if(!document.querySelector("style.fbs-video-protected-styles")){var e=document.createElement("style");e.className="fbs-video-protected-styles",e.innerHTML="\n@font-face{\n\tfont-display: swap;\n\tfont-family: 'Work Sans';\n\tfont-style: normal;\n\tfont-weight: 600;\n\tsrc: local('Work Sans SemiBold'), local('Work-Sans-SemiBold'),\n\t\turl('https://i.forbesimg.com/assets/fonts/work-sans/worksans-semibold-webfont.woff2') format('woff2'),\n\t\turl('https://i.forbesimg.com/assets/fonts/work-sans/worksans-semibold-webfont.woff') format('woff');\n}\n\n.fbs-v-overlay {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tbackground: url('https://images.forbes.com/brightcove/gray-bg.png') #D7D7D7 no-repeat top center / contain;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.fbs-v-o-content {\n\tfont-family: 'Work Sans', Helvetica, Arial, sans-serif;\n\tdisplay: flex;\n\twidth: 100%;\n\theight: 100%;\n\tjustify-content: center;\n\talign-items: center;\n\n\tfont-size: 14px;\n\tline-height: 30px;\n}\n\n@media only screen and (max-width: 560px) {\n\t.fbs-v-o-content {\n\t\tfont-size: 12px;\n\t\tline-height: 20px;\n\t}\n}\n\n.fbs-v-o-content input[type=\"submit\"]{ -webkit-appearance: none; }\n\n.fbs-v-o-content iframe {\n\tborder: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.fbs-v-o-content .form {\n\tmargin-top: 60px;\n\tmax-width: 460px;\n\twidth: 100%;\n}\n\n@media only screen and (max-width: 560px) {\n\t.fbs-v-o-content .form {\n\t\tmargin-top: 30px;\n\t\tmax-width: 330px;\n\t\tpadding: 0 15px;\n\t}\n}\n\n.fbs-v-o-content .form.no-registration {\n\tmargin-top: 0;\n}\n\n\n.fbs-v-o-content .form-element {\n\tmargin: 10px 0;\n\tmax-width: 450px;\n\twidth: 100%;\n\theight: 30px;\n\t-moz-box-sizing:border-box;\n    -webkit-box-sizing:border-box;\n    box-sizing:border-box;\n}\n\n@media only screen and (max-width: 560px) {\n\t.fbs-v-o-content .form-element {\n\t\tmargin: 4px 0;\n\t\tmax-width: 360px;\n\t}\n}\n\n.fbs-v-o-content .form__input {\n\tbackground-color: #fff;\n\tborder: 1px solid #979797;\n\tcolor: #000;\n\tfont-weight: 400;\n\ttext-align: center;\n}\n\n.fbs-v-o-content .form__input::placeholder {\n\tcolor: #929292;\n}\n\n.fbs-v-o-content .form__input:focus {\n\toutline: none;\n}\n\n.fbs-v-o-content .form__submit {\n\tbackground-color: #000;\n\tborder-radius: 4px;\n\tborder: 0;\n\tcolor: #FFF;\n\tcursor: pointer;\n\n\tfont-weight: 600;\n\ttext-transform: uppercase;\n}\n\n.fbs-v-o-content .form__msg {\n\tcolor: #000;\n\tline-height: 1.3rem;\n\tmargin: 10px 0 0;\n\ttext-align: center;\n}\n\n@media only screen and (max-width: 560px) {\n\t.fbs-v-o-content .form__msg {\n\t\tpadding: 0;\n\t}\n}\n\n.fbs-v-o-content .form-msg__registration {\n\tfont-size: 15px;\n\tline-height: 1.6em;\n\tmargin-top: 30px;\n}\n\n.fbs-v-o-content .form-msg a,\n.fbs-v-o-content .form-msg a:hover,\n.fbs-v-o-content .form-msg a:visited {\n\tcolor: #FFF;\n}\n\n.fbs-v-o-content .form-msg__error {\n\tdisplay: none;\n}\n\n@media only screen and (max-width: 560px) {\n\t.fbs-v-o-content .form__msg {\n\t\tfont-size: 10px;\n\t\tmargin: 4px 0 0;\n\t\tmax-width: 360px;\n\t\tpadding: 0 10px;\n\t}\n\n\t.fbs-v-o-content .form-msg__error {\n\t\tfont-size: 9px;\n\t\tline-height: .9rem;\n\t}\n}\n\n.fbs-v-o-content .spin {\n\tposition: relative;\n\twidth: 50px;\n\theight: 50px;\n\tmargin: 0 auto;\n\n\tdisplay: none;\n}\n\n.fbs-v-o-content .spin div {\n\tbox-sizing: border-box;\n\tdisplay: block;\n\tposition: absolute;\n\twidth: 32px;\n\theight: 32px;\n\tmargin: 3px;\n\tborder: 3px solid #000;\n\tborder-radius: 50%;\n\tanimation: spin-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n\tborder-color: #000 transparent transparent transparent;\n}\n\n.fbs-v-o-content .spin div:nth-child(1) {\n\tanimation-delay: -0.45s;\n}\n\n.fbs-v-o-content .spin div:nth-child(2) {\n\tanimation-delay: -0.3s;\n}\n\n.fbs-v-o-content .spin div:nth-child(3) {\n\tanimation-delay: -0.15s;\n}\n\n.fbs-v-overlay.is-loading .form__input,\n.fbs-v-overlay.is-loading .form__submit,\n.fbs-v-overlay.is-loading .form-msg__registration,\n.fbs-v-overlay.is-error .form-msg__registration {\n\tdisplay: none;\n}\n\n.fbs-v-overlay.is-loading .spin {\n\tdisplay: block;\n}\n\n.fbs-v-overlay.is-error .form-msg__error {\n\tdisplay: block;\n}\n\n@keyframes spin-ring {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\t100% {\n\t\ttransform: rotate(360deg);\n\t}\n}\n",document.body.appendChild(e)}}();var r=document.createElement("div");r.className="fbs-v-overlay";var i=document.createElement("div");return i.className="fbs-v-o-content",i.innerHTML=n,r.appendChild(i),t.appendToVideoElement(r),r},g="linear-gradient(to bottom, rgba(0, 0, 0, 0) 15%, #000000 90%)",v="\n@font-face {\n\tfont-display: block;\n\tfont-family: 'Merriweather';\n\tfont-style: normal;\n\tfont-weight: 700;\n\tsrc: local('Merriweather Bold'), local('Merriweather-Bold'),\n\turl('https://i.forbesimg.com/assets/fonts/merriweather/merriweather-bold-webfont.woff2') format('woff2'),\n\turl('https://i.forbesimg.com/assets/fonts/merriweather/merriweather-bold-webfont.woff') format('woff');\n}\n@font-face {\n\tfont-display: block;\n\tfont-family: 'Work Sans';\n\tfont-style: normal;\n\tfont-weight: 400;\n\tsrc: local('Work Sans'), local('Work-Sans'),\n\turl('https://i.forbesimg.com/assets/fonts/work-sans/worksans-regular-webfont.woff2') format('woff2'),\n\turl('https://i.forbesimg.com/assets/fonts/work-sans/worksans-regular-webfont.woff') format('woff');\n}\n\n.video-display--container {\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tjustify-content: flex-end;\n\tpadding: 12px 16px;\n\tposition: absolute;\n\tcursor: pointer;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\tz-index: 2;\n\tbackground-image: ".concat(g,";\n\tbackground-position: left top, center center;\n\tbackground-repeat: no-repeat, no-repeat;\n\tbackground-size: cover, cover;\n}\n\n.video-watch--title,\n.video-watch--text,\n.video-watch--duration {\n\tcolor: #fff;\n}\n\n.video-watch--title {\n\tfont: 700 16px/1.5 Merriweather, serif;\n\tmargin-bottom: 8px;\n\toverflow: hidden;\n\tdisplay: -webkit-box;\n\t-webkit-box-orient: vertical;\n\t-webkit-line-clamp: 2;\n}\n\n.video-watch--container,\n.video-watch--button {\n\tdisplay: flex;\n}\n\n.video-watch--text {\n\tfont: 700 10px/1.2 Work Sans, sans-serif;\n\tletter-spacing: 1.33px;\n}\n\n.video-watch--duration {\n\tfont: 10px/1.13 Work Sans, sans-serif;\n\tletter-spacing: 1.33px;\n}\n\n.fs-icon--play-circle {\n\twidth: 12px;\n\theight: 12px;\n\tmargin: 0 4px;\n}\n\n@media (min-width: 768px) {\n\t.video-display--container {\n\t\tpadding: 32px 40px;\n\t}\n\n\t.video-watch--title {\n\t\tfont: 700 24px/1.5 Merriweather, serif;\n\t\tmargin-bottom: 24px;\n\t}\n\n\t.video-watch--text {\n\t\tfont: 700 16px/1.13 Work Sans, sans-serif;\n\t}\n\n\t.video-watch--duration {\n\t\tfont: 16px/1.13 Work Sans, sans-serif;\n\t}\n\n\t.fs-icon--play-circle {\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tmargin: 0 8px;\n\t}\n}\n\n.hidden {\n\tdisplay: none;\n}\n"),w=function(e,t,n){var r,i=null===(r=null==e?void 0:e.getElementsByClassName("video-watch--".concat(t)))||void 0===r?void 0:r[0];i&&""===i.innerHTML&&(n?(i.innerHTML=n,i.classList.remove("hidden")):i.classList.add("hidden"))},b=function(e){if(e)return"string"==typeof e?e:E(e)},E=function(e){var t=Math.floor(e/3600),n="".concat(Math.floor(e%3600/60)).padStart(t?2:0,"0"),r="".concat(Math.floor(e%60)).padStart(2,"0");return t?"".concat(t,":").concat(n,":").concat(r):"".concat(n,":").concat(r)},S=["VideoStarted","VideoCompleted25","VideoCompleted50","VideoCompleted75","VideoCompleted100","Play","Pause","AdOpportunity","AdStarted","AdStopped","AdSkipped","AdPlay","AdPause","AdImpression","AdCompleted25","AdCompleted50","AdCompleted75","AdCompleted100","LegacyIdPlaybackError","SetupError","PlayError","AdError","FbsVideoComponentMounted","PlayerMounted","PlayerMountError"],A={Play:"VideoPlay",Pause:"VideoPause"};const _=function(e){var t=e.event,n=e.mediaId,r=e.playerLocation;if(S.includes(t)){var i="".concat(n,":").concat(r),o=A[t]||t;l("Tracking: action: ".concat(t,"; label: ").concat(i,"; ")),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"analyticsEvent","event category":"Connatix Video Player","event action":o,"event label":i})}};var k,C=function(e){if(e)try{var t=e.trim().split("/").map(Number),n=t[0],r=t[1];if(n&&r)return{ratioWidth:n,ratioHeight:r}}catch(e){}return{ratioWidth:16,ratioHeight:9}},P=(k=function(e,t){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},k(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)},T=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},x=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},D=function(e){function c(){var t=e.call(this)||this;return t.initialPlayerSettings={},t._videoPlaying=!1,t._adPlaying=!1,t.init=!1,t.attributeHasChanged=!1,t.videoService=window["fbs-video"],t.videoPlayingEventListener=t.handleVideoPlaying.bind(t),t}return P(c,e),Object.defineProperty(c,"observedAttributes",{get:function(){return["video-id","player-id","autoplay","report-autoplay","key-value-string","muted","ad-unit-path","ads-disabled","width","height","thumbnail","floating-enabled","aspect-ratio"]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playing",{get:function(){return this._videoPlaying||this._adPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"videoPlaying",{get:function(){return this._videoPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"duration",{get:function(){var e,t;if(null===(e=this.playerData)||void 0===e?void 0:e.mediaInfo)return null===(t=this.playerData.mediaInfo[this.playerData.currenMediaInfoIndex])||void 0===t?void 0:t.duration},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pauseAd",{get:function(){return this.hasAttribute("pause-ad")&&"false"!==this.getAttribute("pause-ad")},set:function(e){e?this.setAttribute("pause-ad",""):this.removeAttribute("pause-ad")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"videoId",{get:function(){return this.getAttribute("video-id")},set:function(e){e&&this.setAttribute("video-id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"videoIdList",{get:function(){var e;return(null===(e=this.getAttribute("video-id-list"))||void 0===e?void 0:e.split(","))||[]},set:function(e){(null==e?void 0:e.length)&&this.setAttribute("video-id-list",e.join(","))},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"adsDisabled",{get:function(){return this.hasAttribute("ads-disabled")?"false"!==this.getAttribute("ads-disabled"):this.initialPlayerSettings.adsDisabled},set:function(e){e?this.setAttribute("ads-disabled",""):this.removeAttribute("ads-disabled")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"adUnitPath",{get:function(){return this.getAttribute("ad-unit-path")},set:function(e){e&&this.setAttribute("ad-unit-path",e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playerId",{get:function(){return this.getAttribute("player-id")},set:function(e){e&&this.setAttribute("player-id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"autoplay",{get:function(){return!!this.hasAttribute("live")||this.hasAttribute("autoplay")&&"false"!==this.getAttribute("autoplay")},set:function(e){e?this.setAttribute("autoplay",""):this.removeAttribute("autoplay")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"floatingEnabled",{get:function(){return this.hasAttribute("floating-enabled")&&"false"!==this.getAttribute("floating-enabled")},set:function(e){e?this.setAttribute("floating-enabled",""):this.removeAttribute("floating-enabled")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"muted",{get:function(){return this.hasAttribute("muted")&&"false"!==this.getAttribute("muted")},set:function(e){e?this.setAttribute("muted",""):this.removeAttribute("muted")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"secretAutoplay",{get:function(){return this.hasAttribute("secret-autoplay")&&"false"!==this.getAttribute("secret-autoplay")},set:function(e){e?this.setAttribute("secret-autoplay",""):this.removeAttribute("secret-autoplay")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"keyValueString",{get:function(){return this.getAttribute("key-value-string")},set:function(e){e&&this.setAttribute("key-value-string",e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"thumbnail",{get:function(){return this.getAttribute("thumbnail")},set:function(e){e||this.removeAttribute("thumbnail"),this.setAttribute("thumbnail",e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playerType",{get:function(){return this.getAttribute("player-type")||"other"},set:function(e){this.setAttribute("player-type",e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"aspectRatio",{get:function(){return this.isValidAspectRatio(this.getAttribute("aspect-ratio"))?this.getAttribute("aspect-ratio"):"16/9"},set:function(e){this.isValidAspectRatio(e)&&this.setAttribute("aspect-ratio",e)},enumerable:!1,configurable:!0}),c.prototype.isValidAspectRatio=function(e){return!!(null==e?void 0:e.match(/^\d+\/\d+$/))},Object.defineProperty(c.prototype,"responsive",{get:function(){return!this.getAttribute("width")&&!this.getAttribute("height")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"fixedWidth",{get:function(){var e=this.getAttribute("width");if(!e&&this.hasAttribute("height")){var t=C(this.aspectRatio),n=t.ratioWidth,r=t.ratioHeight;return parseInt(this.getAttribute("height"))*n/r}return e},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"fixedHeight",{get:function(){var e=this.getAttribute("height");if(!e&&this.hasAttribute("width")){var t=C(this.aspectRatio),n=t.ratioWidth,r=t.ratioHeight;return parseInt(this.getAttribute("width"))*r/n}return e},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"showThumbnail",{get:function(){return!this.hasAttribute("hide-thumbnail")},enumerable:!1,configurable:!0}),c.prototype.attributeChangedCallback=function(e,t,n){l("attribute change callback ".concat(e," = ").concat(n)),this.attributeHasChanged=!0,this.init&&"video-id"===e&&this.changeVideoIds([n]),this.init&&"video-id-list"===e&&this.changeVideoIds(n.split(",")),this.init&&this.videoPlayer&&"floating-enabled"===e&&(this.playerData.floatingEnabled=null!==n,null===n?this.videoPlayer.disableFloatingMode():this.videoPlayer.enableFloatingMode()),this.videoElement&&"aspect-ratio"===e&&(this.videoElement.style.aspectRatio=n)},c.prototype.waitUntilAttributesAreSet=function(){return T(this,void 0,void 0,(function(){var e=this;return O(this,(function(t){switch(t.label){case 0:return this.attributeHasChanged=!1,[4,new Promise((function(t){var n=0,r=setInterval((function(){n++,(e.attributeHasChanged||n>5)&&(clearInterval(r),t())}),10)}))];case 1:return t.sent(),[2]}}))}))},c.prototype.connectedCallback=function(){var e;return T(this,void 0,void 0,(function(){var t,n,r,i,a,c=this;return O(this,(function(u){switch(u.label){case 0:return l("component connected"),[4,this.waitUntilAttributesAreSet()];case 1:u.sent(),l("component initialisation started"),_({event:"FbsVideoComponentMounted",mediaId:this.videoId||(null===(e=this.videoIdList)||void 0===e?void 0:e.join(","))||(this.hasAttribute("live")?"live":""),playerLocation:this.playerType}),this.initialPlayerSettings=function(e,t){if(e&&o(e))return{playerId:e};var n=s[e]||{},r=n.adsDisabled,i=void 0!==r&&r,a=n.disableAnalytics;return{playerId:t?"66aa8af2-f9d5-40cb-91f5-307ae1f29ff8":"7b321eba-cae3-41f4-8f8c-5f8a316fa963",adsDisabled:i,disableAnalytics:void 0!==a&&a}}(this.playerId,this.hasAttribute("live")),this.videoElementId=this.videoService.generateId(),this.insertVideoElement(),this.addEventListeners(),t=m(this),n=x(x([],this.videoId?[this.videoId]:[],!0),this.videoIdList?this.videoIdList:[],!0),u.label=2;case 2:return u.trys.push([2,4,,5]),r=function(){c.init=!0,c.videoPlayer=c.playerData.player,c.muted&&c.mute(),c.dispatchEvent(new CustomEvent("init")),c.classList.add("video-init")},t&&(g={component:this,onSuccess:function(){return T(c,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this.videoService.mountPlayer(this.playerData)];case 1:return e.sent(),r(),[2]}}))}))}},(null==(v=(g||{}).component)?void 0:v.getAttribute(f))&&function(e){var t,n,r=e.component,i=e.onSuccess,o=r.getAttribute(f),a=r.getAttribute("provider")||"bizzabo",s=r.getAttribute("registration-url"),c=r.getAttribute("support-email")||"forbesevents@forbes.com",u=r.getAttribute("code"),l=s?'\n\t\t<p class="form__msg form-msg__registration">\n\t\t\tNot yet registered? Please do so <a href="'.concat(s,'" target="_blank">here</a>\n\t\t\tas registration is required to access this virtual experience.\n\t\t</p>\n\t'):"",p=s?'If you have not registered, please do so <a href="'.concat(s,'" target="_blank">here</a>.'):"",m=y({component:r,html:'\n\t\t\t<div class="form'.concat(s?"":" no-registration",'">\n\t\t\t\t<input class="form-element form__input password-input"\n\t\t\t\t\tplaceholder="Enter Your Email Address or Registration #" type="text" />\n\n\t\t\t\t<input class="form-element form__submit submit-button" type="submit" value="Submit">\n\n\t\t\t\t').concat(l,'\n\n\t\t\t\t<p class="form__msg form-msg__error">\n\t\t\t\t\tThe email address you have entered is incorrect. Please enter the email address you registered with.\n\t\t\t\t\t').concat(p,'\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tIf you have any questions, please email\n\t\t\t\t\t<a href="mailto:').concat(c,'" target="_blank">').concat(c,'</a> for assistance.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="spin">\n\t\t\t\t\t<div></div>\n\t\t\t\t\t<div></div>\n\t\t\t\t\t<div></div>\n\t\t\t\t\t<div></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t')}),g=null===(t=m.getElementsByClassName("password-input"))||void 0===t?void 0:t[0],v=null===(n=m.getElementsByClassName("submit-button"))||void 0===n?void 0:n[0],w=function(){return d(void 0,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return m.classList.remove("is-error"),m.classList.add("is-loading"),e=u||(null==g?void 0:g.value),[4,fetch("https://www.forbes.com/dp-event-codes/".concat(a,"?code=").concat(e,"&event=").concat(o),{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"}})];case 1:return[4,t.sent().json()];case 2:return t.sent()?(i(),m.remove(),[2]):(m.classList.remove("is-loading"),m.classList.add("is-error"),[2])}}))}))};u&&w(),null==v||v.addEventListener("click",w),null==g||g.addEventListener("keydown",(function(e){return d(void 0,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return"Enter"!==e.key?[3,2]:[4,w()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))}(g),(null==v?void 0:v.getAttribute(p))&&function(e){var t=e.component,n=e.onSuccess,r=t.getAttribute(p),i=y({component:t,html:'\n\t\t\t<iframe\n\t\t\t\tsrc="https://forbesinfo.forbes.com'.concat(r,'"\n\t\t\t\tid="pardot-form"\n\t\t\t\tallowTransparency="true"></iframe>\n\t\t')}),o=function(e){"pardot-message"===e.data&&(n(),i.remove(),window.removeEventListener("message",o))};window.addEventListener("message",o)}(g)),i=this,[4,this.videoService.init(I(I({component:this,videoElementId:this.videoElementId,getDimensions:function(){return c.getActualDimensions()}},this.initialPlayerSettings),{videoIds:n,autoplay:this.autoplay,secretAutoplay:this.secretAutoplay,keyValueString:this.keyValueString,adUnitPath:this.adUnitPath,adsDisabled:this.adsDisabled,pauseAdOutOfView:this.pauseAd,responsive:this.responsive,aspectRatio:this.aspectRatio,fixedWidth:this.fixedWidth,fixedHeight:this.fixedHeight,floatingEnabled:this.floatingEnabled,reportingParameters:this.getPageLevelReportingParameters()}),t)];case 3:return i.playerData=u.sent(),t?[2]:(r(),[3,5]);case 4:return a=u.sent(),this.renderVideoError(a),[2];case 5:return[2]}var g,v}))}))},c.prototype.disconnectedCallback=function(){this.init&&(this.videoService.dispose(this.playerData),this.removeEventListeners())},c.prototype.changeVideoIds=function(e){return T(this,void 0,void 0,(function(){return O(this,(function(t){switch(t.label){case 0:l("video change requested to ".concat(e)),this.pause(),this.playerData.videoIds=e,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.videoService.loadVideoMediaInfo(this.playerData)];case 2:return t.sent(),[3,4];case 3:return t.sent(),l("video change failed"),[2];case 4:return this.playerData.player&&this.playerData.player.destroy(),this.playerData.adsDisabled=!0,this.playerData.autoplay=this.autoplay,[4,this.videoService.mountPlayer(this.playerData)];case 5:return t.sent(),this.videoPlayer=this.playerData.player,this.autoplay&&(this.muted&&this.mute(),this.play()),[2]}}))}))},c.prototype.mute=function(){this.init&&this.videoPlayer&&this.videoPlayer.setVolume(0)},c.prototype.play=function(){this.init&&this.videoPlayer&&this.videoPlayer.play()},c.prototype.pause=function(){this.init&&this.videoPlayer&&this.videoPlayer.pause()},c.prototype.float=function(){this.videoPlayer&&this.floatingEnabled&&this.videoPlayer.enableFloatingMode()},c.prototype.unFloat=function(){this.videoPlayer&&this.floatingEnabled&&this.videoPlayer.disableFloatingMode()},c.prototype.togglePlay=function(){this.playing?this.pause():this.play()},c.prototype.requestFullscreen=function(){return T(this,void 0,void 0,(function(){return O(this,(function(e){return this.init&&this.videoPlayer&&this.videoPlayer.toggleFullscreen(),[2]}))}))},c.prototype.getAspectRatio=function(){return this.responsive?this.aspectRatio||"auto":"".concat(this.fixedWidth,"/").concat(this.fixedHeight)},c.prototype.insertVideoElement=function(){var e=this;if(this.videoElement=document.createElement("div"),this.videoElement.id=this.videoElementId,this.videoElement.style.position="relative",this.videoElement.style.width="100%",this.videoElement.style.backgroundSize="cover",this.videoElement.style.backgroundPosition="center center",this.thumbnail&&this.showThumbnail&&(this.videoElement.style.backgroundImage="url(".concat(this.thumbnail,")")),this.videoElement.style.aspectRatio=this.getAspectRatio(),this.responsive||(this.videoElement.style.width="".concat(this.fixedWidth,"px"),this.videoElement.style.height="".concat(this.fixedHeight,"px")),!this.autoplay&&!this.hasAttribute("live")&&!m(this)){var t=this.getAttribute("overlay-title"),n=this.getAttribute("overlay-duration");this.playOverlayElement=function(e,t,n){!function(){if(!document.querySelector("style.fbs-video-play-overlay-styles")){var e=document.createElement("style");e.className="fbs-video-play-overlay-styles",e.innerHTML=v,document.body.appendChild(e)}}();var r=document.createElement("div");return r.className="video-display--container",t&&(r.style.backgroundImage="".concat(g,", url('").concat(t,"')")),r.innerHTML='\n\t\t<div class="video-watch--title hidden"></div>\n\t\t<div class="video-watch--container">\n\t\t\t<div class="video-watch--button">\n\t\t\t\t<div class="video-watch--text">WATCH</div>\n\t\t\t\t<svg class="fs-icon fs-icon--play-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path class="fs-icon fs-icon--play" fill="#fff" d="M24.252 41.721V18.037l15.789 11.842z"></path><path class="fs-icon fs-icon--circle" fill="#fff" d="M30 59.879c-16.542 0-30-13.457-30-30 0-16.542 13.458-30 30-30 16.543 0 30 13.458 30 30 0 16.543-13.457 30-30 30zm0-57.5c-15.164 0-27.5 12.336-27.5 27.5s12.336 27.5 27.5 27.5 27.5-12.336 27.5-27.5-12.336-27.5-27.5-27.5z"></path></svg>\n\t\t\t</div>\n\t\t\t<div class="video-watch--duration hidden"></div>\n\t\t</div>\n\t',w(r,"duration",b(n)),w(r,"title",e),r}(t,this.thumbnail,n||this.duration),this.playOverlayElement.addEventListener("click",(function(){var t,n;e.playOverlayElement.remove(),null===(n=null===(t=e.playerData)||void 0===t?void 0:t.player)||void 0===n||n.play()})),this.videoElement.appendChild(this.playOverlayElement)}this.posterRemovalMutationObserver=new MutationObserver((function(t){t.forEach((function(){var t,n;null===(n=null===(t=e.videoElement.getElementsByTagName("video"))||void 0===t?void 0:t[0])||void 0===n||n.removeAttribute("poster")}))})),this.posterRemovalMutationObserver.observe(this.videoElement,{attributes:!0,childList:!0,subtree:!0}),this.innerHTML="",this.appendChild(this.videoElement)},c.prototype.renderVideoError=function(e){var t,n=document.createElement("div");Object.assign(n.style,{position:"relative",width:"100%",height:"100%",backgroundColor:"#171717",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",font:"400 16px/22px Work Sans, sans-serif"}),n.innerHTML="".concat('<svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin: 0 4px 4px"><path d="M10.0007 3.99169L16.2757 14.8334H3.72565L10.0007 3.99169ZM10.0007 0.666687L0.833984 16.5H19.1673L10.0007 0.666687Z" fill="#fff"/><path d="M10.8346 12.3334H9.16797V14H10.8346V12.3334Z" fill="#fff"/><path d="M10.8346 7.33337H9.16797V11.5H10.8346V7.33337Z" fill="#fff"/></svg>',"Video unavailable"),u&&(n.innerHTML+="<br>".concat(e)),this.videoElement.appendChild(n),null===(t=this.playOverlayElement)||void 0===t||t.remove()},c.prototype.getActualDimensions=function(){return this.videoElement.getBoundingClientRect()},c.prototype.addEventListeners=function(){this.handleEventListeners("addEventListener"),document.addEventListener("fbs-video-playing",this.videoPlayingEventListener)},c.prototype.removeEventListeners=function(){this.handleEventListeners("removeEventListener"),document.removeEventListener("fbs-video-playing",this.videoPlayingEventListener)},c.prototype.handleEventListeners=function(e){var o=this;t.forEach((function(t){return o[e](t,o.setAdPlaying)})),n.forEach((function(t){return o[e](t,o.setAdStopped)})),r.forEach((function(t){return o[e](t,o.setVideoPlaying)})),i.forEach((function(t){return o[e](t,o.setVideoStopped)})),this[e]("MediaInfoLoaded",this.onMediaInfoLoaded),this[e]("VideoStarted",this.onVideoStarted),this[e]("Pause",this.onPause),this[e]("VideoCompleted100",this.onVideoCompleted100),this[e]("AdStarted",this.onAdStarted),this[e]("AdCompleted100",this.onAdCompleted100),this[e]("AdOpportunity",this.onAdOpportunity),this[e]("AdLoaded",this.onAdLoaded),this[e]("NewThumbnail",this.onNewThumbnail),this[e]("OtherVideoPlaying",this.onOtherVideoPlaying),this[e]("MediaInfoEndpointFailed",this.onMediaInfoEndpointFailed)},c.prototype.setAdPlaying=function(){this._adPlaying=!0},c.prototype.setAdStopped=function(){this._adPlaying=!1},c.prototype.setVideoPlaying=function(){this._videoPlaying=!0,this.setAttribute("playing","")},c.prototype.setVideoStopped=function(){this._videoPlaying=!1,this.removeAttribute("playing")},c.prototype.onMediaInfoLoaded=function(e){var t,n,r,i,o,a=e.detail;(null===(t=null==a?void 0:a[0])||void 0===t?void 0:t.duration)&&this.playOverlayElement&&w(this.playOverlayElement,"duration",b(null===(n=null==a?void 0:a[0])||void 0===n?void 0:n.duration)),(null===(r=null==a?void 0:a[0])||void 0===r?void 0:r.title)&&this.playOverlayElement&&w(this.playOverlayElement,"title",null===(i=null==a?void 0:a[0])||void 0===i?void 0:i.title),this.videoElement.title=null===(o=null==a?void 0:a[0])||void 0===o?void 0:o.title},c.prototype.onVideoStarted=function(){var e,t;this.dispatchEvent(new CustomEvent("play")),this.videoElement.title=null===(t=null===(e=this.playerData.mediaInfo)||void 0===e?void 0:e[this.playerData.currenMediaInfoIndex])||void 0===t?void 0:t.title},c.prototype.onPause=function(){this.dispatchEvent(new CustomEvent("pause"))},c.prototype.onVideoCompleted100=function(){this.dispatchEvent(new CustomEvent("ended"))},c.prototype.onAdStarted=function(){this.dispatchEvent(new CustomEvent("ad-started"))},c.prototype.onAdCompleted100=function(){this.dispatchEvent(new CustomEvent("ad-ended"))},c.prototype.onAdOpportunity=function(){a("Ad Requested "+this.videoElementId)},c.prototype.onAdLoaded=function(){a("Ad Loaded "+this.videoElementId)},c.prototype.onNewThumbnail=function(e){var t;if(this.videoElement&&(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.thumbnailUrl)){var n,r,i=e.detail.thumbnailUrl;this.thumbnail=i,l("new thumbnail available:  ".concat(i)),this.showThumbnail&&(this.videoElement.style.backgroundImage="url(".concat(i,")")),this.playOverlayElement&&(r=i,(n=this.playOverlayElement)&&(n.style.backgroundImage="".concat(g,", url('").concat(r,"')")))}},c.prototype.onMediaInfoEndpointFailed=function(){this.dispatchEvent(new CustomEvent("ended"))},c.prototype.onOtherVideoPlaying=function(e){var t,n;this.playing&&(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.component)&&(null===(n=null==e?void 0:e.detail)||void 0===n?void 0:n.component)!==this&&this.pause()},c.prototype.handleVideoPlaying=function(e){this.dispatchEvent(new CustomEvent("OtherVideoPlaying",e))},c.prototype.appendToVideoElement=function(e){this.videoElement.appendChild(e)},c.prototype.getPageLevelReportingParameters=function(){var e,t;return{customParam1:null===(t=null===(e=window.forbes)||void 0===e?void 0:e["simple-site"])||void 0===t?void 0:t.articleId,customParam2:this.playerType}},c}(HTMLElement),M=function(e){this.playerId="default",this.autoplay=!1,this.secretAutoplay=!1,this.adUnitPath="/7175/fdcvideo",this.currenMediaInfoIndex=0,this.disableAnalytics=!1,this.responsive=!0,Object.assign(this,e),this.id=e.videoElementId},j=function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},j.apply(this,arguments)},L=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},N=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},H=function(e){var t=e.fbsAdsService;return L(void 0,void 0,void 0,(function(){var e,n;return N(this,(function(r){switch(r.label){case 0:return e={},[4,t.getPageTargeting()];case 1:return n=r.sent(),Object.keys(n).filter((function(e){return!(e.startsWith("mnet")||e.startsWith("fb_")||e.startsWith("amzn"))})).forEach((function(t){e[t]=n[t].join()})),[2,e]}}))}))},F=function(e){var t=e.adUnitPath,n=e.videoId,r=e.keyValueString,i=e.duration,o=e.specialSlot,a=e.channelName,s=e.sectionName,c=e.autoplay,u=e.secretAutoplay,d=e.playerWidth,h=e.playerHeight,f=e.amazonBid,p=e.mNetBid;return L(void 0,void 0,void 0,(function(){var e,m,y,g,v,w,b,E,S,A,_,k,C,P,I,T,O,x;return N(this,(function(D){switch(D.label){case 0:return(e=window.fbsads)?(m=t||(null==e?void 0:e.adUnitPath)||"/7175/fdcvideo",l("Ad unit for targeting:",m),y=(new Date).getTime(),[4,H({fbsAdsService:e})]):[2];case 1:return g=D.sent(),v=(r||"").split("&"),w=(v||[]).reduce((function(e,t){var n=t.split("="),r=n[0],i=n[1];try{e[r]=decodeURIComponent(i||"")}catch(t){console.error(t),e[r]=""}return e}),{}),300===h&&d/h>=1.33&&(w.vh="300plus"),b=!u&&c,E=j(j(j({},g),{vid:n,vl:i?i<=60?"1min":"not1min":"unknown",vss:o||"",autoplay:b?"yes":"no",vchan:(null==a?void 0:a.replace(/\s/g,""))||"",vsec:(null==s?void 0:s.replace(/\s/g,""))||""}),w),l("targeting keys prepared:",E),S="",Object.keys(E).forEach((function(e){S+=(S?"&":"")+e+"="+encodeURIComponent(E[e])})),(A="function"==typeof(null===(T=null==f?void 0:f.helpers)||void 0===T?void 0:T.qsParams)?null===(O=null==f?void 0:f.helpers)||void 0===O?void 0:O.qsParams():null===(x=null==f?void 0:f.helpers)||void 0===x?void 0:x.qsParams)&&(S+=A),p&&(S+="&".concat(p)),S=encodeURIComponent(S),_=encodeURIComponent("https://www.forbes.com/video/".concat(n,"/")),k="",((C=window.trackingService||{}).isEurope||C.isChina||C.checkJurisdictionCode())&&document.cookie.match(/_swb_consent_=/)&&!C.getUserConsent("behavioral_advertising")&&(k="&npa=1"),P=b?"auto":"click",I="https://pubads.g.doubleclick.net/gampad/ads?sz=620x350|480x320&ciu_sz=s&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1".concat(k)+"&iu=".concat(m,"&cust_params=").concat(S)+"&url=[APP_URL]&description_url=".concat(_)+"&vpa=".concat(P,"&vpmute=[MUTE]&hl=en&cb=[CB]"),l("AD server URL prepared in ".concat((new Date).getTime()-y,", server URL: ").concat(I)),[2,I]}}))}))},R=function(e){var t=e.fbsAdsService,n=e.videoId;return L(void 0,void 0,void 0,(function(){var e;return N(this,(function(r){if(!n)throw new Error("No videoId specified");return e=(new Date).getTime(),[2,Promise.race([t.fetchAmazonBids([{slotID:n,mediaType:"video"}]).then((function(t){var r=(new Date).getTime()-e;return l("amazon header bids done in ".concat(r,", count bids: ").concat(t.length)),(t||[]).find((function(e){return e.slotID===n}))})),new Promise((function(e,t){setTimeout(t,2e3)}))])]}))}))},U=function(e){var t=e.fbsAdsService;return L(void 0,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return e=(new Date).getTime(),[4,t.initMediaNetVideoBidding()];case 1:return n.sent(),[2,Promise.race([t.fetchMediaNetVideoBids().then((function(t){var n=(new Date).getTime()-e;return l("mNet header bids done in ".concat(n,", response: ").concat(t)),t})),new Promise((function(e,t){setTimeout(t,2e3)}))])]}}))}))},B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)},z=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},W="forbesvideoimasdkconnatix585967432463",K=function(){function t(){this.idCount=0}return t.prototype.generateId=function(){return"connatix_player_"+this.idCount++},t.prototype.init=function(e,t){return void 0===t&&(t=!1),z(this,void 0,void 0,(function(){var n,r,i,o,a,s,c;return V(this,(function(u){switch(u.label){case 0:return l("initializing player ".concat(e.videoElementId)),[4,this.waitForGdpr()];case 1:return u.sent(),n=new M(e),[4,Promise.allSettled([this.fetchHeaderBids(n),this.loadVideoMediaInfo(n),this.loadConnatix()])];case 2:if(r=u.sent(),i=r[0],o=r[1],"rejected"===r[2].status)throw new Error("Connatix player could not load");return a=(null==i?void 0:i.value)||{},s=a.mNetBid,c=a.amazonBid,[4,this.loadVASTTagUrl(n,s,c)];case 3:return u.sent(),"fulfilled"!==o.status||t?[3,5]:[4,this.mountPlayer(n)];case 4:u.sent(),u.label=5;case 5:if("rejected"===o.status)throw new Error(o.reason);return[2,n]}}))}))},t.prototype.fetchHeaderBids=function(e){var t;return z(this,void 0,void 0,(function(){return V(this,(function(n){if(e.adsDisabled)throw new Error("Ads are disabled, skipping bidding");return[2,(r=null===(t=e.videoIds)||void 0===t?void 0:t[0],L(void 0,void 0,void 0,(function(){var e,t,n,i,o,a,s;return N(this,(function(c){switch(c.label){case 0:return e=(new Date).getTime(),(t=window.fbsads)?[4,Promise.allSettled([U({fbsAdsService:t}),R({fbsAdsService:t,videoId:r})])]:[2];case 1:return n=c.sent(),i=n[0],o=n[1],a=(i||{}).value,s=(o||{}).value,l("header bidding done in ".concat((new Date).getTime()-e)),[2,{mNetBid:a,amazonBid:s}]}}))})))];var r}))}))},t.prototype.loadVASTTagUrl=function(e,t,n){var r,i,o;return z(this,void 0,void 0,(function(){var a,s,c,u,l,d,h,f,p,m,y,g,v,w;return V(this,(function(b){switch(b.label){case 0:return e.adsDisabled||(null===(i=null===(r=e.mediaInfo)||void 0===r?void 0:r[0])||void 0===i?void 0:i.disableAdvertising)?[2]:(a=e.adUnitPath,s=e.keyValueString,c=e.autoplay,u=e.secretAutoplay,l=(null===(o=e.mediaInfo)||void 0===o?void 0:o[0])||{customFields:{}},d=l.id,h=l.duration,f=l.specialSlot,p=l.channelName,m=l.sectionName,y=e.getDimensions()||{},g=y.width,v=y.height,w=e,[4,F({adUnitPath:a,videoId:d,keyValueString:s,duration:h,specialSlot:f,channelName:p,sectionName:m,autoplay:c,secretAutoplay:u,playerWidth:g,playerHeight:v,mNetBid:t,amazonBid:n})]);case 1:return w.adServerUrl=b.sent(),[2]}}))}))},t.prototype.waitForGdpr=function(){return z(this,void 0,void 0,(function(){var e;return V(this,(function(t){return e=window.trackingService||{},[2,new Promise((function(t){if(!e.isEurope&&!e.isChina||document.cookie.match(/_swb_consent_=/))t();else var n=0,r=setInterval((function(){document.cookie.match(/_swb_consent_=/)||n>35?(clearInterval(r),t()):n++}),200)}))]}))}))},t.prototype.loadConnatix=function(){return z(this,void 0,void 0,(function(){return V(this,(function(e){return window.cnxel?[2]:[2,new Promise((function(e,t){window.cnxel={},window.cnxel.cmd=[];var n=document.createElement("iframe");n.src="javascript:false",n.style.display="none",n.onload=function(){var r=n.contentWindow.document,i=r.createElement("script");i.src="//cd.elements.video/player.js?cid=".concat("62cec241-7d09-4462-afc2-f72f8d8ef40a"),i.setAttribute("async","1"),i.setAttribute("type","text/javascript"),r.body.appendChild(i),i.onload=function(){e()},i.onerror=function(){t()}},document.head.appendChild(n)}))]}))}))},t.prototype.loadVideoMediaInfo=function(e){var t,n,r,i,a;return z(this,void 0,void 0,(function(){var s,c,u,d,h=this;return V(this,(function(f){switch(f.label){case 0:if(e.mediaInfo=void 0,!(null===(t=e.videoIds)||void 0===t?void 0:t.length))return[2];s=e.videoIds.join(","),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fetch("/forbesapi/video/get/".concat(s,"/")).then((function(e){return e.json()}))];case 2:return(c=f.sent())&&(e.mediaInfo=(Array.isArray(c)?c:[c]).map((function(e){return h.mapVideoEndpointToMediaInfo(e)})).filter((function(e){return null==e?void 0:e.id})).sort((function(t,n){return e.videoIds.indexOf(null==t?void 0:t.actualVideoId)-e.videoIds.indexOf(null==n?void 0:n.actualVideoId)}))),[3,4];case 3:throw u=f.sent(),l("Request to get the media information failed",u),_({event:"SetupError",mediaId:s,playerLocation:e.component.playerType}),new Error("mediaInfo failed to load: ".concat(u));case 4:if((null===(n=e.mediaInfo)||void 0===n?void 0:n.length)||!(null===(r=e.videoIds)||void 0===r?void 0:r[0])||o(null===(i=e.videoIds)||void 0===i?void 0:i[0])||(d=e.videoIds[0],e.mediaInfo=[{id:d,forceSourceItemId:d}],e.autoplay||e.component.posterRemovalMutationObserver.disconnect(),_({event:"LegacyIdPlaybackError",mediaId:d,playerLocation:e.component.playerType})),!(null===(a=e.mediaInfo)||void 0===a?void 0:a.length))throw l("media information is not available"),e.component.dispatchEvent(new Event("MediaInfoEndpointFailed")),_({event:"SetupError",mediaId:s,playerLocation:e.component.playerType}),new Error("mediaInfo for ids ".concat(s," is empty"));return l("video mediaInfo loaded:",e.mediaInfo),this.dispatchMediaInfoLoaded(e),[2,e.mediaInfo]}}))}))},t.prototype.getChannelSectionNames=function(e){if(!(null==e?void 0:e.length))return{};var t=function(e,t){var n=e.find((function(e){return!!e[t]}));if(n)return n[t]};return{channelName:t(e,"channelName"),sectionName:t(e,"sectionName")}},t.prototype.mapVideoEndpointToMediaInfo=function(e){var t=e||{},n=t.video,r=t.title,i=t.specialSlot,o=t.channelSection,a=n||{},s=a.videoId,c=a.connatixId,u=a.stillImage,l=a.thumbImage,d=a.length,h=a.disableAdvertising,f=this.getChannelSectionNames(o),p=f.channelName,m=f.sectionName;return{id:c||s,actualVideoId:s,thumbnailUrl:u||l,title:r,disableAdvertising:h,duration:Math.round((d||0)/1e3),specialSlot:i,channelName:p,sectionName:m}},t.prototype.getConnatixPlayerConfig=function(e){var t,n,r,i,o=window.cnxel.configEnums,a=e.adsDisabled||!e.adServerUrl,s=1===(null===(t=e.mediaInfo)||void 0===t?void 0:t.length)?e.mediaInfo[0].id:void 0,c=(null===(n=e.mediaInfo)||void 0===n?void 0:n.length)>1?e.mediaInfo.map((function(e){return e.id})):void 0,u=C(e.aspectRatio),l=u.ratioWidth,d=u.ratioHeight,h={playbackMode:e.autoplay?o.PlaybackModeEnum.AutoPlay:o.PlaybackModeEnum.ClickToPlay,defaultSoundMode:e.autoplay?o.DefaultSoundModeEnum.Off:o.DefaultSoundModeEnum.On,nextVideoMode:c?o.NextVideoModeEnum.Next:o.NextVideoModeEnum.Stop,disableAdvertising:a,rendering:{forceInsertPath:!0,containerSelector:"#".concat(e.videoElementId),insertPosition:o.InsertPositionEnum.WithinContainer},customization:{responsive:e.responsive,ratioWidth:l,ratioHeight:d,fixedWidth:e.fixedWidth,fixedHeight:e.fixedHeight,floating:{mode:e.floatingEnabled?o.FloatingModeEnum.AfterInView:o.FloatingModeEnum.Off,closeButton:o.CloseButtonModeEnum.OnHover,fixedPosition:o.FloatingFixedPositionModeEnum.Page,scrollPosition:o.FloatingScrollPositionEnum.BottomLeft,floatingGutterX:10,floatingGutterY:10,floatingWidth:window.innerWidth<1230?300:400}},advertising:{lineItems:[{id:"f9a85c20-7d4b-4200-bf9e-3354710df1a1",cpm:.01,url:e.adServerUrl,pauseAdOutOfView:e.pauseAdOutOfView}]},plugins:{moatAnalyticsSettings:{imaAdPartnerCode:W,normalAdPartnerCode:W}}},f=B({playerId:e.playerId},e.reportingParameters||{}),p=null===(i=null===(r=e.mediaInfo)||void 0===r?void 0:r[0])||void 0===i?void 0:i.forceSourceItemId;return B(B({},f),p?{settings:B(B({},h),{forceSourceItemId:p})}:c?{mediaIdList:c,useMediaIdListAsPlaylist:!0,settings:h}:{mediaId:s,settings:h})},t.prototype.mountPlayer=function(e){return z(this,void 0,void 0,(function(){var t=this;return V(this,(function(n){return[2,new Promise((function(n,r){window.cnxel.cmd.push((function(){window.cnxel(t.getConnatixPlayerConfig(e)).render("".concat(e.videoElementId),(function(i,o){var a,s;if(i)return _({event:"PlayerMountError",mediaId:i,playerLocation:e.component.playerType}),void r(i);_({event:"PlayerMounted",mediaId:(null===(s=null===(a=e.mediaInfo)||void 0===a?void 0:a.map((function(e){return e.id})))||void 0===s?void 0:s.join(","))||"live",playerLocation:e.component.playerType}),t.onPlayerRendered(e,o),n()}))}))}))]}))}))},t.prototype.onPlayerRendered=function(t,n){var r=this;t.player=n,e.forEach((function(e){t.player.on(window.cnxel.configEvents[e],(function(i){var o,a;if(t.disableAnalytics||_({event:e,mediaId:null===(o=n.getVideoDetails())||void 0===o?void 0:o.id,playerLocation:t.component.playerType}),"Play"!==e&&"AdPlay"!==e&&"AdStarted"!==e||document.dispatchEvent(new CustomEvent("fbs-video-playing",{detail:{component:t.component}})),"CloseButtonClicked"===e&&t.player.pause(),"Play"===e&&t.floatingEnabled&&t.player.enableFloatingMode(),(null===(a=t.mediaInfo)||void 0===a?void 0:a.length)>1){var s=t.mediaInfo.findIndex((function(e){return e.id===i.id})),c=-1!==s||t.mediaInfo[s+1]?s+1:-1;"VideoCompleted100"===e&&(s===t.mediaInfo.length-1&&(l("Last video in the media list finished, pausing and un-floating."),t.player.pause(),t.player.disableFloatingMode()),r.dispatchNewThumbnailAvailable(t,c)),"VideoStarted"===e&&(t.currenMediaInfoIndex=s,r.setMediaSessionDetails(t),r.preloadThumbnail(t,c))}t.component.dispatchEvent(new Event(e,i))}))}))},t.prototype.dispose=function(e){var t;(null===(t=null==e?void 0:e.player)||void 0===t?void 0:t.destroy)&&e.player.destroy()},t.prototype.setMediaSessionDetails=function(e){var t;if("mediaSession"in navigator){var n=(null===(t=e.mediaInfo)||void 0===t?void 0:t[e.currenMediaInfoIndex])||{},r=n.title,i=n.thumbnailUrl;navigator.mediaSession.metadata=new MediaMetadata({title:r,artist:"Forbes Media",album:"Forbes.com",artwork:[{src:i}]})}},t.prototype.dispatchMediaInfoLoaded=function(e){e.component.dispatchEvent(new CustomEvent("MediaInfoLoaded",{detail:e.mediaInfo})),this.dispatchNewThumbnailAvailable(e,0)},t.prototype.dispatchNewThumbnailAvailable=function(e,t){e.mediaInfo[t].thumbnailUrl&&e.component.dispatchEvent(new CustomEvent("NewThumbnail",{detail:{thumbnailUrl:e.mediaInfo[t].thumbnailUrl}}))},t.prototype.preloadThumbnail=function(e,t){e.mediaInfo[t].thumbnailUrl&&((new Image).src=e.mediaInfo[t].thumbnailUrl)},t}(),Z="data_scheduler",J=function(){function e(){this.requestRunning=!1}return e.prototype.getGAMCampaignVideo=function(e){return void 0===e&&(e="scheduler"),t=this,n=void 0,i=function(){var t=this;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(n){return this.requestRunning?[2,Promise.reject("A request for a Campaign Video is already running!")]:(l("[scheduler] New request for a campaign video started"),[2,new Promise((function(n,r){var i;if(t.startRequest(n,r),"function"==typeof(null===(i=t.fbsAdElement)||void 0===i?void 0:i.refresh))return l("[scheduler] The AD element already exists, calling refresh..."),void t.fbsAdElement.refresh();var o=document.createElement("div");o.style.position="absolute",o.style.height="0",o.style.visibility="hidden",t.fbsAdElement=document.createElement("fbs-ad"),t.fbsAdElement.setAttribute("position",e),t.fbsAdElement.setAttribute("fire-render-on-refresh","1"),t.fbsAdElement.addEventListener("render",(function(e){l('[scheduler] Render event triggered with data "'.concat(JSON.stringify(e.detail),'"')),t.slotRenderEnded(t.fbsAdElement,e)})),o.appendChild(t.fbsAdElement),document.body.appendChild(o),l("[scheduler] Sent a request to GAM to display slot")}))])}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i},e.prototype.slotRenderEnded=function(e,t){if(e){if(this.stopRequest(),(t||{}).isEmpty)return this.throwError("GAM returned an empty AD (isEmpty)!");var n=e.querySelector("iframe");if(!n)return this.throwError("GAM returned an empty AD (no iframe in slot)!");var r=n.contentDocument.querySelector("#".concat(Z));if(!r)return this.throwError("The iframe in slot container does not contain #".concat(Z,"!"));var i=r.getAttribute("data-video-id"),o="true"===r.getAttribute("data-show-ads");l("[scheduler] Successfully returned video ".concat(i," (show ads: ").concat(o?"yes":"no",")")),this.resolveCallback({id:i,showAds:o})}},e.prototype.startRequest=function(e,t){var n=this;this.resolveCallback=e,this.rejectCallback=t,this.requestRunning=!0,this.adTimeoutTimer=setTimeout((function(){n.throwError("GAM did not respond in ".concat(2e4,"ms, aborting"))}),2e4)},e.prototype.stopRequest=function(){this.requestRunning=!1,this.adTimeoutTimer&&(clearTimeout(this.adTimeoutTimer),this.adTimeoutTimer=void 0)},e.prototype.throwError=function(e){this.stopRequest(),l("[scheduler] ".concat(e)),this.rejectCallback(e)},e}();a("Loaded"),"undefined"!=typeof window&&(window.fbsCampaignService||(window.fbsCampaignService=new J),window["fbs-video"]||(window["fbs-video"]=new K),void 0===customElements.get("fbs-video")&&customElements.define("fbs-video",D))},5910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9233);!function(e){const t=function(e){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e);const t=this;setTimeout((()=>{!0===t._options.checkOnLoad&&(!0===t._options.debug&&t._log("onload->eventCallback","A check loading is launched"),null===t._var.bait&&t._creatBait(),setTimeout((()=>{t.check()}),1))}),1)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){console.log(`[BlockAdBlock][${e}] ${t}`)},t.prototype.setOption=function(e,t){if(void 0!==t){const n=e;(e={})[n]=t}for(const t in e)this._options[t]=e[t],!0===this._options.debug&&this._log("setOption",`The option "${t}" he was assigned to "${e[t]}"`);return this},t.prototype._creatBait=function(){const t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),!0===this._options.debug&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,!0===this._options.debug&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),!0===this._options.debug&&this._log("check",`An audit was requested ${!0===e?"with a":"without"} loop`),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();const t=this;return this._var.loopNumber=0,!0===e&&(this._var.loop=setInterval((()=>{t._checkBait(e)}),this._options.loopCheckTime)),setTimeout((()=>{t._checkBait(e)}),1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){let n=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(n=!0),void 0!==e.getComputedStyle){const t=e.getComputedStyle(this._var.bait,null);!t||"none"!=t.getPropertyValue("display")&&"hidden"!=t.getPropertyValue("visibility")||(n=!0)}!0===this._options.debug&&this._log("_checkBait",`A check (${this._var.loopNumber+1}/${this._options.loopMaxNumber} ~${1+this._var.loopNumber*this._options.loopCheckTime}ms) was conducted and detection is ${!0===n?"positive":"negative"}`),!0===t&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===n?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){!0===this._options.debug&&this._log("emitEvent",`An event with a ${!0===e?"positive":"negative"} detection was called`);const t=this._var.event[!0===e?"detected":"notDetected"];for(const e in t)!0===this._options.debug&&this._log("emitEvent",`Call function ${parseInt(e)+1}/${t.length}`),t.hasOwnProperty(e)&&t[e]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[!0===e?"detected":"notDetected"].push(t),!0===this._options.debug&&this._log("on",`A type of event "${!0===e?"detected":"notDetected"}" was added`),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,void 0===e.blockAdBlock&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window),window.forbes=window.forbes||{},window.blockAdBlock.onDetected((()=>{window.dataLayer.push({adBlockerDetection:"Detected"}),window.dataLayer.push({event:"analyticsEvent","event category":"Zephr","event action":"AdBlockDetection","event label":"Detected"}),window.forbes.hasAdBlocker=!0,document.dispatchEvent(new CustomEvent("fbs-ad-block-init"))})),window.blockAdBlock.onNotDetected((()=>{window.dataLayer.push({adBlockerDetection:"Not Detected"}),window.dataLayer.push({event:"analyticsEvent","event category":"Zephr","event action":"AdBlockDetection","event label":"NotDetected"}),window.forbes.hasAdBlocker=!1,document.dispatchEvent(new CustomEvent("fbs-ad-block-init"))})),document.addEventListener("zephr.browserDecisionsFinished",(()=>{var e,t,n;"Ad Blocker Detected - Modal"===(null===(n=null===(t=null===(e=window.Zephr)||void 0===e?void 0:e.outcomes)||void 0===t?void 0:t["ad-block-detection"])||void 0===n?void 0:n.outcomeLabel)&&((0,r.showModal)("ad-block-detected"),window.dataLayer.push({event:"analyticsEvent","event category":"Zephr","event action":"AdBlockModal","event label":"Shown"}))}))},4575:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(9233),a=i(n(9783)),s=i(n(3836)),c=n(1397);t.default=e=>r(void 0,void 0,void 0,(function*(){var t,n;const{isProd:r,fvid:i,containerId:u,categoryId:l,DFPZone:d,author:h,login:f,contribType:p,templateType:m,templateSubType:y,isRetracted:g,slot:v,site:w,swimLane:b,blogType:E,edit:S,bertieBadgeSlugs:A,entitySegments:_,primaryChannel:k,primarySection:C,channelNames:P,sectionNames:I,published:T,streamPosition:O,isEurope:x,isChina:D,resourceId:M,contentPaywall:j,listProfileType:L=""}=e,N={"Paid Content":o.paidContentNameMapping[E],"Primary Channel":k,"Primary Section":C,"Channel Names":P,"Section Names":I,blog:w,fvid:i||"","Content Paywall":"true"===f?"free":j||"none"},H=null===(t=JSON.parse(window.localStorage.getItem("fpd_fuse")||"{}"))||void 0===t?void 0:t.kvs;(0,o.expandFuseValues)(H,N);let F=!1;try{F=yield(0,a.default)()}catch(e){console.error("Error validating Zette config!",e)}const R=[(yield(0,c.prepareWeb3Access)()).join(","),(yield(0,c.prepareFbsExternalAccess)()).join(",")].filter(Boolean).join(","),U=localStorage.getItem("newslettersList")||"",B=(0,s.default)({DFPZone:d,author:h,login:f,contribType:p,templateType:m,templateSubType:y,isRetracted:g,slot:v,swimLane:b,blogType:E,edit:S,bertieBadgeSlugs:A,entitySegments:_,streamPosition:O,resourceId:M,hasZetteAccess:F});return Object.assign(Object.assign(Object.assign({},N),B),{isProd:r,categoryId:l,containerId:u,published:T,isEurope:x,isChina:D,listProfileType:L,hasAdBlocker:"pref-center"!==w?null===(n=window.forbes)||void 0===n?void 0:n.hasAdBlocker:"",newslettersList:U,jwt_access:R})}))},8233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cordialInit=void 0,t.cordialInit=e=>{var t,n,r,i,o,a;t=window,n=document,r="script",i="crdl",t.CordialObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,t[i].q=[],o=n.createElement(r),a=n.getElementsByTagName(r)[0],o.async=1,o.src="//d.email.forbes.com/track.v2.js",a.parentNode.insertBefore(o,a),window.crdl("connect",!0===e?"forbes-live":"forbes",{trackUrl:"se.email.forbes.com",connectUrl:"d.email.forbes.com",cookieDomain:"email.forbes.com",cookieLife:365}),window.cordialIsProd=e,window.cordialInitialized=!0}},3650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCordialListData=void 0;const r=n(6240);t.updateCordialListData=e=>{const t={"channels.email.subscribeStatus":"subscribed"};if(t[e.newsletter]=!0,e.additionalFieldKey&&(t[e.additionalFieldKey]=e.additionalFieldValue),"US"===e.geolocation&&(t.Announcements=!0),e.lander){const e=(0,r.getParameterByName)("utm_source",window.location.search),n=(0,r.getParameterByName)("utm_medium",window.location.search),i=(0,r.getParameterByName)("utm_campaign",window.location.search);t.sourcearray=[`{${e}}-{${n}}-{${i}}`]}((e,t)=>{window.crdl("contact",{email:e.userEmailInput?e.userEmailInput:window.Zephr.user.email},t,{forceSubscribe:{email:!0},upsert:!0})})(e,t);let n=e.newsletter;e.outcomeLabel&&(n=`${e.newsletter} | ${e.outcomeLabel}`);let i=e.lander?"Zephr":"Editorial Newsletters";e.trackingDomain&&(i=e.trackingDomain),window.dataLayer.push({event:"analyticsEvent","event category":i,"event action":n,"event label":e.lander?"Successful Sign up":"Successful Submit",onboardingStep:""}),((e,t,n,i)=>{if(!e&&!t&&!n)return;const o=(e={})=>{if(t||(null==e?void 0:e.cID)){(0,r.handleLocalStorage)("cID",t||e.cID);const i=[],o=localStorage.getItem("newslettersList")||"";o&&!o.includes(n)?(i.push(n),(0,r.handleLocalStorage)("newslettersList",i.join(","))):o||(i.push(n),(0,r.handleLocalStorage)("newslettersList",i.join(",")))}};t?o():fetch(`https://${!0===i?"":"staging-"}account.forbes.com/api-data/get-cordial-data?email=${e}`,{credentials:"include"}).then((e=>{e.json().then((e=>{o(e)}))})).catch((e=>{console.error("Error getting cordial data: ",e)}))})(e.userEmailInput?e.userEmailInput:window.Zephr.user.email,e.cID,e.newsletter,window.cordialIsProd)}},1868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executionDetails=t.flaggedTriggerArrays=t.winnerInfo=t.site=t.exitIntentMobileActions=t.exitIntentRightActions=t.exitIntentLeftActions=t.exitIntentBottomActions=t.exitIntentTopActions=t.actionQueue=t.scrollPercentageActions=t.timeDelayActions=t.immediatelyActions=t.timeoutIds=t.errorTracker=t.boundListeners=void 0;const r=n(6240);t.boundListeners=[],t.errorTracker=[],t.timeoutIds=[],t.immediatelyActions=[],t.timeDelayActions=[],t.scrollPercentageActions=[],t.actionQueue=[],t.exitIntentTopActions=[],t.exitIntentBottomActions=[],t.exitIntentLeftActions=[],t.exitIntentRightActions=[],t.exitIntentMobileActions=[];const i=(0,r.getSite)();t.site=i,t.flaggedTriggerArrays=[],t.executionDetails=[],t.winnerInfo={winner:{},winReason:"",hasShown:!1}},459:(e,t,n)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.exclusiveActions=t.doCandidateSelection=void 0;const o=n(903),a=n(1868);let s=!1;const c=e=>{console.error(e),a.errorTracker.push(e)},u=e=>{var t;const n=window.Zephr.utils.exclusiveActions.winnerInfo;if(0===n.winner.priority)return void(n.hasShown=!0);const r=(null===(t=e.exclusiveActionElement.parentElement)||void 0===t?void 0:t.children)||[],i=Array.from(r);let o=!1;i.forEach((e=>{e.show&&(e.show(),o=!0)})),o||c({errorMessage:"No configured show action on exclusive action winner:",winner:e}),n.hasShown=!0};t.doCandidateSelection=(e,t)=>{if(!s)return void a.flaggedTriggerArrays.push({flaggedTriggerArray:e,trigger:t});const n=window.Zephr.utils.exclusiveActions.actionQueue,r=window.Zephr.utils.exclusiveActions.winnerInfo,i=(e=>{const t=e.filter((e=>{var t;const n=(null===(t=e.exclusiveActionElement.parentElement)||void 0===t?void 0:t.children)||[];return Array.from(n).some((e=>"excluded"===e.getAttribute("exclusive-action-mode")))}));return t})(e),o=n.filter((e=>i.indexOf(e)<0)),c=e.filter((e=>i.indexOf(e)<0));0!==c.length&&0!==o.length?Object.keys(r.winner).length>0?!r.hasShown&&c.includes(r.winner)&&u(r.winner):(r.winner=((e,t)=>{let n=!1;const r=window.Zephr.utils.exclusiveActions.winnerInfo;t.sort(((e,t)=>(e.priority===t.priority&&(n=!0),e.priority-t.priority)));let i=t[0];if(n){const n=[],o=[];if(t.forEach((t=>{t.priority===i.priority&&(n.push(t),e.includes(t)&&o.push(t))})),1===o.length)return i=o[0],r.winReason="trigger",i;if(o.length>1){const e=Math.floor(Math.random()*o.length);return i=o[e],r.winReason="random",r.randomNumber=e,r.randomNumberCeiling=o.length,i}const a=Math.floor(Math.random()*n.length);return i=n[a],r.winReason="random",r.randomNumber=a,r.randomNumberCeiling=n.length,i}return r.winReason="priority",i})(c,o),a.executionDetails.push({trigger:t,consideredActions:Array.from(o),excludedActions:i,winner:r.winner,winReason:r.winReason}),c.includes(r.winner)&&u(r.winner)):a.executionDetails.push({trigger:t,nonExcludedRelevantActions:Array.from(c),excludedActions:i,message:"No remaining actions in queue after excluding all self excluded elements."})},setTimeout((()=>{s=!0,a.flaggedTriggerArrays.forEach((e=>{(0,t.doCandidateSelection)(e.flaggedTriggerArray,e.trigger)}))}),100);if(null===(i=null===(r=null===window||void 0===window?void 0:window.forbes)||void 0===r?void 0:r[a.site])||void 0===i?void 0:i.isMobile){let e,n,r=window.scrollY;window.addEventListener("scroll",(0,o.throttle)((()=>{e=window.scrollY,n-e<0&&r<e?r=e:a.exitIntentMobileActions.length>0&&n-e>0&&r>500&&(0,t.doCandidateSelection)(a.exitIntentMobileActions,"exit intent mobile"),n=e}),100,null))}document.addEventListener("mouseleave",(e=>{e.clientY<=0&&a.exitIntentTopActions.length>0&&(0,t.doCandidateSelection)(a.exitIntentTopActions,"exit intent top"),e.clientY>=window.innerHeight&&a.exitIntentBottomActions.length>0&&(0,t.doCandidateSelection)(a.exitIntentBottomActions,"exit intent top"),e.clientX<=0&&a.exitIntentLeftActions.length>0&&(0,t.doCandidateSelection)(a.exitIntentLeftActions,"exit intent top"),e.clientX>=window.innerWidth&&a.exitIntentRightActions.length>0&&(0,t.doCandidateSelection)(a.exitIntentRightActions,"exit intent right")})),t.exclusiveActions={register:(e,n,r)=>{const i=((e,t)=>{const{immediately:n,exitIntentTop:r,exitIntentRight:i,exitIntentLeft:o,exitIntentBottom:a,exitIntentMobile:s,scrollPercentage:u,timeDelay:l,never:d}=e,h={immediately:n,exitIntentTop:r,exitIntentRight:i,exitIntentLeft:o,exitIntentBottom:a,exitIntentMobile:s,never:d},f=((e,t)=>{if(!e||""===e)return 0;e=e.replace("%","");const n=parseFloat(e);return n>100||n<1||Number.isNaN(n)?(c({errorMessage:`Invalid scroll percentage value of ${e} detected on exclusive action script element:`,exclusiveActionElement:t}),-1):n/100})(u,t),p=((e,t)=>{var n,r;if(!e||""===e)return 0;let i,o,a,s;switch(!0){case/^\s*\d+\s*s$/i.test(e):e.replace("s",""),i=parseInt(e,10);break;case/^(\d+\s*minutes?)?(\s*\d+\s*seconds?)?$/i.test(e):o=(null===(n=e.match(/(\d+)\s*minute?/i))||void 0===n?void 0:n[1])||"",a=(null===(r=e.match(/(\d+)\s*second?/i))||void 0===r?void 0:r[1])||"",i=(60*parseInt(o,10)||0)+(parseInt(a,10)||0);break;case/:/.test(e):s=e.split(":"),o=s[0],a=s[1],i=60*parseInt(o,10)+parseInt(a,10);break;default:return c({errorMessage:`Invalid time delay value of ${e} detected on exclusive action script element:`,exclusiveActionElement:t}),-1}return i*=1e3,i})(l,t),m=(e=>{const t={immediately:!1,exitIntentTop:!1,exitIntentRight:!1,exitIntentLeft:!1,exitIntentBottom:!1,exitIntentMobile:!1,never:!1};return e.forEach((([e,n])=>{t[e]=/true/gi.test(n)})),t})(Object.entries(h));return m.never=-1===p||-1===f||m.never,Object.assign(Object.assign({},m),{scrollPercentage:f,timeDelay:p})})(n,e);if(i.never)return void c({errorMessage:"Trigger option 'never' set to true on exclusive action script.  Excluding action from queue.",exclusiveActionElement:e});if(!(e=>Object.values(e).some((e=>!!e)))(i))return void c({errorMessage:"Exclusive action script has no defined trigger options.  Excluding action from queue.",exclusiveActionElement:e});const o=((e,t,n)=>{let r=parseInt(e,10);return(Number.isNaN(r)||parseFloat(e)%1!=0||r<(n?0:1)||r>2147483646)&&(c({errorMessage:`Invalid priority value of ${e} provided on exclusive action script`,exclusiveActionElement:t}),r=2147483646),r})(r,e,n.checkoutHarness),s={exclusiveActionElement:e,triggerOptions:i,priority:o};a.actionQueue.push(s),(e=>{const{timeDelay:n,immediately:r,scrollPercentage:i,exitIntentBottom:o,exitIntentLeft:s,exitIntentRight:c,exitIntentTop:u,exitIntentMobile:l}=e.triggerOptions;if(n>0){const r=window.setTimeout((()=>{a.timeDelayActions.push(e),(0,t.doCandidateSelection)(a.timeDelayActions,"time delay")}),n);a.timeoutIds.push(r)}r&&(a.immediatelyActions.push(e),(0,t.doCandidateSelection)(a.immediatelyActions,"immediately")),i>0&&a.scrollPercentageActions.push(e),u&&a.exitIntentTopActions.push(e),o&&a.exitIntentBottomActions.push(e),s&&a.exitIntentLeftActions.push(e),c&&a.exitIntentRightActions.push(e),l&&a.exitIntentMobileActions.push(e)})(s)},refreshExclusiveActionValues:()=>{a.boundListeners.forEach((e=>{e.elem.removeEventListener(e.event,e.callback,!0)})),a.boundListeners.length=0,a.timeoutIds.forEach((e=>{clearTimeout(e)})),a.timeoutIds.length=0,(()=>{let e;const n=[],r=document.querySelector(".current-page")?document.querySelector(".current-page"):document.body,i=(null==r?void 0:r.offsetTop)||0,s=(null==r?void 0:r.scrollHeight)||1;var c,u,l;c=window,u="scroll",l=(0,o.throttle)((()=>{e=(window.scrollY-i)/s,window.Zephr.utils.exclusiveActions.scrollPercentageActions.forEach((t=>{const{scrollPercentage:r}=t.triggerOptions;e>r&&n.push(t)})),n.length>0&&(0,t.doCandidateSelection)(n,"scroll percentage")}),100,null),c&&(a.boundListeners.push({elem:c,event:u,callback:l}),c.addEventListener(u,l,!0))})(),a.actionQueue.length=0,a.errorTracker.length=0,a.scrollPercentageActions.length=0,a.exitIntentTopActions.length=0,a.exitIntentBottomActions.length=0,a.exitIntentLeftActions.length=0,a.exitIntentRightActions.length=0,a.exitIntentMobileActions.length=0,a.executionDetails.length=0,a.winnerInfo.winner={},a.winnerInfo.winReason="",a.winnerInfo.hasShown=!1,delete a.winnerInfo.randomNumber,delete a.winnerInfo.randomNumberCeiling},actionQueue:a.actionQueue,errorTracker:a.errorTracker,scrollPercentageActions:a.scrollPercentageActions,winnerInfo:a.winnerInfo,executionDetails:a.executionDetails}},3836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9233);t.default=({DFPZone:e="none",author:t="none",login:n="false",contribType:i="none",templateType:o="none",templateSubType:a="none",isRetracted:s,slot:c="none",swimLane:u,blogType:l,edit:d,bertieBadgeSlugs:h,entitySegments:f,streamPosition:p,resourceId:m,hasZetteAccess:y})=>{const g={},v="article-d"===e.substring(0,9)?"article":e;return g.pageType=v,g.author=t,"string"==typeof m&&""!==m&&(g.resourceId=m),"true"===n&&(g.bertie_user=!0,g.login=!0),g.contribType=i,"article"===v&&(g.template=o,g.templateSubType=a,g.streamIndex=p,"finds"===o?g.shopping=!0:"advisor"===o?g.advisor=!0:"live"===o&&(g.live=!0),s&&(g.retracted=!0),"true"===(0,r.cd11IsSponsored)(u,c)&&(g.sponsored_content=!0),l&&r.paidContentNameMapping[l]&&(g.paid_content=!0),d&&d.split(",").forEach((e=>{g[`edit:${e}`]=!0})),h&&"none"!==h&&h.split(",").forEach((e=>{g[`badge:${e}`]=!0})),f&&"none"!==f&&f.split(",").forEach((e=>{g[`es:${e}`]=!0}))),y&&(g.zette_access=!0),g}},4664:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.updateCordialListData=t.getZephrAccessCookie=t.doesUserHaveProductByCookie=t.doesUserHaveProduct=t.shouldShowListProfile=t.shouldHideForbesServices=t.createZephrModalContainer=t.hideModal=t.showModal=t.hideLogin=t.showLogin=t.logout=void 0,i(n(3594),t);var o=n(9233);Object.defineProperty(t,"logout",{enumerable:!0,get:function(){return o.logout}}),Object.defineProperty(t,"showLogin",{enumerable:!0,get:function(){return o.showLogin}}),Object.defineProperty(t,"hideLogin",{enumerable:!0,get:function(){return o.hideLogin}}),Object.defineProperty(t,"showModal",{enumerable:!0,get:function(){return o.showModal}}),Object.defineProperty(t,"hideModal",{enumerable:!0,get:function(){return o.hideModal}}),Object.defineProperty(t,"createZephrModalContainer",{enumerable:!0,get:function(){return o.createZephrModalContainer}}),Object.defineProperty(t,"shouldHideForbesServices",{enumerable:!0,get:function(){return o.shouldHideForbesServices}}),Object.defineProperty(t,"shouldShowListProfile",{enumerable:!0,get:function(){return o.shouldShowListProfile}}),Object.defineProperty(t,"doesUserHaveProduct",{enumerable:!0,get:function(){return o.doesUserHaveProduct}}),Object.defineProperty(t,"doesUserHaveProductByCookie",{enumerable:!0,get:function(){return o.doesUserHaveProductByCookie}}),Object.defineProperty(t,"getZephrAccessCookie",{enumerable:!0,get:function(){return o.getZephrAccessCookie}});var a=n(3650);Object.defineProperty(t,"updateCordialListData",{enumerable:!0,get:function(){return a.updateCordialListData}}),i(n(7993),t),i(n(8624),t),i(n(8134),t),i(n(6645),t)},1397:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.prepareFbsExternalAccess=t.prepareWeb3Access=t.getActiveGrants=t.publicKeyByTokenName=void 0;const o=i(n(7860));t.publicKeyByTokenName={fbs_web3:"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0Wye5E0i4x/C1Y6XN0pg\nTQgVeQcsIEOzQFCwZv77GNO+VWpx9KbAm1QIpjB/Y67+uEjVRHf24xCGlEd3Cee6\nbiif4kSVdr9o+wGp/qVHIpLaUDZTDGzDCLoEFYsagUYVYEjropFiMxm9QFPTmgfa\ny/eV0OVSjnmEHCb5FdS9EvCmrxgZZ8VhZ8KL5/Icch2R+CLJ9HqAmfq2ix2juotz\ntBaAi2loVPSIE61E9HwEZ2GumpnnZS6TNDKV/0P0DmzV+bbMQXM28NT0BXF/YM4x\nbO45yCJ7en5dRNa6Ql/AGZbKNTzXCSl4KuZpJpU7SjASeidQ6y4xfR50dD03J3Xu\ngwIDAQAB\n-----END PUBLIC KEY-----",fbs_external:"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAtMC4gTyc5uebgcIh4/hs\niCmV5nz9y+jGogUBpY+0ZI1niQeEqdx6G5xiiwrSC+UUuJG9xO429Ot4ZlXkEedc\ngtn7y9nqUzRCGZ0Zw594LUgu/c5WOwv7TNXEaH4wdmbXeD1RQtb5MJshdSEDVGrv\n+mSaTKT1EJBEcC4X5gyteoCQP+/tn7PoViVzLexnKg8a+zDMKHwtV4KjsHjtfBAx\ncpu8ypbZ148PJkIx8tmjAUuf8kA7EziJxUCWDhaV2bilWLphB/9dvHdgcGYd9yn8\nJMN08JV1Mr0uZuqY6EucMVlVaEVBKWJ+Z1cM8L/jmXmyTjjgkNyzp4UZJ9+B8JIL\nMQIDAQAB\n-----END PUBLIC KEY-----"};t.getActiveGrants=(e=[])=>e.reduce(((e,t)=>(Date.now()<t.expiration_date&&e.push(t.grant_id.toUpperCase()),e)),[]);const a=(e="")=>r(void 0,void 0,void 0,(function*(){const n=((e="")=>{const t=window.localStorage.getItem(e)||"";return t&&((e,t)=>{const n=new Date(+new Date+31536e6).toUTCString();document.cookie=`${e}=${t}; path=/; domain=.forbes.com; expires=${n}`})(e,t),t})(e);return n?((e="",n="")=>r(void 0,void 0,void 0,(function*(){const r=yield(0,o.default)(n,t.publicKeyByTokenName[e]);return r.error?[]:(0,t.getActiveGrants)(r.grants)})))(e,n):[]}));t.prepareWeb3Access=()=>r(void 0,void 0,void 0,(function*(){return a("fbs_web3")})),t.prepareFbsExternalAccess=()=>r(void 0,void 0,void 0,(function*(){return a("fbs_external")}))},8134:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlimitedSubscriptionBundleProducts=t.zephrProductBundle=void 0,t.zephrProductBundle={BRVYR1EZ:["FIN_FDI","FIN_FIV","R8W03AS"],BUN_FBI_MEM:["FIN_FBI","R8W03AS"],FIN_FDI_FPR:["FIN_FDI","FIN_FPR"],BUN_WB:["FIN_FDI","FIN_FIV"],BUN_FIN_CRY_UA:["FIN_CRY","R8W03AS"],BUN_FIN_UIB:["FIN_FPR","FIN_FDI","FIN_FIS","R8W03AS"],BUN_FIN_FIV_UA:["FIN_FIV","R8W03AS"],FIN_FEI:["FIN_FBP","FIN_CRY","FIN_FDI","FIN_FFI","FIN_FIV","FIN_FPR","FIN_QNT","FIN_REI","FIN_FIS","FIN_LEH","FIN_GIS","FIN_GTF","FIN_IRI","FIN_IQT","FIN_NLM","FIN_NFX","FIN_SHO","FIN_SSS","FIN_OPS"]},t.unlimitedSubscriptionBundleProducts=["BRVYR1EZ","BUN_FBI_MEM","BUN_FIN_CRY_UA","BUN_FIN_UIB","BUN_FIN_FIV_UA"]},8624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.premiumPaywallProducts=t.clientSubscriptionProducts=t.unlimitedSubscriptionProducts=t.zephrProducts=void 0,t.zephrProducts={unlimitedSubscription:"R8W03AS",clientUnlimitedAccess:"R3PNAHU",unlimitedAccessForEmployees:"RSKL92C",unlimitedAccessForExecutiveComps:"RZZFK7H",stageProfileAdmin:"RXR0D16",prodProfileAdmin:"RO8HSE9",advisorUnlimitedAccess:"RA6L55F",unlimitedAccessForInternational:"RKPEVDB",unlimitedAccessForTopAdvisorDirectory:"R0EQIX2",marketplace:"MARKETPLACE",press2020:"PRESS2020",vendors2020:"VENDORS2020",wealthAdvisorResource:"RCL934Y",unlimitedAccessForAdvisorEmployee:"R880NB6",unlimitedAccessForFSBT:"RVEX5N5",unlimitedAccessForFTC:"RETBQ1H",unlimitedAccessForCEF:"RXCC3NS",unlimitedAccessForAKMR:"RKA20OK",unlimitedAccessForIL:"RZYU584",unlimitedAccessForScaleUp:"BRYEYOUU",unlimitedAccessForSchools:"RNQLU4R",unlimitedAccessForForbesLive:"RWOFY78",unlimitedAccessForCorporate:"RYBR1SC"},t.unlimitedSubscriptionProducts=[t.zephrProducts.unlimitedSubscription,t.zephrProducts.unlimitedAccessForInternational],t.clientSubscriptionProducts=[t.zephrProducts.clientUnlimitedAccess,t.zephrProducts.advisorUnlimitedAccess],t.premiumPaywallProducts=Object.values(t.zephrProducts)},6645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveArticleProducts=void 0;const r=n(8624),i=n(8134);t.saveArticleProducts=[r.zephrProducts.unlimitedAccessForExecutiveComps,r.zephrProducts.unlimitedAccessForAdvisorEmployee,r.zephrProducts.advisorUnlimitedAccess,r.zephrProducts.unlimitedAccessForFSBT,r.zephrProducts.unlimitedAccessForFTC,r.zephrProducts.unlimitedAccessForCEF,r.zephrProducts.unlimitedAccessForAKMR,r.zephrProducts.unlimitedAccessForIL,r.zephrProducts.clientUnlimitedAccess,r.zephrProducts.unlimitedAccessForEmployees,r.zephrProducts.marketplace,r.zephrProducts.vendors2020,r.zephrProducts.unlimitedSubscription,r.zephrProducts.unlimitedAccessForInternational,...i.unlimitedSubscriptionBundleProducts],t.default=t.saveArticleProducts},2821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".zephr-modal-open{overflow:hidden;height:auto}.zephr-backdrop{display:none;background-color:#333;position:fixed;opacity:.9;top:0;bottom:0;left:0;right:0;z-index:1001}.zephr-generic-modal{display:none;position:fixed;top:56px;bottom:0;left:0;right:0;z-index:1002;overflow:hidden}.zephr-close-wrapper{position:relative;text-align:right;height:0;width:100%;margin-bottom:-30px}.zephr-close-btn{position:absolute;top:-10px;right:0;width:30px;height:30px;background:#fff url(\"data:image/svg+xml,%3Csvg width='20' height='20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.51 7.208l-.706-.708-2.798 2.798L7.207 6.5l-.707.707 2.798 2.799L6.503 12.8l.707.707 2.796-2.795 2.792 2.792.707-.707-2.792-2.792 2.798-2.798z' fill='%23000' fill-opacity='.4'/%3E%3C/svg%3E\") center center no-repeat;border:none;box-shadow:0 0 10px rgba(28,37,68,.15);outline:none;border-radius:50%}.zephr-modal-content{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:normal;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}.zephr-modal-content>*{max-width:600px}"},7860:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(9588);t.default=function(e,t){return r(this,void 0,void 0,(function*(){if(!e||!t)return{error:!0};try{const n=yield(e=>r(void 0,void 0,void 0,(function*(){return window.crypto.subtle.importKey("spki",(e=>{const t=e.substring(26,e.length-24);return(e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);return Array.from(e).forEach(((t,r)=>{n[r]=e.charCodeAt(r)})),t})(window.atob(t))})(e),{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!1,["verify"])})))(t);return(yield(0,i.jwtVerify)(e,n)).payload}catch(e){return console.error("An error occurred while trying to validate token!",e.message),{error:!0}}}))}},6240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSite=t.handleLocalStorage=t.getParameterByName=void 0,t.getParameterByName=(e,t)=>{const n=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp(`[\\?&]${n}=([^&#]*)`).exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},t.handleLocalStorage=(e,t)=>{try{localStorage.setItem(e,t)}catch(e){console.error(e)}},t.getSite=()=>{var e,t,n;let r="unknown";return(null===(e=null===window||void 0===window?void 0:window.forbes)||void 0===e?void 0:e.preferences)?r="preferences":(null===(t=null===window||void 0===window?void 0:window.forbes)||void 0===t?void 0:t["simple-site"])?r="simple-site":(null===(n=null===window||void 0===window?void 0:window.forbes)||void 0===n?void 0:n["digital-assets"])&&(r="digital-assets"),r}},7993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.productMaps=void 0;const r=n(8624),i=n(6645),o=n(8134);t.productMaps={unlimitedSubscriptionProducts:r.unlimitedSubscriptionProducts,clientSubscriptionProducts:r.clientSubscriptionProducts,premiumPaywallProducts:r.premiumPaywallProducts,unlimitedSubscriptionBundleProducts:o.unlimitedSubscriptionBundleProducts,saveArticleProducts:i.saveArticleProducts,bundles:o.zephrProductBundle},window.Zephr=window.Zephr||{},window.Zephr.utils=window.Zephr.utils||{},window.Zephr.utils=Object.assign(Object.assign({},window.Zephr.utils),{productMaps:t.productMaps})},3594:function(e,t,n){"use strict";var r,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.zephrRun=void 0;const a=n(7948),s=o(n(4575)),c=n(9233),u=n(8233),l=o(n(2821));n(5910);const d=n(459);if(!window.zephrInit){window.zephrInit=!0;const e=document.createElement("style");e.innerHTML=l.default,null===(r=document.querySelector("head"))||void 0===r||r.appendChild(e),(0,c.createZephrModalContainer)("sign-in"),(0,c.createZephrModalContainer)("ad-block-detected",!1),(0,c.createZephrModalContainer)("editorial-newsletter",!0),(0,c.createZephrModalContainer)("fin-free-report",!0),(0,c.getUserData)(),document.addEventListener("zephr.browserDecisionsFinished",(()=>{var e,t,n,r,i;const o=(null===(t=null===(e=window.Zephr)||void 0===e?void 0:e.accessDetails)||void 0===t?void 0:t.authenticated)||!1,a=(null===(r=null===(n=window.Zephr)||void 0===n?void 0:n.accessDetails)||void 0===r?void 0:r.activeProducts)||[];(0,c.updateAccessCookie)(o,a),null===(i=window.Blaize)||void 0===i||i.registerFormPostProcessor("*",((e,t)=>{"Registration successful"===t.message&&(0,c.updateAccessCookie)(!0)}))}))}t.zephrRun=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield(0,s.default)(t);window.cordialInitialized||(0,u.cordialInit)(t.isProd),d.exclusiveActions.refreshExclusiveActionValues(),window.forbes=window.forbes||{},window.forbes.lastCustomData=n,(0,a.run)({cdnApi:e,customData:n})}))},9233:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createZephrModalContainer=t.doesUserHaveProduct=t.doesUserHaveProductByCookie=t.checkUserProductAccess=t.shouldShowListProfile=t.shouldHideForbesServices=t.getZephrAccessCookie=t.callDataLayerUpdate=t.getUserData=t.logout=t.hideLogin=t.hideModal=t.showLogin=t.showModal=t.updateAccessCookie=t.cd11IsSponsored=t.paidContentNameMapping=t.expandFuseValues=void 0;const i=n(903),o=n(3650),a=n(8134),s=n(459),c="fbs-zephr-access",u=e=>{var t;window.registrationCallbackQueue=null===(t=window.registrationCallbackQueue)||void 0===t?void 0:t.filter((t=>t.key!==e))},l=e=>{var t;window.loginCallbackQueue=null===(t=window.loginCallbackQueue)||void 0===t?void 0:t.filter((t=>t.key!==e))};t.expandFuseValues=(e,t)=>{for(const n in e)if("object"==typeof e[n])Object.entries(e[n]).forEach((e=>{const r=e[0],i=e[1].split(",");"fbs-rp"!==n&&i.forEach((e=>{t[`${n}:${r}:${e}`]=!0}))}));else{const r=(String(e[n])||"").split(",");r.length>1&&"fbs-rp"!==n?r.forEach((e=>{t[`${n}:${e}`]=!0})):"fbs-rp"!==n&&(t[n]=e[n])}},t.paidContentNameMapping={ad:"brandvoice",insights:"insights",author:"authorvoice",connoisseur:"connoisseur",marketplace:"marketplace",comm:"communityvoice"},t.cd11IsSponsored=(e,t="none")=>t&&"none"!==t||e&&"none"!==e?"true":"false",t.updateAccessCookie=(e=!1,t=[])=>{const n=e?new Date(+new Date+63072e6).toUTCString():"Thu, 01 Jan 1970 00:00:01 GMT",r=t.reduce(((e,t)=>`${e},${t}`),e?"logged-in":"");document.cookie=`${c}=${r}; path=/; domain=.forbes.com; expires=${n}`},t.showModal=e=>{const t=document.querySelector("body"),n=document.querySelector("html"),r=null==t?void 0:t.classList.contains(`zephr-${e}-modal-open`);null==t||t.classList.add("zephr-modal-open",`zephr-${e}-modal-open`),null==n||n.classList.add("zephr-modal-open"),r||document.dispatchEvent(new CustomEvent("fbs-zephr-modal-opened",{detail:{modalId:e}}))},t.showLogin=(e="General")=>{window.registerSource=e,(0,t.showModal)("sign-in")},t.hideModal=e=>{const t=document.querySelector("body"),n=document.querySelector("html"),r=!(null==t?void 0:t.classList.contains(`zephr-${e}-modal-open`));null==t||t.classList.remove(`zephr-${e}-modal-open`);let i=!0;null==t||t.classList.forEach((e=>{"zephr-modal-open"!==e&&e.startsWith("zephr-")&&e.endsWith("-modal-open")&&(i=!1)})),i&&(null==t||t.classList.remove("zephr-modal-open"),null==n||n.classList.remove("zephr-modal-open")),u(e),l(e),r||document.dispatchEvent(new CustomEvent("fbs-zephr-modal-closed",{detail:{modalId:e}}))},t.hideLogin=()=>(0,t.hideModal)("sign-in"),t.logout=e=>{fetch("/blaize/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({where:"JUST_HERE"})}).then((e=>e.json())).then((()=>{if(delete window.Zephr.user,window.fbsCordial)try{window.fbsCordial.forget()}catch(e){console.error("Error forgetting Cordial user",e)}(0,t.updateAccessCookie)(),"function"==typeof e?e():window.location.reload()})).catch((e=>{console.log("Error logging out!",e)}))},t.getUserData=(e=!0)=>r(void 0,void 0,void 0,(function*(){return Promise.all([r(void 0,void 0,void 0,(function*(){var e;const t=yield fetch("/blaize/account"),n=yield t.json(),r=null===(e=null==n?void 0:n.identifiers)||void 0===e?void 0:e.email_address,i=null==n?void 0:n.tracking_id;window.Zephr=window.Zephr||{},i&&(window.Zephr.user=window.Zephr.user||{},window.Zephr.user=Object.assign(Object.assign({},window.Zephr.user),{email:r,"tracking-id":i}),window.dataLayer.push({event:"analyticsEvent","event category":"Zephr trackingID","event action":"Page Loaded","event label":i}))})),r(void 0,void 0,void 0,(function*(){const e=yield fetch("/blaize/profile"),t=yield e.json();window.Zephr=window.Zephr||{},(null==t?void 0:t.status)||(window.Zephr.user=window.Zephr.user||{},window.Zephr.user=Object.assign(Object.assign({},window.Zephr.user),t))}))]).then((()=>{window.Zephr=window.Zephr||{},window.Zephr.user||(window.Zephr.error=!0),e&&document.dispatchEvent(new CustomEvent("fbs-zephr-init",{detail:window.Zephr}))})).catch((()=>{console.log("Error fetching Zephr user information!"),window.Zephr=window.Zephr||{},window.Zephr.error=!0,e&&document.dispatchEvent(new CustomEvent("fbs-zephr-init",{detail:window.Zephr}))}))})),t.callDataLayerUpdate=()=>r(void 0,void 0,void 0,(function*(){const e=[];return window.Zephr.error&&(delete window.Zephr.error,e.push((0,t.getUserData)(!1))),e.push(fetch("/blaize/datalayer").then((e=>e.json())).then((e=>{var n,r;const i=(null===(n=e.dataLayer)||void 0===n?void 0:n.loggedin)||!1,o=(null===(r=e.dataLayer)||void 0===r?void 0:r["active-products"])||[];return window.Zephr.accessDetails=window.Zephr.accessDetails||{},window.Zephr.accessDetails.activeProducts=o,(0,t.updateAccessCookie)(i,o),e.dataLayer})).catch((e=>{console.error("Error fetching Zephr dataLayer update!",e)}))),Promise.all(e)})),t.getZephrAccessCookie=()=>(0,i.getCookieValue)(document.cookie,c),t.shouldHideForbesServices=()=>{var e,t;return"yes"===(null===(t=null===(e=window.Zephr)||void 0===e?void 0:e.user)||void 0===t?void 0:t["hide-forbes-services"])},t.shouldShowListProfile=()=>{var e,t;return"yes"===(null===(t=null===(e=window.Zephr)||void 0===e?void 0:e.user)||void 0===t?void 0:t["has-list-profile"])},t.checkUserProductAccess=(e=[],t=[])=>{let n=!1;return e.forEach((e=>{n=n||t.includes(e)})),n=n||Object.values(a.zephrProductBundle).some((n=>n.some((n=>e.includes(n)&&t.includes(n))))),n},t.doesUserHaveProductByCookie=(e=[])=>(0,t.checkUserProductAccess)(e,(()=>{const e=(0,t.getZephrAccessCookie)();return e?e.split(","):[]})()),t.doesUserHaveProduct=(e=[])=>{return(0,t.checkUserProductAccess)(e,(null===(r=null===(n=window.Zephr)||void 0===n?void 0:n.accessDetails)||void 0===r?void 0:r.activeProducts)||[]);var n,r},t.createZephrModalContainer=(e,n=!0)=>{var r,i,o;const a=document.createElement("style");a.innerHTML=`\n    .zephr-modal-open.zephr-${e}-modal-open .zephr-${e}-modal,\n    .zephr-modal-open.zephr-${e}-modal-open .zephr-${e}-backdrop {\n      display: block;\n    }`,null===(r=document.querySelector("head"))||void 0===r||r.appendChild(a);const s=document.createElement("div");s.classList.add(`zephr-${e}-backdrop`,"zephr-backdrop");const c=document.createElement("div");c.classList.add(`zephr-${e}-modal`,"zephr-generic-modal");const u=document.createElement("div");u.classList.add("zephr-modal-content");const l=document.createElement("div");if(l.classList.add(`zephr-${e}-modal-content-hook`),n){const n=document.createElement("div");n.classList.add("zephr-close-wrapper");const r=document.createElement("button");let i;r.classList.add("zephr-close-btn"),r.setAttribute("aria-label","Close"),r.type="button",r.addEventListener("click",(()=>(0,t.hideModal)(e))),n.appendChild(r),u.appendChild(n),u.addEventListener("pointerdown",(e=>{i=e.target})),u.addEventListener("pointerup",(n=>n.target===i&&n.target===u&&(0,t.hideModal)(e))),s.addEventListener("click",(()=>(0,t.hideModal)(e)))}else c.classList.add("no-close");u.appendChild(l),c.appendChild(u),null===(i=document.querySelector("body"))||void 0===i||i.appendChild(s),null===(o=document.querySelector("body"))||void 0===o||o.appendChild(c)},window.Zephr=window.Zephr||{},window.Zephr.utils=window.Zephr.utils||{},window.Zephr.utils=Object.assign(Object.assign({},window.Zephr.utils),{callDataLayerUpdate:t.callDataLayerUpdate,shouldHideForbesServices:t.shouldHideForbesServices,shouldShowListProfile:t.shouldShowListProfile,doesUserHaveProduct:t.doesUserHaveProduct,doesUserHaveProductByCookie:t.doesUserHaveProductByCookie,getZephrAccessCookie:t.getZephrAccessCookie,showLogin:t.showLogin,hideLogin:t.hideLogin,logout:t.logout,showModal:t.showModal,createZephrModalContainer:t.createZephrModalContainer,updateCordialListData:o.updateCordialListData,saveExtendedProfile:(e,t)=>r(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`/blaize/profile/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});return yield n.json()}catch(e){return console.log("An error occurred while saving extended profile",e),{error:!0}}})),fetchExtendedProfile:e=>r(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`/blaize/profile/${e}`,{headers:{Accept:"application/json"}});return yield t.json()}catch(e){return console.log("An error occurred while fetching extended profile",e),{error:!0}}})),appendToRegistrationQueue:(e,t="no-key")=>{window.registrationCallbackQueue=window.registrationCallbackQueue||[],window.registrationCallbackQueue.push({callback:e,key:t})},removeFromRegistrationQueue:u,appendToLoginQueue:(e,t="no-key")=>{window.loginCallbackQueue=window.loginCallbackQueue||[],window.loginCallbackQueue.push({callback:e,key:t})},removeFromLoginQueue:l,exclusiveActions:s.exclusiveActions})},9783:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(7860));t.default=()=>r(void 0,void 0,void 0,(function*(){const e=window.localStorage.getItem("zette_article_ids");if(!e)return!1;const t=yield(0,o.default)(e,"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2T/hRqZx4fKl0AhQxXVU\n/2fgrPjtWP2H0U9HoNfVHep5wkBQ6c4gl2rjSDy4C9/fjbCQKmvI9RBvUU66m8oB\nF6va6BNZxU92x9l8hO9AwWhs6lQk9i58Q1F+RcKsIhDqvsqAKgRwG635kRmKCt/w\nBzHpFi6bd0SAX+4wN+2fOXMk+U6DXBGgHhhtQDDy/A+eLuk5EAK6rrCS6KQHRAWC\nFCibonAStNwnif4h0oEHIm4gzjqm7X22ceuFLBCObcBO0nFyRluSXh7aq4dk0RAh\nKCTLQ1kupzuD2UyVw8Wo4k7R8Ob2QYtSDfQRE6wiRl/TM9dj7/nxJUm2rtGOVzBE\nhQIDAQAB\n-----END PUBLIC KEY-----");return!t.error&&!!t[window.forbes["simple-site"].articleId]}))},3976:()=>{"use strict";var e,t=function(){function e(){}return e.isCroppedImage=function(e){return e.includes("cropX1")&&e.includes("cropX2")&&e.includes("cropY1")&&e.includes("cropY2")},e.getFastlyCrop=function(e){var t=this.getParameterByName("cropX1",e),n=this.getParameterByName("cropX2",e),r=this.getParameterByName("cropY1",e),i=this.getParameterByName("cropY2",e);return"crop="+(parseInt(n)-parseInt(t))+","+(parseInt(i)-parseInt(r))+",x"+t+",y"+r+",safe"},e.getOriginalImage=function(e){var t=e.split("/");return t[t.length-1]=t[t.length-1].replace(/[0-9]+x[0-9]+/,"0x0"),t.join("/")},e.isImagePNG=function(e){return void 0===e&&(e=""),/(\.png)($|\?)/.test(e)},e.isImageGIF=function(e){return void 0===e&&(e=""),/(\.gif)($|\?)/.test(e)},e.httpsUrl=function(e){return(e||"").replace(/^http:/,"https:")},e.normalizeImageDomain=function(t,n){return(t=t||"").startsWith("//")?"https:"+t:t.startsWith("/")?"https://"+(n?"damapi-stagevip.forbes.com":"blogs-images.forbes.com")+t:e.httpsUrl(t)},e.getFastlyVirtualPath=function(e){var t=e.replace(/^https?:\/\//,"");for(var n in this.fastlyVirtualPathMapping)if(t.startsWith(n))return[n,this.fastlyVirtualPathMapping[n]]},e.getParameterByName=function(e,t){void 0===t&&(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},e.updateQueryStringParameter=function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n},e.adjustExistingFastlyUrl=function(e,t){var n=e,r=this.getParameterByName("width",e);if(null!==r){var i=parseInt(r)*t;n=this.updateQueryStringParameter(n,"width",i)}var o=this.getParameterByName("height",e);if(null!==o){var a=parseInt(o)*t;n=this.updateQueryStringParameter(n,"height",a)}return n},e.prependFastly=function(e,t,n,r,i){if(void 0===e&&(e=""),void 0===i&&(i=!1),(e||"").indexOf("imageio")>-1)return this.adjustExistingFastlyUrl(e,n);if((e||"").indexOf("gravatar")>-1)return e;var o=this.isCroppedImage(e),a=this.normalizeImageDomain(e,r);if(!this.isOnImageOptimizationWhitelist(a,r))return a;if(!this.getFastlyVirtualPath(a))return e;var s=this.getFastlyVirtualPath(a),c=s[0],u=s[1],l=a.replace("https://"+c+"/","");l.includes("?")&&(l=l.split("?")[0]);var d="https://"+(r?"imageio-staging.forbes.com":"imageio.forbes.com")+"/"+u+"/"+l+"?format="+(this.isImagePNG(a)?"png":this.isImageGIF(a)?"gif":"jpg");return o&&(d+="&"+this.getFastlyCrop(e),d=this.getOriginalImage(d)),t&&(1!==n&&i&&(d+="&"+this.fastlyLowQualityParams,n=1),d+="&width="+t*n),d},e.isOnImageOptimizationWhitelist=function(e,t){return!!(t?this.stagingImageOptimizationWhitelist:this.imageOptimizationWhitelist).find((function(t){return e.indexOf(t)>-1}))},e.fastlyQuality=5,e.fastlyBlur=10,e.fastlyLowQualityParams="quality="+e.fastlyQuality+"&blur="+e.fastlyBlur+"\n\t&auto=webp&optimize=high",e.imageOptimizationWhitelist=["specials-images.forbes.com","specials-images.forbesimg.com","i.forbesimg.com","b-i.forbesimg.com","images.forbes.com","blogs-images.forbes.com"],e.stagingImageOptimizationWhitelist=["damapi-stagevip.forbes.com"],e.fastlyVirtualPathMapping={"specials-images.forbes.com":"specials-images","specials-images-staging.forbes.com":"specials-images-staging","specials-images.forbesimg.com":"specials-images","specials-images-staging.forbesimg.com":"specials-images-staging","damapi-stagevip.forbes.com":"damapi-stagevip","staging.damapi.forbes.com":"staging-damapi","blogs-stage.forbes.com":"blogs-stage","i.forbesimg.com":"i-forbesimg","images.forbes.com":"images-forbes","b-i.forbesimg.com":"b-i-forbesimg","blogs-images.forbes.com":"blogs-images","www-staging.forbes.com":"www-staging","forbes.com/dam":"dam","www.forbes.com/dam":"dam","cf-images.us-east-1.prod.boltdns.net":"cf-images"},e}(),n=(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r="low",i=function(e){function i(){var t=e.call(this)||this;return t.removePlaceholderEventListener=t.removePlaceholder.bind(t),t.imageEnhancedEventListener=t.imageEnhanced.bind(t),t.handleImageErrorEventListener=t.handleImageError.bind(t),t.imgTag=document.createElement("img"),t.imgTag.style.display="none",t}return n(i,e),Object.defineProperty(i,"observedAttributes",{get:function(){return["src","background-image","width","enhanced","alt","fastly-optimize"]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"src",{get:function(){return this.getAttribute("src")},set:function(e){this.setAttribute("src",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"backgroundImage",{get:function(){return this.getAttribute("background-image")},set:function(e){this.setAttribute("background-image",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fastlyOptimize",{get:function(){return this.hasAttribute("fastly-optimize")&&"false"!==this.getAttribute("fastly-optimize")},set:function(e){e?this.setAttribute("fastly-optimize",""):this.removeAttribute("fastly-optimize")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return parseInt(this.getAttribute("width"))||1440},set:function(e){this.setAttribute("width",""+e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alt",{get:function(){return this.getAttribute("alt")},set:function(e){this.setAttribute("alt",e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enhanced",{get:function(){return this.hasAttribute("enhanced")&&"false"!==this.getAttribute("enhanced")},set:function(e){e?this.setAttribute("enhanced",""):this.removeAttribute("enhanced")},enumerable:!0,configurable:!0}),i.prototype.connectedCallback=function(){this.init()},i.prototype.attributeChangedCallback=function(e,n,i){if(i!==n)switch(e){case"src":case"background-image":if(i.indexOf(".gif")>-1)return this.isGif=!0,this.highResSrc=i,void this.enhanceImage();var o=!1===((window.forbes||{})["simple-site"]||{}).isProd;this.lowResSrc=t.prependFastly(i,this.width,.1,o,this.fastlyOptimize),this.highResSrc=t.prependFastly(i,this.width,1,o,this.fastlyOptimize),this.shouldEnhanceImage()?this.enhanceImage():(this.currentQualityLoaded=r,this.imgTag.src=this.lowResSrc);break;case"alt":this.imgTag.alt=i||""}},i.prototype.registerScrollHandler=function(){var e=this;document.addEventListener("scroll",function(e){var t,n,r=this;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=r||{},s=+new Date;t&&s<t+100?(clearTimeout(n),n=setTimeout((function(){t=s,a.deferred=!0,e.apply(a,i)}),100+s+1-t)):(t=s,e.apply(a,i))}}((function(){e.shouldEnhanceImage()&&!e.enhanced&&e.enhanceImage()})))},i.prototype.shouldEnhanceImage=function(){return this.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop<=window.innerHeight+window.pageYOffset},i.prototype.enhanceImage=function(){this.currentQualityLoaded="high",this.imgTag.src=this.highResSrc,this.imgTag.addEventListener("load",this.imageEnhancedEventListener),this.isGif&&this.classList.add("initial-width")},i.prototype.imageEnhanced=function(){this.backgroundImage&&(this.style.backgroundImage="url("+this.highResSrc+")"),this.enhanced=!0,this.imgTag.removeEventListener("load",this.imageEnhancedEventListener)},i.prototype.removePlaceholder=function(){this.backgroundImage||(this.imgTag.style.display="block"),this.classList.add("show-img"),this.imgTag.removeEventListener("load",this.removePlaceholderEventListener),this.shouldEnhanceImage()&&this.enhanceImage()},i.prototype.handleImageError=function(){this.currentQualityLoaded!==r||this.lowResFailed?!this.lowResFailed&&this.lowResSrc?(this.currentQualityLoaded=r,this.imgTag.src=this.lowResSrc,this.enhanced=!0):this.enhanced=!0:(this.lowResFailed=!0,this.enhanceImage())},i.prototype.init=function(){this.imgTag.alt=this.alt||"",this.imgTag.addEventListener("load",this.removePlaceholderEventListener),this.imgTag.addEventListener("error",this.handleImageErrorEventListener),this.backgroundImage||this.appendChild(this.imgTag),this.enhanced||this.registerScrollHandler()},i}(HTMLElement);customElements.define("progressive-image",i)},7698:()=>{"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}()},7948:function(e,t,n){!function(e){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function r(e){var t={exports:{}};return e(t,t.exports),t.exports}var i=function(e){return e&&e.Math==Math&&e},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")(),a=function(e){try{return!!e()}catch(e){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l={f:u&&!c.call({1:2},1)?function(e){var t=u(this,e);return!!t&&t.enumerable}:c},d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,f=function(e){return h.call(e).slice(8,-1)},p="".split,m=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==f(e)?p.call(e,""):Object(e)}:Object,y=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return m(y(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},w=function(e,t){if(!v(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!v(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,E=function(e,t){return b.call(e,t)},S=o.document,A=v(S)&&v(S.createElement),_=function(e){return A?S.createElement(e):{}},k=!s&&!a((function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a})),C=Object.getOwnPropertyDescriptor,P={f:s?C:function(e,t){if(e=g(e),t=w(t,!0),k)try{return C(e,t)}catch(e){}if(E(e,t))return d(!l.f.call(e,t),e[t])}},I=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},T=Object.defineProperty,O={f:s?T:function(e,t,n){if(I(e),t=w(t,!0),I(n),k)try{return T(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},x=s?function(e,t,n){return O.f(e,t,d(1,n))}:function(e,t,n){return e[t]=n,e},D=function(e,t){try{x(o,e,t)}catch(n){o[e]=t}return t},M="__core-js_shared__",j=o[M]||D(M,{}),L=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(e){return L.call(e)});var N,H,F,R=j.inspectSource,U=o.WeakMap,B="function"==typeof U&&/native code/.test(R(U)),z=r((function(e){(e.exports=function(e,t){return j[e]||(j[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})})),V=0,W=Math.random(),K=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++V+W).toString(36)},Z=z("keys"),J=function(e){return Z[e]||(Z[e]=K(e))},$={};if(B){var q=j.state||(j.state=new(0,o.WeakMap)),G=q.get,Y=q.has,Q=q.set;N=function(e,t){return t.facade=e,Q.call(q,e,t),t},H=function(e){return G.call(q,e)||{}},F=function(e){return Y.call(q,e)}}else{var X=J("state");$[X]=!0,N=function(e,t){return t.facade=e,x(e,X,t),t},H=function(e){return E(e,X)?e[X]:{}},F=function(e){return E(e,X)}}var ee,te,ne={set:N,get:H,has:F,enforce:function(e){return F(e)?H(e):N(e,{})},getterFor:function(e){return function(t){var n;if(!v(t)||(n=H(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},re=r((function(e){var t=ne.get,n=ne.enforce,r=String(String).split("String");(e.exports=function(e,t,i,a){var s,c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||E(i,"name")||x(i,"name",t),(s=n(i)).source||(s.source=r.join("string"==typeof t?t:""))),e!==o?(c?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=i:x(e,t,i)):u?e[t]=i:D(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||R(this)}))})),ie=o,oe=function(e){return"function"==typeof e?e:void 0},ae=function(e,t){return arguments.length<2?oe(ie[e])||oe(o[e]):ie[e]&&ie[e][t]||o[e]&&o[e][t]},se=Math.ceil,ce=Math.floor,ue=function(e){return isNaN(e=+e)?0:(e>0?ce:se)(e)},le=Math.min,de=function(e){return e>0?le(ue(e),9007199254740991):0},he=Math.max,fe=Math.min,pe=function(e,t){var n=ue(e);return n<0?he(n+t,0):fe(n,t)},me=function(e){return function(t,n,r){var i,o=g(t),a=de(o.length),s=pe(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},ye={includes:me(!0),indexOf:me(!1)},ge=ye.indexOf,ve=function(e,t){var n,r=g(e),i=0,o=[];for(n in r)!E($,n)&&E(r,n)&&o.push(n);for(;t.length>i;)E(r,n=t[i++])&&(~ge(o,n)||o.push(n));return o},we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=we.concat("length","prototype"),Ee={f:Object.getOwnPropertyNames||function(e){return ve(e,be)}},Se={f:Object.getOwnPropertySymbols},Ae=ae("Reflect","ownKeys")||function(e){var t=Ee.f(I(e)),n=Se.f;return n?t.concat(n(e)):t},_e=function(e,t){for(var n=Ae(t),r=O.f,i=P.f,o=0;o<n.length;o++){var a=n[o];E(e,a)||r(e,a,i(t,a))}},ke=/#|\.prototype\./,Ce=function(e,t){var n=Ie[Pe(e)];return n==Oe||n!=Te&&("function"==typeof t?a(t):!!t)},Pe=Ce.normalize=function(e){return String(e).replace(ke,".").toLowerCase()},Ie=Ce.data={},Te=Ce.NATIVE="N",Oe=Ce.POLYFILL="P",xe=Ce,De=P.f,Me=function(e,t){var n,r,i,a,s,c=e.target,u=e.global,l=e.stat;if(n=u?o:l?o[c]||D(c,{}):(o[c]||{}).prototype)for(r in t){if(a=t[r],i=e.noTargetGet?(s=De(n,r))&&s.value:n[r],!xe(u?r:c+(l?".":"#")+r,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;_e(a,i)}(e.sham||i&&i.sham)&&x(a,"sham",!0),re(n,r,a,e)}},je=Array.isArray||function(e){return"Array"==f(e)},Le=function(e,t,n){var r=w(t);r in e?O.f(e,r,d(0,n)):e[r]=n},Ne="process"==f(o.process),He=ae("navigator","userAgent")||"",Fe=o.process,Re=Fe&&Fe.versions,Ue=Re&&Re.v8;Ue?te=(ee=Ue.split("."))[0]+ee[1]:He&&(!(ee=He.match(/Edge\/(\d+)/))||ee[1]>=74)&&(ee=He.match(/Chrome\/(\d+)/))&&(te=ee[1]);var Be=te&&+te,ze=!!Object.getOwnPropertySymbols&&!a((function(){return!Symbol.sham&&(Ne?38===Be:Be>37&&Be<41)})),Ve=ze&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,We=z("wks"),Ke=o.Symbol,Ze=Ve?Ke:Ke&&Ke.withoutSetter||K,Je=function(e){return E(We,e)&&(ze||"string"==typeof We[e])||(We[e]=ze&&E(Ke,e)?Ke[e]:Ze("Symbol."+e)),We[e]},$e=Je("species"),qe=function(e){return Be>=51||!a((function(){var t=[];return(t.constructor={})[$e]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ge=qe("slice"),Ye=Je("species"),Qe=[].slice,Xe=Math.max;Me({target:"Array",proto:!0,forced:!Ge},{slice:function(e,t){var n,r,i,o=g(this),a=de(o.length),s=pe(e,a),c=pe(void 0===t?a:t,a);if(je(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!je(n.prototype)?v(n)&&null===(n=n[Ye])&&(n=void 0):n=void 0,n===Array||void 0===n))return Qe.call(o,s,c);for(r=new(void 0===n?Array:n)(Xe(c-s,0)),i=0;s<c;s++,i++)s in o&&Le(r,i,o[s]);return r.length=i,r}});var et={};et[Je("toStringTag")]="z";var tt="[object z]"===String(et),nt=Je("toStringTag"),rt="Arguments"==f(function(){return arguments}()),it=tt?f:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),nt))?n:rt?f(t):"Object"==(r=f(t))&&"function"==typeof t.callee?"Arguments":r};tt||re(Object.prototype,"toString",tt?{}.toString:function(){return"[object "+it(this)+"]"},{unsafe:!0});var ot=o.Promise,at=O.f,st=Je("toStringTag"),ct=function(e,t,n){e&&!E(e=n?e:e.prototype,st)&&at(e,st,{configurable:!0,value:t})},ut=Je("species"),lt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},dt={},ht=Je("iterator"),ft=Array.prototype,pt=function(e){return void 0!==e&&(dt.Array===e||ft[ht]===e)},mt=function(e,t,n){if(lt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},yt=Je("iterator"),gt=function(e){if(null!=e)return e[yt]||e["@@iterator"]||dt[it(e)]},vt=function(e){var t=e.return;if(void 0!==t)return I(t.call(e)).value},wt=function(e,t){this.stopped=e,this.result=t},bt=function(e,t,n){var r,i,o,a,s,c,u,l=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),f=mt(t,n&&n.that,1+l+h),p=function(e){return r&&vt(r),new wt(!0,e)},m=function(e){return l?(I(e),h?f(e[0],e[1],p):f(e[0],e[1])):h?f(e,p):f(e)};if(d)r=e;else{if("function"!=typeof(i=gt(e)))throw TypeError("Target is not iterable");if(pt(i)){for(o=0,a=de(e.length);a>o;o++)if((s=m(e[o]))&&s instanceof wt)return s;return new wt(!1)}r=i.call(e)}for(c=r.next;!(u=c.call(r)).done;){try{s=m(u.value)}catch(e){throw vt(r),e}if("object"==typeof s&&s&&s instanceof wt)return s}return new wt(!1)},Et=Je("iterator"),St=!1;try{var At=0,_t={next:function(){return{done:!!At++}},return:function(){St=!0}};_t[Et]=function(){return this},Array.from(_t,(function(){throw 2}))}catch(e){}var kt,Ct,Pt,It=function(e,t){if(!t&&!St)return!1;var n=!1;try{var r={};r[Et]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Tt=Je("species"),Ot=function(e,t){var n,r=I(e).constructor;return void 0===r||null==(n=I(r)[Tt])?t:lt(n)},xt=ae("document","documentElement"),Dt=/(iphone|ipod|ipad).*applewebkit/i.test(He),Mt=o.location,jt=o.setImmediate,Lt=o.clearImmediate,Nt=o.process,Ht=o.MessageChannel,Ft=o.Dispatch,Rt=0,Ut={},Bt=function(e){if(Ut.hasOwnProperty(e)){var t=Ut[e];delete Ut[e],t()}},zt=function(e){return function(){Bt(e)}},Vt=function(e){Bt(e.data)},Wt=function(e){o.postMessage(e+"",Mt.protocol+"//"+Mt.host)};jt&&Lt||(jt=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Ut[++Rt]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},kt(Rt),Rt},Lt=function(e){delete Ut[e]},Ne?kt=function(e){Nt.nextTick(zt(e))}:Ft&&Ft.now?kt=function(e){Ft.now(zt(e))}:Ht&&!Dt?(Pt=(Ct=new Ht).port2,Ct.port1.onmessage=Vt,kt=mt(Pt.postMessage,Pt,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&Mt&&"file:"!==Mt.protocol&&!a(Wt)?(kt=Wt,o.addEventListener("message",Vt,!1)):kt="onreadystatechange"in _("script")?function(e){xt.appendChild(_("script")).onreadystatechange=function(){xt.removeChild(this),Bt(e)}}:function(e){setTimeout(zt(e),0)});var Kt,Zt,Jt,$t,qt,Gt,Yt,Qt,Xt={set:jt,clear:Lt},en=/web0s(?!.*chrome)/i.test(He),tn=Xt.set,nn=o.MutationObserver||o.WebKitMutationObserver,rn=o.document,on=o.process,an=o.Promise,sn=(0,P.f)(o,"queueMicrotask"),cn=sn&&sn.value;cn||(Kt=function(){var e,t;for(Ne&&(e=on.domain)&&e.exit();Zt;){t=Zt.fn,Zt=Zt.next;try{t()}catch(e){throw Zt?$t():Jt=void 0,e}}Jt=void 0,e&&e.enter()},Dt||Ne||en||!nn||!rn?an&&an.resolve?(Yt=an.resolve(void 0),Qt=Yt.then,$t=function(){Qt.call(Yt,Kt)}):$t=Ne?function(){on.nextTick(Kt)}:function(){tn.call(o,Kt)}:(qt=!0,Gt=rn.createTextNode(""),new nn(Kt).observe(Gt,{characterData:!0}),$t=function(){Gt.data=qt=!qt}));var un,ln,dn,hn,fn,pn=cn||function(e){var t={fn:e,next:void 0};Jt&&(Jt.next=t),Zt||(Zt=t,$t()),Jt=t},mn=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=lt(t),this.reject=lt(n)},yn={f:function(e){return new mn(e)}},gn=function(e,t){if(I(e),v(t)&&t.constructor===e)return t;var n=yn.f(e);return(0,n.resolve)(t),n.promise},vn=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},wn=Xt.set,bn=Je("species"),En="Promise",Sn=ne.get,An=ne.set,_n=ne.getterFor(En),kn=ot,Cn=o.TypeError,Pn=o.document,In=o.process,Tn=ae("fetch"),On=yn.f,xn=On,Dn=!!(Pn&&Pn.createEvent&&o.dispatchEvent),Mn="function"==typeof PromiseRejectionEvent,jn="unhandledrejection",Ln=xe(En,(function(){if(R(kn)===String(kn)){if(66===Be)return!0;if(!Ne&&!Mn)return!0}if(Be>=51&&/native code/.test(kn))return!1;var e=kn.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[bn]=t,!(e.then((function(){}))instanceof t)})),Nn=Ln||!It((function(e){kn.all(e).catch((function(){}))})),Hn=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},Fn=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;pn((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,d=u.resolve,h=u.reject,f=u.domain;try{l?(i||(2===e.rejection&&zn(e),e.rejection=1),!0===l?a=r:(f&&f.enter(),a=l(r),f&&(f.exit(),c=!0)),a===u.promise?h(Cn("Promise-chain cycle")):(s=Hn(a))?s.call(a,d,h):d(a)):h(r)}catch(e){f&&!c&&f.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Un(e)}))}},Rn=function(e,t,n){var r,i;Dn?((r=Pn.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),o.dispatchEvent(r)):r={promise:t,reason:n},!Mn&&(i=o["on"+e])?i(r):e===jn&&function(e,t){var n=o.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Un=function(e){wn.call(o,(function(){var t,n=e.facade,r=e.value;if(Bn(e)&&(t=vn((function(){Ne?In.emit("unhandledRejection",r,n):Rn(jn,n,r)})),e.rejection=Ne||Bn(e)?2:1,t.error))throw t.value}))},Bn=function(e){return 1!==e.rejection&&!e.parent},zn=function(e){wn.call(o,(function(){var t=e.facade;Ne?In.emit("rejectionHandled",t):Rn("rejectionhandled",t,e.value)}))},Vn=function(e,t,n){return function(r){e(t,r,n)}},Wn=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Fn(e,!0))},Kn=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Cn("Promise can't be resolved itself");var r=Hn(t);r?pn((function(){var n={done:!1};try{r.call(t,Vn(Kn,n,e),Vn(Wn,n,e))}catch(t){Wn(n,t,e)}})):(e.value=t,e.state=1,Fn(e,!1))}catch(t){Wn({done:!1},t,e)}}};function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Ln&&(kn=function(e){!function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect Promise invocation")}(this,kn),lt(e),un.call(this);var t=Sn(this);try{e(Vn(Kn,t),Vn(Wn,t))}catch(e){Wn(t,e)}},(un=function(e){An(this,{type:En,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var r in t)re(e,r,t[r],void 0);return e}(kn.prototype,{then:function(e,t){var n=_n(this),r=On(Ot(this,kn));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Ne?In.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Fn(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),ln=function(){var e=new un,t=Sn(e);this.promise=e,this.resolve=Vn(Kn,t),this.reject=Vn(Wn,t)},yn.f=On=function(e){return e===kn||e===dn?new ln(e):xn(e)},"function"==typeof ot&&(hn=ot.prototype.then,re(ot.prototype,"then",(function(e,t){var n=this;return new kn((function(e,t){hn.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Tn&&Me({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return gn(kn,Tn.apply(o,arguments))}}))),Me({global:!0,wrap:!0,forced:Ln},{Promise:kn}),ct(kn,En,!1),fn=ae(En),s&&fn&&!fn[ut]&&(0,O.f)(fn,ut,{configurable:!0,get:function(){return this}}),dn=ae(En),Me({target:En,stat:!0,forced:Ln},{reject:function(e){var t=On(this);return t.reject.call(void 0,e),t.promise}}),Me({target:En,stat:!0,forced:Ln},{resolve:function(e){return gn(this,e)}}),Me({target:En,stat:!0,forced:Nn},{all:function(e){var t=this,n=On(t),r=n.resolve,i=n.reject,o=vn((function(){var n=lt(t.resolve),o=[],a=0,s=1;bt(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=On(t),r=n.reject,i=vn((function(){var i=lt(t.resolve);bt(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var $n=function(e){return Object(y(e))},qn=Je("species"),Gn=function(e,t){var n;return je(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!je(n.prototype)?v(n)&&null===(n=n[qn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Yn=[].push,Qn=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var h,f,p=$n(c),y=m(p),g=mt(u,l,3),v=de(y.length),w=0,b=d||Gn,E=t?b(c,v):n||a?b(c,0):void 0;v>w;w++)if((s||w in y)&&(f=g(h=y[w],w,p),e))if(t)E[w]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:Yn.call(E,h)}else switch(e){case 4:return!1;case 7:Yn.call(E,h)}return o?-1:r||i?i:E}},Xn={forEach:Qn(0),map:Qn(1),filter:Qn(2),some:Qn(3),every:Qn(4),find:Qn(5),findIndex:Qn(6),filterOut:Qn(7)},er=Xn.map;Me({target:"Array",proto:!0,forced:!qe("map")},{map:function(e){return er(this,e,arguments.length>1?arguments[1]:void 0)}});var tr=Object.keys||function(e){return ve(e,we)},nr=Object.assign,rr=Object.defineProperty,ir=!nr||a((function(){if(s&&1!==nr({b:1},nr(rr({},"a",{enumerable:!0,get:function(){rr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=nr({},e)[n]||tr(nr({},t)).join("")!=r}))?function(e,t){for(var n=$n(e),r=arguments.length,i=1,o=Se.f,a=l.f;r>i;)for(var c,u=m(arguments[i++]),d=o?tr(u).concat(o(u)):tr(u),h=d.length,f=0;h>f;)c=d[f++],s&&!a.call(u,c)||(n[c]=u[c]);return n}:nr;Me({target:"Object",stat:!0,forced:Object.assign!==ir},{assign:ir});var or=function(){var e=I(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function ar(e,t){return RegExp(e,t)}var sr,cr,ur={UNSUPPORTED_Y:a((function(){var e=ar("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:a((function(){var e=ar("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},lr=RegExp.prototype.exec,dr=String.prototype.replace,hr=lr,fr=(cr=/b*/g,lr.call(sr=/a/,"a"),lr.call(cr,"a"),0!==sr.lastIndex||0!==cr.lastIndex),pr=ur.UNSUPPORTED_Y||ur.BROKEN_CARET,mr=void 0!==/()??/.exec("")[1];(fr||mr||pr)&&(hr=function(e){var t,n,r,i,o=this,a=pr&&o.sticky,s=or.call(o),c=o.source,u=0,l=e;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,u++),n=new RegExp("^(?:"+c+")",s)),mr&&(n=new RegExp("^"+c+"$(?!\\s)",s)),fr&&(t=o.lastIndex),r=lr.call(a?n:o,l),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:fr&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),mr&&r&&r.length>1&&dr.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var yr=hr;Me({target:"RegExp",proto:!0,forced:/./.exec!==yr},{exec:yr});var gr=Je("species"),vr=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),wr="$0"==="a".replace(/./,"$0"),br=Je("replace"),Er=!!/./[br]&&""===/./[br]("a","$0"),Sr=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Ar=function(e,t,n,r){var i=Je(e),o=!a((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),s=o&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[gr]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!s||"replace"===e&&(!vr||!wr||Er)||"split"===e&&!Sr){var c=/./[i],u=n(i,""[e],(function(e,t,n,r,i){return t.exec===yr?o&&!i?{done:!0,value:c.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:wr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Er}),l=u[1];re(String.prototype,e,u[0]),re(RegExp.prototype,i,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}r&&x(RegExp.prototype[i],"sham",!0)},_r=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},kr=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==f(e))throw TypeError("RegExp#exec called on incompatible receiver");return yr.call(e,t)};Ar("search",1,(function(e,t,n){return[function(t){var n=y(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=I(e),o=String(this),a=i.lastIndex;_r(a,0)||(i.lastIndex=0);var s=kr(i,o);return _r(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Cr=l.f,Pr=function(e){return function(t){for(var n,r=g(t),i=tr(r),o=i.length,a=0,c=[];o>a;)n=i[a++],s&&!Cr.call(r,n)||c.push(e?[n,r[n]]:r[n]);return c}},Ir=[Pr(!0),Pr(!1)][0];Me({target:"Object",stat:!0},{entries:function(e){return Ir(e)}});var Tr=Xn.filter;Me({target:"Array",proto:!0,forced:!qe("filter")},{filter:function(e){return Tr(this,e,arguments.length>1?arguments[1]:void 0)}}),self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],a=[],s={},c=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),a.push([t,n]),s[t]=s[t]?s[t]+","+n:n})),n(c())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)}))});var Or,xr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return I(n),function(e){if(!v(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Dr=s?Object.defineProperties:function(e,t){I(e);for(var n,r=tr(t),i=r.length,o=0;i>o;)O.f(e,n=r[o++],t[n]);return e},Mr=J("IE_PROTO"),jr=function(){},Lr=function(e){return"<script>"+e+"<\/script>"},Nr=function(){try{Or=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Nr=Or?function(e){e.write(Lr("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Or):((t=_("iframe")).style.display="none",xt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Lr("document.F=Object")),e.close(),e.F);for(var n=we.length;n--;)delete Nr.prototype[we[n]];return Nr()};$[Mr]=!0;var Hr=Object.create||function(e,t){var n;return null!==e?(jr.prototype=I(e),n=new jr,jr.prototype=null,n[Mr]=e):n=Nr(),void 0===t?n:Dr(n,t)},Fr="\t\n\v\f\r \u2028\u2029\ufeff",Rr="["+Fr+"]",Ur=RegExp("^"+Rr+Rr+"*"),Br=RegExp(Rr+Rr+"*$"),zr=function(e){return function(t){var n=String(y(t));return 1&e&&(n=n.replace(Ur,"")),2&e&&(n=n.replace(Br,"")),n}},Vr={start:zr(1),end:zr(2),trim:zr(3)},Wr=Ee.f,Kr=P.f,Zr=O.f,Jr=Vr.trim,$r="Number",qr=o.Number,Gr=qr.prototype,Yr=f(Hr(Gr))==$r,Qr=function(e){var t,n,r,i,o,a,s,c,u=w(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=Jr(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(xe($r,!qr(" 0o1")||!qr("0b1")||qr("+0x1"))){for(var Xr,ei=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof ei&&(Yr?a((function(){Gr.valueOf.call(n)})):f(n)!=$r)?function(e,t,n){var r,i;return xr&&"function"==typeof(r=t.constructor)&&r!==n&&v(i=r.prototype)&&i!==n.prototype&&xr(e,i),e}(new qr(Qr(t)),n,ei):Qr(t)},ti=s?Wr(qr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),ni=0;ti.length>ni;ni++)E(qr,Xr=ti[ni])&&!E(ei,Xr)&&Zr(ei,Xr,Kr(qr,Xr));ei.prototype=Gr,Gr.constructor=ei,re(o,$r,ei)}var ri=Vr.trim;Me({target:"String",proto:!0,forced:a((function(){return!!Fr.trim()||""!="".trim()||"trim"!==Fr.trim.name}))},{trim:function(){return ri(this)}});var ii=function(e,t,n,r,i,o,a,s){for(var c,u=i,l=0,d=!!a&&mt(a,s,3);l<r;){if(l in n){if(c=d?d(n[l],l,t):n[l],o>0&&je(c))u=ii(e,t,c,de(c.length),u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[u]=c}u++}l++}return u},oi=ii;Me({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=$n(this),n=de(t.length),r=Gn(t,0);return r.length=oi(r,t,t,n,0,void 0===e?1:ue(e)),r}});var ai=Je("unscopables"),si=Array.prototype;null==si[ai]&&O.f(si,ai,{configurable:!0,value:Hr(null)});var ci=function(e){si[ai][e]=!0};ci("flat");var ui={transform:{concat:function(e){return e.map((function(e){return di(e)}))},zoned:function(e){return{type:"Zone",id:e.zoneId,contents:e.transformations.map((function(e){return di(e)}))}},form:function(e){return{type:"Form",formId:e}},paymentForm:function(e){return{type:"PaymentForm",formId:e}},resource:function(e){return{type:"UIComponent",componentId:e}},parameterisedResource:function(e){return{type:"UIComponent",componentId:e}},url:function(e){return{type:"HostedUIComponent",url:e}},componentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},parameterisedComponentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},truncate:function(e){return{type:"Truncate",truncateLength:Number(e),style:"nostyle"}},truncateWithStyle:function(e,t){return{type:"Truncate",truncateLength:Number(e),style:t}},outcomeTracker:function(e,t,n,r){return{type:"OutcomeTracker",featureId:e,featureLabel:t,outcomeId:n,outcomeLabel:r}},remove:function(){return{type:"Remove"}}}},li={type:"LeavePristine"},di=function(e){var t=e.trim().length?e:"blaize.transform.remove()";return new Function("blaize,leave_pristine",'"use strict";return ('+t+");")(ui,li)},hi=function(e){return[di(e)].flat()},fi=Je("match"),pi=function(e){var t;return v(e)&&(void 0!==(t=e[fi])?!!t:"RegExp"==f(e))},mi=function(e){return function(t,n){var r,i,o=String(y(t)),a=ue(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},yi={codeAt:mi(!1),charAt:mi(!0)},gi=yi.charAt,vi=function(e,t,n){return t+(n?gi(e,t).length:1)},wi=[].push,bi=Math.min,Ei=4294967295,Si=!a((function(){return!RegExp(Ei,"y")}));Ar("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(y(this)),i=void 0===n?Ei:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!pi(e))return t.call(r,e,i);for(var o,a,s,c=[],u=0,l=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(o=yr.call(l,r))&&!((a=l.lastIndex)>u&&(c.push(r.slice(u,o.index)),o.length>1&&o.index<r.length&&wi.apply(c,o.slice(1)),s=o[0].length,u=a,c.length>=i));)l.lastIndex===o.index&&l.lastIndex++;return u===r.length?!s&&l.test("")||c.push(""):c.push(r.slice(u)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=y(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var a=I(e),s=String(this),c=Ot(a,RegExp),u=a.unicode,l=new c(Si?a:"^(?:"+a.source+")",(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Si?"y":"g")),d=void 0===i?Ei:i>>>0;if(0===d)return[];if(0===s.length)return null===kr(l,s)?[s]:[];for(var h=0,f=0,p=[];f<s.length;){l.lastIndex=Si?f:0;var m,y=kr(l,Si?s:s.slice(f));if(null===y||(m=bi(de(l.lastIndex+(Si?0:f)),s.length))===h)f=vi(s,f,u);else{if(p.push(s.slice(h,f)),p.length===d)return p;for(var g=1;g<=y.length-1;g++)if(p.push(y[g]),p.length===d)return p;f=h=m}}return p.push(s.slice(h)),p}]}),!Si);var Ai=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))},_i=Math.min,ki=[].lastIndexOf,Ci=!!ki&&1/[1].lastIndexOf(1,-0)<0,Pi=Ai("lastIndexOf"),Ii=Ci||!Pi?function(e){if(Ci)return ki.apply(this,arguments)||0;var t=g(this),n=de(t.length),r=n-1;for(arguments.length>1&&(r=_i(r,ue(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:ki;Me({target:"Array",proto:!0,forced:Ii!==[].lastIndexOf},{lastIndexOf:Ii});var Ti=ye.includes;Me({target:"Array",proto:!0},{includes:function(e){return Ti(this,e,arguments.length>1?arguments[1]:void 0)}}),ci("includes");var Oi=Je("match");Me({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./".includes(t)}catch(e){try{return t[Oi]=!1,"/./".includes(t)}catch(e){}}return!1}()},{includes:function(e){return!!~String(y(this)).indexOf(function(e){if(pi(e))throw TypeError("The method doesn't accept regular expressions");return e}(e),arguments.length>1?arguments[1]:void 0)}});var xi=Je("isConcatSpreadable"),Di=9007199254740991,Mi="Maximum allowed index exceeded",ji=Be>=51||!a((function(){var e=[];return e[xi]=!1,e.concat()[0]!==e})),Li=qe("concat"),Ni=function(e){if(!v(e))return!1;var t=e[xi];return void 0!==t?!!t:je(e)};Me({target:"Array",proto:!0,forced:!ji||!Li},{concat:function(e){var t,n,r,i,o,a=$n(this),s=Gn(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Ni(o=-1===t?a:arguments[t])){if(c+(i=de(o.length))>Di)throw TypeError(Mi);for(n=0;n<i;n++,c++)n in o&&Le(s,c,o[n])}else{if(c>=Di)throw TypeError(Mi);Le(s,c++,o)}return s.length=c,s}});var Hi=function(e,t,n,r){try{return r?t(I(n)[0],n[1]):t(n)}catch(t){throw vt(e),t}};Me({target:"Array",stat:!0,forced:!It((function(e){Array.from(e)}))},{from:function(e){var t,n,r,i,o,a,s=$n(e),c="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,d=void 0!==l,h=gt(s),f=0;if(d&&(l=mt(l,u>2?arguments[2]:void 0,2)),null==h||c==Array&&pt(h))for(n=new c(t=de(s.length));t>f;f++)a=d?l(s[f],f):s[f],Le(n,f,a);else for(o=(i=h.call(s)).next,n=new c;!(r=o.call(i)).done;f++)a=d?Hi(i,l,[r.value,f],!0):r.value,Le(n,f,a);return n.length=f,n}});var Fi,Ri,Ui,Bi=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),zi=J("IE_PROTO"),Vi=Object.prototype,Wi=Bi?Object.getPrototypeOf:function(e){return e=$n(e),E(e,zi)?e[zi]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Vi:null},Ki=Je("iterator"),Zi=!1;[].keys&&("next"in(Ui=[].keys())?(Ri=Wi(Wi(Ui)))!==Object.prototype&&(Fi=Ri):Zi=!0);var Ji=null==Fi||a((function(){var e={};return Fi[Ki].call(e)!==e}));Ji&&(Fi={}),E(Fi,Ki)||x(Fi,Ki,(function(){return this}));var $i={IteratorPrototype:Fi,BUGGY_SAFARI_ITERATORS:Zi},qi=$i.IteratorPrototype,Gi=function(){return this},Yi=$i.IteratorPrototype,Qi=$i.BUGGY_SAFARI_ITERATORS,Xi=Je("iterator"),eo=function(){return this},to=yi.charAt,no="String Iterator",ro=ne.set,io=ne.getterFor(no);!function(e,t,n,r,i,o,a){!function(e,t,n){var r="String Iterator";e.prototype=Hr(qi,{next:d(1,(function(){var e,t=io(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=to(n,r),t.index+=e.length,{value:e,done:!1})}))}),ct(e,r,!1),dt[r]=Gi}(n);var s,c,u=e.prototype,l=u[Xi]||u["@@iterator"]||i,h=!Qi&&l||(c=i,h||(!Qi&&c in u?u[c]:function(){return new n(this)}));l&&(s=Wi(l.call(new e)),Yi!==Object.prototype&&s.next&&(Wi(s)!==Yi&&(xr?xr(s,Yi):"function"!=typeof s[Xi]&&x(s,Xi,eo)),ct(s,"String Iterator",!0))),u[Xi]!==h&&x(u,Xi,h),dt.String=h}(String,0,(function(e){ro(this,{type:no,string:String(e),index:0})}));var oo=Xn.forEach,ao=Ai("forEach")?[].forEach:function(e){return oo(this,e,arguments.length>1?arguments[1]:void 0)};for(var so in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var co=o[so],uo=co&&co.prototype;if(uo&&uo.forEach!==ao)try{x(uo,"forEach",ao)}catch(e){uo.forEach=ao}}var lo=ye.indexOf,ho=[].indexOf,fo=!!ho&&1/[1].indexOf(1,-0)<0,po=Ai("indexOf");Me({target:"Array",proto:!0,forced:fo||!po},{indexOf:function(e){return fo?ho.apply(this,arguments)||0:lo(this,e,arguments.length>1?arguments[1]:void 0)}});var mo=function(e){return-1!==e.search(">[^<>]+<")},yo=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=[].concat(Array.from(t.head.childNodes),Array.from(t.body.childNodes));if(!n.length)return document.createTextNode(e);var r=document.createDocumentFragment();return n.forEach((function(e){return r.appendChild(e)})),go(r),r},go=function(e){var t=e.querySelectorAll("script");t.length&&Array.from(t).map((function(e){var t=document.createElement("script");Array.from(e.attributes).forEach((function(e){t.setAttribute(e.name,e.value)})),t.innerHTML=e.innerHTML,e.parentNode.appendChild(t),e.parentNode.removeChild(e)}))},vo=function e(t,n,r){switch(n.type){case"LeavePristine":return t;case"Truncate":return function(e,t){var n=2*t.truncateLength,r=e.outerHTML.trim().split(/\s+/);if(t.truncateLength>=r.length)return e;for(var i,o=0,a=!1,s=0,c=0,u=Jn(r);!(i=u()).done;){var l=i.value;c++;var d=a,h=l.lastIndexOf("<"),f=l.lastIndexOf(">");if(h>=0&&(a=!0),f>=0&&(a=!1),-1!==h&&-1!==f&&h>f&&(a=!0),d&&f===l.length-1&&!mo(l)||0===h&&f===l.length-1)a=!1;else if(!a){if(o>0)break;(++s>=t.truncateLength&&l.includes(".")||s==n)&&(o=c)}}if(c===r.length)return e;var p=r.slice(0,c=o>0?o:c).join(" ");s===n&&(p+="...\n");var m,y=(new DOMParser).parseFromString(p,"text/html").body.children[0];switch(t.style){case"fadeout":var g=document.createElement("div");g.style.position="absolute",g.style.height="100%",g.style.width="100%",g.style.bottom=0,g.style.backgroundImage="linear-gradient(0deg, #fff 0%, rgba(255, 255, 255, 0) 100%)",y.appendChild(g),(m=document.createElement("div")).style.position="relative",m.appendChild(y);break;case"linebreak":var v=document.createElement("hr");v.style.border="1px solid #ebebeb",y.appendChild(v),m=y;break;default:m=y}return m}(t,n);case"OutcomeTracker":!function(e){window.Zephr||(window.Zephr={}),window.Zephr.outcomes||(window.Zephr.outcomes={}),window.Zephr.outcomes[e.featureId]={featureLabel:e.featureLabel,outcomeId:e.outcomeId,outcomeLabel:e.outcomeLabel}}(n);break;case"Form":return function(e,t){if(t.forms&&t.forms[e.formId])return yo(t.forms[e.formId]);console.error("Form not found.")}(n,r);case"PaymentForm":return function(e,t){if(t.paymentForms&&t.paymentForms[e.formId])return yo(t.paymentForms[e.formId]);console.error("Payment form not found.")}(n,r);case"UIComponent":return function(e,t){if(t.uiComponents&&t.uiComponents[e.componentId])return yo(t.uiComponents[e.componentId]);console.error("UI component not found.")}(n,r);case"HostedUIComponent":return function(e,t){if(t.hostedUiComponents&&t.hostedUiComponents[e.url])return yo(t.hostedUiComponents[e.url]);console.error("Hosted UI component not found.")}(n,r);case"ComponentTemplate":return function(e,t){if(t.componentTemplates&&t.componentTemplates[e.componentId])return yo(t.componentTemplates[e.componentId]);console.error("Component template not found.")}(n,r);case"Remove":break;case"Zone":var i=n.contents.map((function(n){return e(t,n,r)}));return function(e,t,n){if(n.uiComponents&&n.uiComponents[e]){var r=yo(n.uiComponents[e]),i=r.getElementById("zephr-zone-"+e.toLowerCase());return t.forEach((function(e){return i.appendChild(e)})),r}console.error("Zone not found.")}(n.id,i,r);default:console.error("No matching outcome type "+n.type)}},wo=function(e,t,n){void 0===n&&(n={}),e.forEach((function(e){var r=e.parentNode,i=Array.from(r.children).indexOf(e),o=r.removeChild(e),a=t.map((function(e){return vo(o,e,n)})).filter(Boolean),s=document.createDocumentFragment();a.forEach((function(e){return s.appendChild(e)})),i<r.children.length?r.insertBefore(s,r.children[i]):r.appendChild(s)}))};Me({target:"Object",stat:!0,forced:a((function(){tr(1)}))},{keys:function(e){return tr($n(e))}});var bo=function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t};function Eo(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var So=function(){function e(e){this.cdnApi=e||""}var t=e.prototype;return t.fetchLiveFeatures=function(){try{var e=this;return Promise.resolve(Eo((function(){return Promise.resolve(fetch(e.cdnApi+"/zephr/features").then((function(e){return e.json()})))}),(function(){return Promise.reject(new Error("Live features endpoint failed."))})))}catch(e){return Promise.reject(e)}},t.fetchDecisions=function(e,t){var n=void 0===t?{customData:{}}:t,r=n.jwt,i=n.customData,o=void 0===i?{}:i;try{var a=this,s=e.map((function(e){return e.id}));return Promise.resolve(Eo((function(){return Promise.resolve(fetch(a.cdnApi+"/zephr/feature-decisions",{method:"POST",credentials:"include",headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},r&&{Authorization:"Bearer "+r}),body:JSON.stringify({path:document.location.pathname+document.location.search+document.location.hash,referer:document.referrer,featureIds:s,customData:o})}).then((function(e){return e.json()})))}),(function(){return Promise.reject(new Error("Feature decisions endpoint failed."))})))}catch(e){return Promise.reject(e)}},t.executeDecisions=function(e,t,n){for(var r,i=Jn(e);!(r=i()).done;){var o=r.value,a=(t.featureResults||{})[o.id];if(a){var s=hi(a),c=this.selectFeatureNodes(o);wo(c,s,t.resources||{})}}t.accessDetails&&(window.Zephr||(window.Zephr={}),window.Zephr.accessDetails?window.Zephr.accessDetails=this._mergeAccessDetails(window.Zephr.accessDetails,t.accessDetails):window.Zephr.accessDetails=t.accessDetails),n&&function(e){var t=e.datalayerName;t in window||(window[t]=[]);var n={},r=[];e.includeOutcomes&&window.Zephr.outcomes&&(n.zephrOutcomes=window.Zephr.outcomes,e.outcomesAsEvents&&Object.keys(window.Zephr.outcomes||[]).forEach((function(e){var t={event:"zephr-outcome-"+e,featureId:e,featureLabel:window.Zephr.outcomes[e].featureLabel,outcomeId:window.Zephr.outcomes[e].outcomeId,outcomeLabel:window.Zephr.outcomes[e].outcomeLabel};r.push(t)}))),window.Zephr&&window.Zephr.accessDetails&&(Object.keys(window.Zephr.accessDetails.trials||{}).forEach((function(t){var r=window.Zephr.accessDetails.trials[t];if(r.reportInDataLayer){var i=r.totalCredits-r.remainingCredits;e.groupFields&&!n.zephrTrials&&(n.zephrTrials={});var o=e.groupFields?n.zephrTrials:n;r.dataLayerCreditsUsedKey&&(o[r.dataLayerCreditsUsedKey]=i),r.dataLayerCreditsRemainingKey&&(o[r.dataLayerCreditsRemainingKey]=r.remainingCredits)}})),(window.Zephr.accessDetails.trialTrackingDetails||[]).forEach((function(t){var r=(window.Zephr.accessDetails["credits"===t.entitlementType?"credits":"meters"]||{})[t.entitlementId];r&&(e.groupFields&&!n.zephrTrials&&(n.zephrTrials={}),t.creditsRemainingKey&&(e.groupFields?n.zephrTrials[t.creditsRemainingKey]=r.remainingCredits:n[t.creditsRemainingKey]=r.remainingCredits),t.creditsUsedKey&&(e.groupFields?n.zephrTrials[t.creditsUsedKey]=r.totalCredits-r.remainingCredits:n[t.creditsUsedKey]=r.totalCredits-r.remainingCredits))}))),Object.keys(n).length&&(n.event="zephr-pageview",r.unshift(n)),r.length&&(r.forEach((function(e){window[t].push(e)})),document.dispatchEvent(bo("zephr.dataLayerReady")))}(n)},t._mergeAccessDetails=function(e,t){var n,r;return Object.assign({},e,t,{authenticated:t.authenticated,accessDecisions:Object.assign({},e.accessDecisions,t.accessDecisions),entitlements:this._mergeCreditData(e.entitlements,t.entitlements),credits:this._mergeCreditData(e.credits,t.credits),meters:this._mergeCreditData(e.meters,t.meters),trials:this._mergeCreditData(null!=(n=e.trials)?n:{},null!=(r=t.trials)?r:{})})},t._mergeCreditData=function(e,t){for(var n=Object.assign({},e,t),r=0,i=Object.entries(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1],c=t[a];if(c){var u=n[a];this._eitherHasProperty(s,c,"decrementedInDecision")&&(u.decrementedInDecision=!(!s.decrementedInDecision&&!c.decrementedInDecision)),this._eitherHasProperty(s,c,"usedInDecision")&&(u.usedInDecision=!(!s.usedInDecision&&!c.usedInDecision)),this._eitherHasProperty(s,c,"remainingCredits")&&(u.remainingCredits=this._minOrNumber(s.remainingCredits,c.remainingCredits)),this._eitherHasProperty(s,c,"totalCredits")&&(u.totalCredits=this._minOrNumber(s.totalCredits,c.totalCredits))}}return n},t._eitherHasProperty=function(e,t,n){return e&&e.hasOwnProperty(n)||t&&t.hasOwnProperty(n)},t._minOrNumber=function(e,t){var n="number"==typeof e,r="number"==typeof t;return n&&r?Math.min(e,t):n?e:r?t:void 0},t.findFeatures=function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return"COMMENT_TAG"!==e.targetType&&null!==document.querySelector(e.cssSelector)})):[]},t.selectFeatureNodes=function(e){return document.querySelectorAll(e.cssSelector)},e}(),Ao=function(e){return new So(e)},_o=function(e){var t;e&&(t=console).log.apply(t,[].slice.call(arguments,1))};e.createInstance=Ao,e.run=function(e){try{var t=e&&e.debug||localStorage&&localStorage.getItem("zephrBrowserDebug"),n="",r={};"string"==typeof e?n=e:"object"==typeof e&&(r=e,n=e.cdnApi||"");var i=Ao(n);return Promise.resolve(i.fetchLiveFeatures()).then((function(e){function n(){return document.dispatchEvent(bo("zephr.browserDecisionsFinished")),i}var o,a;Array.isArray(e)?o=e:(o=e.features,a=e.datalayerOutcomesConfig),_o(t,"Live Features:",o);var s=i.findFeatures(o),c=function(){if(s.length)return _o(t,"Features on page:",s),Promise.resolve(i.fetchDecisions(s,r)).then((function(e){_o(t,"Decisions:",e),i.executeDecisions(s,e,a)}));_o(t,"No features found on page.")}();return c&&c.then?c.then(n):n()}))}catch(e){return Promise.reject(e)}}}(t)},722:e=>{e.exports={desktopAdConfig:{single_request:!0,positions:{artbottom:{slot_id:"artbottom",sizes:[[1,1],"fluid"]},top:{slot_id:"top",sizes:[[728,90],[970,66],[970,250],[970,90],[7,1],[7,2],[1,1],"fluid"],params:{hero:"true"}},topx:{slot_id:"topx",sizes:[[728,90],[970,66],[970,250],[970,90],[1,1],"fluid"],incremental:!0},rec:{slot_id:"rec",sizes:[[300,250],[300,600],[160,600],[1,1],"fluid"]},recx:{slot_id:"recx",sizes:[[300,250],[300,600],[160,600],[1,1],"fluid"],incremental:!0},moreon:{slot_id:"moreon",sizes:[[820,236],[620,529],[300,250],[620,236],[1,1],"fluid"],incremental:!0},"spon-logo":{slot_id:"spon-logo",sizes:[[300,170],[1,1]]},bottom:{slot_id:"bottom",sizes:[[728,90],[970,250],[1,1],"fluid"]},"ntv-home":{slot_id:"ntv-home",sizes:[[2,3],[1,1],"fluid"],params:{strnativekey:"QLWstPVbbpcwuyqK5ijhxZvL"}},"ntv-rail-2":{slot_id:"ntv-rail-2",sizes:[[2,3],[1,1],"fluid"],breaks:{xxlarge:[[2,3],[1,1],"fluid"],xlarge:[[2,3],[1,1],"fluid"],large:[[2,3],[1,1],"fluid"],medium:[[2,3],[1,1],"fluid"],small:[[2,3],[1,1],"fluid"]},params:{strnativekey:"UCddx8Xg8Mdi8m8PVh1kfbvP"}},"ntv-deskchannel":{slot_id:"ntv-deskchannel",sizes:[[2,3],[1,1],"fluid"],params:{strnativekey:"e5tSBXbDmvyVwXbVB7dymzCc"},incremental:!0},"ntv-contentd":{sizes:[[1,1]],breaks:{xxlarge:[[1,1]],xlarge:[[1,1]],large:[[1,1]],medium:[[1,1]],small:[[1,1]]},slot_id:"ntv-contentd",params:{strnativekey:"6kez5JUH4RdqUg4xdkwSNADy"}},inread:{slot_id:"inread",progressive:!0,sizes:[[600,575],[528,297],[1,1],"fluid"]},hero:{slot_id:"hero",sizes:[[1,1],[7,1],[7,2]]},qotd:{slot_id:"qotd",sizes:[[750,200]]},scheduler:{slot_id:"scheduler",ad_unit_path:"/7175/video_scheduler",sizes:[[1,1]]}},amazonSlots:[{slotID:"rec",sizes:[[300,250]]},{slotID:"recx",sizes:[[300,250]]},{slotID:"top",sizes:[[728,90],[970,250]]},{slotID:"topx",sizes:[[728,90],[970,250]]},{slotID:"bottom",sizes:[[728,90],[970,250]]}]},mobileAdConfig:{mobile:!0,safe_frame:!0,single_request:!0,positions:{artbottom:{slot_id:"artbottom",sizes:[[1,1],"fluid"]},inread:{slot_id:"inread",sizes:[[600,575],[1,1],"fluid"]},"mob-logo":{slot_id:"mob-logo",sizes:[[300,50],[300,75],[1,1],"fluid"]},mobile:{slot_id:"mobile",sizes:[[300,50],[320,50],[7,1],[7,2],[1,1],"fluid"],params:{hero:"true"}},mobilerec:{slot_id:"mobilerec",sizes:[[300,250],[300,251],[300,50],[320,50],[1,1],"fluid"]},mobileint:{slot_id:"mobileint",sizes:[[320,480],[300,600],[300,250],[300,50],[320,50],[1,1],"fluid"],incremental:!0},mobilex:{slot_id:"mobilex",sizes:[[300,250],[300,50],[320,50],[1,1],"fluid"],incremental:!0},"ntv-article":{slot_id:"ntv-article",sizes:[[300,250],[300,50],[320,50],[2,3],[1,1],"fluid"],params:{strnativekey:"twzGG8q5aVPXGmiCccciYeT7"}},"ntv-contentm":{slot_id:"ntv-contentm",sizes:[[1,1]],params:{strnativekey:"6kez5JUH4RdqUg4xdkwSNADy"}},"ntv-mobhome":{slot_id:"ntv-mobhome",sizes:[[2,3],[1,1],"fluid"],params:{strnativekey:"QLWstPVbbpcwuyqK5ijhxZvL"}},"ntv-mobchannel":{slot_id:"ntv-mobchannel",sizes:[[2,3],[1,1],"fluid"],params:{strnativekey:"e5tSBXbDmvyVwXbVB7dymzCc"},incremental:!0},rec:{slot_id:"rec",sizes:[[300,250],[300,600],[1,1],"fluid"]},recx:{slot_id:"recx",sizes:[[300,250],[300,600],[1,1],"fluid"]},"spon-logo":{slot_id:"spon-logo",sizes:[[300,170],[1,1]]},mobsearch:{slot_id:"mobsearch",sizes:[[300,250],[1,1],"fluid"],incremental:!0},"qotd-mob":{slot_id:"qotd-mob",sizes:[[350,200]]}},amazonSlots:[{slotID:"mobileint",sizes:[[320,50],[300,50]]},{slotID:"mobile",sizes:[[320,50]]},{slotID:"mobilerec",sizes:[[300,250],[320,50]]},{slotID:"mobilex",sizes:[[300,250],[320,50]]}]}}},2045:(e,t,n)=>{"use strict";n.r(t),n.d(t,{convertUriToHttps:()=>h,getUtmParams:()=>l,handleFooterAdLabel:()=>f,setAuthorNameTracking:()=>d,shouldLoadArticle:()=>p,updateMetaForSimpleReach:()=>u,updateMiniPublishDates:()=>c});var r=n(3398),i=n(1741),o=n(8003),a=n(8924),s=n(9285);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;const n=t.querySelector(".content-data");if(!n)return;const r=n.getAttribute("data-date-expiration"),i=(0,o.ES)(),a=(0,o.ES)(Number.parseInt(r,10));"live"!==e||a.getTime()<=i.getTime()||Array.from(t.querySelectorAll(".live-update-timestamp")).forEach((e=>{const t=e.parentNode.getAttribute("data-sort-time"),{diffDays:n=0,diffHours:r=4,updateLabel:i=""}=(0,o.cF)(Number.parseInt(t,10),!0,!1);!n&&r<4&&(e.textContent=i,e.style.display="block",r<2&&(e.style.color="#D8361E"))}))}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=document.querySelector('link[rel="canonical"]'),r=document.querySelector('meta[property="article:author"]');n&&n.setAttribute("href",t),r&&r.setAttribute("content",e)}const l=()=>{const e=new URL(window.location.href||"").searchParams;return Object.keys(Object.fromEntries(e)).reduce(((t,n)=>n.includes("utm_")?t=`${t}${t?"&":""}${n}=${Object.fromEntries(e)[n]}`:t),"")};function d(){const e=[...(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".author-name--tracking")];let t=1;e.forEach((n=>{const r=n.innerText,i=e.length>1?`author-${t}-${r}`:`author-${r}`;(0,s.Z)(n,"click","Template Area Interaction",i),t++}))}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^http:\/\//i)?e.replace("http://","https://"):e}function f(e){const t=document.getElementsByClassName("footer-ad-labeling");var n;t&&!(0,i.LE)()&&(null===(n=t[e])||void 0===n||n.classList.add("no-label"))}function p(e){const{serverData:t={}}=e||{},{tracking:{contentPaywall:n=""}={}}=t;return"premium"!==n}r.isMobile||document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".article-body-container");e&&"complete"!==document.readyState&&document.addEventListener("readystatechange",(()=>{e.classList.add("show-iframes")}))})),document.addEventListener("DOMContentLoaded",(0,a.BO)(".hero-image-premium-article-credit",".hero-image-info-caption-shortend",".hero-image-info-caption-expanded")),d()},8003:(e,t,n)=>{"use strict";n.d(t,{ES:()=>s,UJ:()=>d,cF:()=>c});var r=n(9490),i=n(8924);const o=e=>{e&&e.remove()},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.querySelector(".bertie-badge")||document.querySelector(".content-data--hidden .bertieBadge"),r=e.querySelector(".vert-pipe.first")||document.querySelector(".content-data--hidden .vert-pipe.first"),i=e.querySelector("time")||document.querySelector(".content-data--hidden time"),a=e.querySelector("span.time")||document.querySelector(".content-data--hidden span.time");t?(o(n),o(r)):(o(i),o(a))},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?new Date(e):new Date;return t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3),new Date(t.getTime()+-18e6)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=s()-s(e),i=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5),a=Math.round(r%864e5%36e5/6e4),c=`${o} hour${1!==o?"s":""} and `,u=(e=>{let t;switch(e){case 0:t="Just Now";break;case 1:t=`${e} minute`;break;default:t=`${e} minutes`}return t})(a);return{diffDays:i,diffHours:o,updateLabel:`${t||!n?"":"Updated"} ${o?c:""}${o>0&&0===a?"":u} ${"Just Now"!==u?"ago":""}`}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=Number.parseInt(e.getAttribute("data-sort-time"),10),n=parseInt(t,10),i=r.ou.fromMillis(n).toUTC(),o=r.ou.fromISO(i).setZone("America/New_York");e.querySelector(".live-update-timestamp").innerHTML=String(o.toFormat("MMM d, y, hh:mma ZZZZ")).replace("AM","am").replace("PM","pm")},l=(e,t,n)=>e.forEach(((e,r)=>{const o=e.getAttribute("data-sort-time")||"";!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;if(!t)return;const{diffDays:s=0,diffHours:l=4,updateLabel:d=""}=c(Number.parseInt(t,10),!1,!0);if(n.classList.contains("live-update")&&l<4&&s<1&&!r&&u(n),s||l>4)return void u(n);const h="content-data__updated-label",f=(0,i.z3)("div",{class:l?h:`${h} time--red`,style:(l<2?"color: #D8361E;":"")+" display: inline-block;"});f.innerText=d,a(e),0===o&&e.insertBefore(f,e.firstChild)}(t,o,e,n,r)})),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=((e.classList||{}).value||"").includes("content-data--hidden")?e:e.querySelector(".content-data--hidden"),n=Array.from(document.querySelectorAll("article")).pop(),r=n.querySelectorAll(".live-update");if(!t)return;const o=t.getAttribute("data-date-expiration"),c=s();s(Number.parseInt(o,10)).getTime()>c.getTime()?(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=(0,i.z3)("div",{class:"content-data_live-label",style:'animation: liveAlert 2s infinite ease; background-color: #D8361E; color: #FFFFFF; display: inline-block; font: 600 10px/12px "Work Sans", sans-serif; letter-spacing: 0.5px; padding: 6px 12px; text-transform: uppercase;'});t.innerText="live";const n=(0,i.z3)("style");n.innerText="@keyframes liveAlert { 0% { background-color: #D8361E } 50% { background-color: #E26957 } 100% { background-color: #D8361E } }",a(e,!0),e.parentElement.insertBefore(n,e),e.parentElement.insertBefore(t,e)}(t),t.classList.remove("content-data--hidden"),l(r,t,!0)):r&&l(r,t,!1),t.classList.remove("content-data--hidden"),function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".vestpocket");if(e){const t=e.nextElementSibling;t&&t.classList.contains("live-update")&&t.classList.add("live-update--top")}}(n)}},8492:(e,t,n)=>{"use strict";n.d(t,{Ew:()=>o,F5:()=>s,SF:()=>a,Vt:()=>c});var r=n(2045),i=n(6754);const o=e=>e?" amp-recirc-unit":"",a=e=>e?"data-vars-event-label":"data-ga-track",s=()=>{const{fireValerieCall:e=!1}=window.forbes["simple-site"];return e?(0,i.getCookieValue)(document.cookie,"recircUnit"):""},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{isAmp:n=!1}=window.forbes["simple-site"];return e.reduce(((e,i,s)=>(i.uri=(0,r.convertUriToHttps)(i.uri),e+`<div class="recirc-block"><a class="recirc-link" href="${i.uri}"><h3 class="recirc-headline${o(n)}" ${a(n)}="${t} ${s+1}">${i.title}</h3></a></div>`)),"")}},2662:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=class{constructor(){this.observers=[],this.buffer=[],this.buffered=!1}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}pause(){this.buffered=!0}unpause(){this.buffered=!1,this.buffer.forEach((e=>this.notify(e))),this.buffer=[]}clear(){this.buffer=[],this.unpause()}notify(e){this.buffered?this.buffer.push(e):this.observers.forEach((t=>{try{t(e)}catch(e){console.error("Error running observer watcher:",e)}}))}}},9187:(e,t,n)=>{"use strict";n.d(t,{uY:()=>F,mg:()=>H,et:()=>I,Di:()=>A,GY:()=>N});var r=n(4572),i=n(7462),o=(n(7698),n(8783)),a=n(3398),s=n(68),c=n(722),u=n(7460),l=n(6754);function d(e){return"none"===e?[]:e}function h(e){return"string"==typeof e?(e||"").replace(/\s*/gi,"").toLowerCase():e}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t&&Object.keys(e||{}).length?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"").toLowerCase().replace(/[\s'"]+/g,"")}(h(d(e[`${t}Names`]||e[`${t}`]))||"");return n}(e,t):""}function p(){let e="";const t=window.location.pathname,[n,r]=t.split("/").filter((e=>!(""===e||"vetted"===e))).map((e=>e.replace(/-/g,"&")));return e=r?n?`forbesvetted:${n}/${r} , forbesvetted:${n}`:`forbesvetted:/${r} , forbesvetted`:n?`forbesvetted:${n}`:"forbesvetted",e}var m=n(9034);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v=1168044;function w(){var e;const t=JSON.parse(localStorage.getItem("fpd_fuse")||"{}");return(null==t||null===(e=t.kvs)||void 0===e?void 0:e["fbs-forbes"])||{}}u.ie&&localStorage.setItem("apstagDebug","true");const b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{}).clientId}(e)?e.clientId:(0,s.getFvid)(),n=function(){const{tracking:e={}}=(window.forbes||{})["simple-site"]||{},t={channel:f(e,"channel"),section:f(e,"section")};return Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")}();return fetch(`https://fuse${u.BB?"":"-dev"}.forbes.com/fuse/${t||""}?${n}`).then((e=>e.json())).then((e=>(function(e){const{tracking:t={}}=(window.forbes||{})["simple-site"]||{},{localStorage:n}=window,r=f(t,"channel").split(",");e.kvs.ts=Math.floor(Date.now()/1e3);const i=w(),o=e.kvs["fbs-forbes"]||{},a=e,s=Object.keys(o).length>0,c=Object.keys(i).length>0;s?(r.forEach((t=>{i[t]=e.kvs["fbs-forbes"]})),a.kvs["fbs-forbes"]=i):c&&(a.kvs["fbs-forbes"]=i);try{n.setItem("fpd_fuse",JSON.stringify(a)||""),s?a.kvs["fbs-forbes"]=o:c&&delete a.kvs["fbs-forbes"]}catch(e){console.error(e)}}(e),e))).catch((e=>{console.error("Fuse Segment Error:",e)}))}({clientId:(0,l.getCookieClientId)(document.cookie,u.ie)});window.fuse=b,window.fbsads=window.fbsads||new o.fw;const E=window.fbsads;let S=u.e0;function A(e){return(window.fbsads||{}).adSlots instanceof Map&&Array.from(window.fbsads.adSlots.keys()).indexOf(e)>=0}function _(e){const t=Array.isArray(e),{length:n}=e;return r=>t?Array.isArray(r)&&n===r.length&&e.every(((e,t)=>e===r[t])):e===r}const k=_([7,1]),C=_([7,2]),P=c.desktopAdConfig.positions.top.sizes.filter((e=>!k(e)&&!C(e)));function I(){const e=window.location.search.replace("?","").split("&").map((e=>e.split("="))).find((e=>"ss"===e[0]&&e[1]));return e&&e[1]}let T,O;function x(e,t){return!!e.find((e=>JSON.stringify(t)===JSON.stringify(e)))}function D(e,t){return document.querySelector("fbs-ad")?(n=e.positions,r=t,Object.keys(r).forEach((e=>{const t=r[e];n[e]&&(n[e].sizes=n[e].sizes.filter((e=>!x(t,e))))})),n):e.positions;var n,r}function M(){const e=u.JF&&window.location.pathname.indexOf("/preview/mobile")>=0||a.isMobile?O:T;if(["places","profile","companies","investment-funds","colleges","teams"].some((t=>e.ad_unit_path.includes(t)))){const t={moreon:[[820,236],[620,529]]};e.positions=D(e,t)}return e}function j(e){e.params=e.params||{};const t=(e.ad_unit_path||"").split("/")||[],{articleId:n=""}=window.forbes["simple-site"],r={site:t[2],zone:(t.slice(3)||[]).join("/"),author:e.additionalMoatParams.author||"",brandvoice:["ad","advoice"].indexOf(e.params.type)>-1,channel:e.params.channel,editorialSlot:e.params.editSlot,hashtags:e.params.ht,section:e.params.section,specialSlot:e.params.specialslot};n&&(r.current_article_id=n),window.external_services=(0,i.Z)(window.external_services||{},r)}function L(e,t){const{bertieBadgeSlugs:n=""}=e||{};return(n.indexOf("decisionmaker")>-1||n.indexOf("decision-maker")>-1)&&"1"!==t?"1.1":t}function N(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=(0,u.Ac)(),r=(null===(e=window.forbes)||void 0===e?void 0:e["simple-site"])||{};r.randId=(0,s.generateUniqueId)();const{isVetted:o,swimLane:l,showOpenWeb:m,isAdLight:y,adInventory:w="7175",sentimentScore:E=""}=r,A=u.a0?"":I(),_=l||A,k=u.Dj||"",C=a.isMobile?"fdcmobile":"fdc.forbes";(n.gamZone||"").includes("article")&&(S=`/${w}/${C}/${n.gamZone}`);const x=n.isGroupBlog?n.publicationAuthor:n.author,D={author:h(d(x)),bbgterm:(0,s.getBbgTerm)(),channel:[o?"forbesvetted":f(n,"channel")],editSlot:n.edit||"",fvid:(0,s.getFvid)(),ht:d(n.hashtags),id:u.$S||n.naturalID||"",login:n.login||!1,section:[o?p():f(n,"section")],specialslot:_?"":n.slot||"",swimlane:_,tab:k,templatetype:n.templateType,type:h(d(n.contribType||n.type)),badges:n.badges,advoice:n.brandVoice,mnet_adi:"",sentimentScore:E,randId:r.randId,comm:m,isAdLight:y};u.GD&&(D.premiumProfile=u.GD);const M={author:d(x)};!function(e,t){var n;t.editorsPick&&(e.ep=t.editorsPick),t.coverStory&&(e.coverstory=t.coverStory),t.bertieBadgeSlugs&&(e.badges=t.bertieBadgeSlugs),t.negativeSentimentCompanies&&(e.ns=t.negativeSentimentCompanies),null!==(n=t.entitySegments)&&void 0!==n&&n.length&&(e.es=t.entitySegments.join(","),e.essrc=t.entitySegments.map((e=>`${window.fbsads.getTargetingSource()?`${window.fbsads.getTargetingSource()}_`:""}${e}`)).join(",")),t.sentimentCompanies&&(e.co=t.sentimentCompanies)}(D,n),(D.specialslot||D.swimlane)&&function(e){e.channel="",e.section="",e.displaychannel="",e.displaysection="",e.swimlane&&(e.specialslot="")}(D),function(e,t,n){t&&b.then((t=>{if(!t||!Object.keys(t).length)return;window.fuse={};const{gam:r={},kvs:i={}}=t;Object.keys(r).forEach((t=>{e[t]=r[t],window.googletag.cmd.push((()=>{const e=window.googletag.pubads();e.getTargeting(t)&&e.getTargeting(t).length||window.googletag.pubads().setTargeting(t,r[t])}))})),Object.keys(i).forEach((e=>{window.fuse[e]=i[e]})),e.jt=L(n,e.jt)}))}(D,t,n),function(e,t,n){window.fuse&&"function"!=typeof window.fuse.then&&!t&&((0,i.Z)(e,window.fuse),e.jt=L(n,e.jt))}(D,t,n),function(e,t,n){const r={bypass_validate_moat_yield:u.ie,params:t,additionalMoatParams:n,ad_unit_path:S,isEurope:u.$p,isChina:u.Ur};T=g(g({},c.desktopAdConfig),r),O=g(g({},c.mobileAdConfig),r),function(e){const t=(e.dfpZone||"").includes("article"),n=(e.dfpZone||"").includes("pictures");if(!t&&!n||a.isMobile){if(a.isMobile&&e.dfpZone.includes("article")){const e={strnativekey:"13b84c32"};["mobilerec","mobilex"].forEach((t=>{O.positions[t]&&(O.positions[t].params=e)}))}}else T.positions.top.sizes&&(T.positions.top.sizes=P),T.positions.recx&&!n&&(T.positions.recx.criteoZoneId=v)}(e)}(n,D,M)}function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=M();!1!==e&&(n.params.specialslot=e),t&&n.positions.mobile.sizes&&(n.positions.mobile.sizes=n.positions.mobile.sizes.filter((e=>!k(e)&&!C(e)))),j(n),E.applyConfig(n)}function F(e){const t=M(),n=(0,m.checkArticleIsPremiumOrMasthead)(),r=t.positions,i=[970,600];if(n&&"premium"===e){var o;r&&null!==(o=r.topx)&&void 0!==o&&o.sizes&&!x(t.positions.topx.sizes,i)&&t.positions.topx.sizes.push(i)}else{const e={topx:[i]};t.positions=D(t,e)}}N(!0);const R=M();F(R.params.templatetype),j(R),E.bootstrap(R)},4491:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,r:()=>s});const r=new(n(2662).Z);let i=!1,o=!1;function a(e){i?e(o):r.subscribe(e)}const s=()=>o;a((e=>{e&&document.body.classList.add("adblock-on")})),document.addEventListener("fbs-ad-block-init",(function e(){o=window.forbes.hasAdBlocker,i=!0,document.removeEventListener("fbs-ad-block-init",e),r.notify(o)}))},1639:(e,t,n)=>{"use strict";var r=n(4491);(0,r.Z)((e=>{e&&document.querySelectorAll("fbs-video").forEach((e=>{e.removeAttribute("autoplay"),e.pause()}))})),(0,r.Z)((e=>{e&&Array.from(document.querySelectorAll(".medianet, .fbs-ad--artbottom-wrapper")).forEach((e=>{(0,r.r)()&&e.parentElement.classList.replace("adblock-off","adblock-on")}))}))},7460:(e,t,n)=>{"use strict";n.d(t,{$S:()=>s,$p:()=>se,Ac:()=>he,BB:()=>T,D0:()=>P,Dj:()=>b,EN:()=>G,GD:()=>R,GM:()=>a,JF:()=>O,KM:()=>z,NH:()=>ne,Q:()=>o,UO:()=>ie,Ur:()=>ce,Xo:()=>j,Zr:()=>K,_F:()=>v,a0:()=>l,a9:()=>ue,av:()=>h,e0:()=>me,gR:()=>X,hn:()=>u,ie:()=>C,mG:()=>B,og:()=>V,wY:()=>y,y_:()=>de});var r=n(3398),i=n(6754);const o=(window.forbes||{})["simple-site"]||{},{adExperience:a,adId:s,adInventory:c,adZone:u,advoiceBrand:l,authorSlug:d,barChartYears:h,blogSlug:f,bucket:p,categoryCookieName:m,channelColor:y,channelId:g,channelName:v,cookieName:w,currentTabName:b,division:E,hasWriters:S,is404:A,isAdLight:_,isBlog:k,isE2E:C,isLocal:P,isNewsletter:I,isProd:T,isPreview:O,isSingleRec:x,isTopXAd:D,lazyLoadData:M,listLander:j,name:L,naturalId:N,pageLocation:H,pageType:F,premiumProfile:R,playerId:U,premiumPage:B,region:z,relativeVideo:V,relativeVideos:W,retracted:K,sectionId:Z,shareText:J,slug:$,showFollowButton:q,specialSlot:G,streamIndex:Y,streamSourceBlog:Q,streamSourceType:X,streamSourceValue:ee,subBlog:te,swimLane:ne,topStories:re,tracking:ie,layout:oe,randId:ae}=o,{isEurope:se}=window.forbes||{},{isChina:ce}=window.forbes||{},{isUsDpa:ue}=window.forbes||{},{isUs:le}=window.forbes||{};function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,i.getCookie)(document.cookie,"fbs-zephr-access")?e.replace(/default/,/RKPEVDB|R8W03AS/g.test((0,i.getCookie)(document.cookie,"fbs-zephr-access")||"")?"subscriber":"nonsubscriber"):e}function he(){const e=((window.forbes||{})["simple-site"]||{}).tracking;return e.gamZone=de(e.gamZone),e}const fe=c||"7175",pe=r.isMobile?"fdcmobile":"fdc.forbes",me=j?u:`/${fe}/${pe}/${u}`},3404:()=>{(function(){"use strict";var e=window.Document.prototype.createElement,t=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,i=window.Document.prototype.append,o=window.DocumentFragment.prototype.prepend,a=window.DocumentFragment.prototype.append,s=window.Node.prototype.cloneNode,c=window.Node.prototype.appendChild,u=window.Node.prototype.insertBefore,l=window.Node.prototype.removeChild,d=window.Node.prototype.replaceChild,h=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),f=window.Element.prototype.attachShadow,p=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),m=window.Element.prototype.getAttribute,y=window.Element.prototype.setAttribute,g=window.Element.prototype.removeAttribute,v=window.Element.prototype.getAttributeNS,w=window.Element.prototype.setAttributeNS,b=window.Element.prototype.removeAttributeNS,E=window.Element.prototype.insertAdjacentElement,S=window.Element.prototype.insertAdjacentHTML,A=window.Element.prototype.prepend,_=window.Element.prototype.append,k=window.Element.prototype.before,C=window.Element.prototype.after,P=window.Element.prototype.replaceWith,I=window.Element.prototype.remove,T=window.HTMLElement,O=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),x=window.HTMLElement.prototype.insertAdjacentElement,D=window.HTMLElement.prototype.insertAdjacentHTML,M=new Set;function j(e){var t=M.has(e);return e=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e),!t&&e}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(e){return M.add(e)}));var L=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function N(e){var t=e.isConnected;if(void 0!==t)return t;if(L(e))return!0;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function H(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(t=[],e=e.firstChild;e;e=e.nextSibling)e.nodeType===Node.ELEMENT_NODE&&t.push(e);return t}function F(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function R(e,t,n){for(var r=e;r;){if(r.nodeType===Node.ELEMENT_NODE){var i=r;t(i);var o=i.localName;if("link"===o&&"import"===i.getAttribute("rel")){if(r=i.import,void 0===n&&(n=new Set),r instanceof Node&&!n.has(r))for(n.add(r),r=r.firstChild;r;r=r.nextSibling)R(r,t,n);r=F(e,i);continue}if("template"===o){r=F(e,i);continue}if(i=i.__CE_shadowRoot)for(i=i.firstChild;i;i=i.nextSibling)R(i,t,n)}r=r.firstChild?r.firstChild:F(e,r)}}function U(){var e=!(null==ae||!ae.noDocumentConstructionObserver),t=!(null==ae||!ae.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=t,this.I=!e}function B(e,t,n,r){var i=window.ShadyDOM;if(e.shadyDomFastWalk&&i&&i.inUse){if(t.nodeType===Node.ELEMENT_NODE&&n(t),t.querySelectorAll)for(e=i.nativeMethods.querySelectorAll.call(t,"*"),t=0;t<e.length;t++)n(e[t])}else R(t,n,r)}function z(e,t){e.j&&B(e,t,(function(t){return V(e,t)}))}function V(e,t){if(e.j&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.m.length;n++)e.m[n](t);for(n=0;n<e.g.length;n++)e.g[n](t)}}function W(e,t){var n=[];for(B(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var r=n[t];1===r.__CE_state?e.connectedCallback(r):J(e,r)}}function K(e,t){var n=[];for(B(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var r=n[t];1===r.__CE_state&&e.disconnectedCallback(r)}}function Z(e,t,n){var r=(n=void 0===n?{}:n).J,i=n.upgrade||function(t){return J(e,t)},o=[];for(B(e,t,(function(t){if(e.j&&V(e,t),"link"===t.localName&&"import"===t.getAttribute("rel")){var n=t.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var n=t.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var o=new Set;r&&(r.forEach((function(e){return o.add(e)})),o.delete(n)),Z(e,n,{J:o,upgrade:i})}}))}else o.push(t)}),r),t=0;t<o.length;t++)i(o[t])}function J(e,t){try{var n=t.ownerDocument,r=n.__CE_registry,i=r&&(n.defaultView||n.__CE_isImportDocument)?re(r,t.localName):void 0;if(i&&void 0===t.__CE_state){i.constructionStack.push(t);try{try{if(new i.constructorFunction!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{i.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=i,i.attributeChangedCallback&&t.hasAttributes()){var o=i.observedAttributes;for(i=0;i<o.length;i++){var a=o[i],s=t.getAttribute(a);null!==s&&e.attributeChangedCallback(t,a,null,s,null)}}N(t)&&e.connectedCallback(t)}}catch(e){q(e)}}function $(n,r,i,o){var a=r.__CE_registry;if(a&&(null===o||"http://www.w3.org/1999/xhtml"===o)&&(a=re(a,i)))try{var s=new a.constructorFunction;if(void 0===s.__CE_state||void 0===s.__CE_definition)throw Error("Failed to construct '"+i+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==s.namespaceURI)throw Error("Failed to construct '"+i+"': The constructed element's namespace must be the HTML namespace.");if(s.hasAttributes())throw Error("Failed to construct '"+i+"': The constructed element must not have any attributes.");if(null!==s.firstChild)throw Error("Failed to construct '"+i+"': The constructed element must not have any children.");if(null!==s.parentNode)throw Error("Failed to construct '"+i+"': The constructed element must not have a parent node.");if(s.ownerDocument!==r)throw Error("Failed to construct '"+i+"': The constructed element's owner document is incorrect.");if(s.localName!==i)throw Error("Failed to construct '"+i+"': The constructed element's local name is incorrect.");return s}catch(a){return q(a),r=null===o?e.call(r,i):t.call(r,o,i),Object.setPrototypeOf(r,HTMLUnknownElement.prototype),r.__CE_state=2,r.__CE_definition=void 0,V(n,r),r}return V(n,r=null===o?e.call(r,i):t.call(r,o,i)),r}function q(e){var t=e.message,n=e.sourceURL||e.fileName||"",r=e.line||e.lineNumber||0,i=e.column||e.columnNumber||0,o=void 0;void 0===ErrorEvent.prototype.initErrorEvent?o=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:r,colno:i,error:e}):((o=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,r),o.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===o.error&&Object.defineProperty(o,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(o),o.defaultPrevented||console.error(e)}function G(){var e=this;this.g=void 0,this.F=new Promise((function(t){e.l=t}))}function Y(e){var t=document;this.l=void 0,this.h=e,this.g=t,Z(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function Q(e){e.l&&e.l.disconnect()}function X(e){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(e){return e()},this.i=!1,this.v=[],this.h=e,this.D=e.I?new Y(e):void 0}function ee(e,t){if(!j(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(re(e,t))throw Error("A custom element with name '"+t+"' has already been defined.");if(e.A)throw Error("A custom element is already being defined.")}function te(e,t,n){var r;e.A=!0;try{var i=n.prototype;if(!(i instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var o=function(e){var t=i[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},a=o("connectedCallback"),s=o("disconnectedCallback"),c=o("adoptedCallback"),u=(r=o("attributeChangedCallback"))&&n.observedAttributes||[]}catch(e){throw e}finally{e.A=!1}return n={localName:t,constructorFunction:n,connectedCallback:a,disconnectedCallback:s,adoptedCallback:c,attributeChangedCallback:r,observedAttributes:u,constructionStack:[]},e.u.set(t,n),e.C.set(n.constructorFunction,n),n}function ne(e){if(!1!==e.i){e.i=!1;for(var t=[],n=e.v,r=new Map,i=0;i<n.length;i++)r.set(n[i],[]);for(Z(e.h,document,{upgrade:function(n){if(void 0===n.__CE_state){var i=n.localName,o=r.get(i);o?o.push(n):e.u.has(i)&&t.push(n)}}}),i=0;i<t.length;i++)J(e.h,t[i]);for(i=0;i<n.length;i++){for(var o=n[i],a=r.get(o),s=0;s<a.length;s++)J(e.h,a[s]);(o=e.B.get(o))&&o.resolve(void 0)}n.length=0}}function re(e,t){var n=e.u.get(t);if(n)return n;if(n=e.s.get(t)){e.s.delete(t);try{return te(e,t,n())}catch(e){q(e)}}}function ie(e,t,n){function r(t){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];i=[];for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&N(s)&&o.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(t.apply(this,r),r=0;r<o.length;r++)K(e,o[r]);if(N(this))for(r=0;r<i.length;r++)(o=i[r])instanceof Element&&W(e,o)}}void 0!==n.prepend&&(t.prepend=r(n.prepend)),void 0!==n.append&&(t.append=r(n.append))}U.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){q(e)}},U.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){q(e)}},U.prototype.attributeChangedCallback=function(e,t,n,r,i){var o=e.__CE_definition;if(o.attributeChangedCallback&&-1<o.observedAttributes.indexOf(t))try{o.attributeChangedCallback.call(e,t,n,r,i)}catch(e){q(e)}},G.prototype.resolve=function(e){if(this.g)throw Error("Already resolved.");this.g=e,this.l(e)},Y.prototype.G=function(e){var t=this.g.readyState;for("interactive"!==t&&"complete"!==t||Q(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,r=0;r<n.length;r++)Z(this.h,n[r])},X.prototype.H=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");ee(this,e),this.s.set(e,t),this.v.push(e),this.i||(this.i=!0,this.o((function(){return ne(n)})))},X.prototype.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");ee(this,e),te(this,e,t),this.v.push(e),this.i||(this.i=!0,this.o((function(){return ne(n)})))},X.prototype.upgrade=function(e){Z(this.h,e)},X.prototype.get=function(e){if(e=re(this,e))return e.constructorFunction},X.prototype.whenDefined=function(e){if(!j(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.B.get(e);if(t)return t.F;t=new G,this.B.set(e,t);var n=this.u.has(e)||this.s.has(e);return e=-1===this.v.indexOf(e),n&&e&&t.resolve(void 0),t.F},X.prototype.polyfillWrapFlushCallback=function(e){this.D&&Q(this.D);var t=this.o;this.o=function(n){return e((function(){return t(n)}))}},window.CustomElementRegistry=X,X.prototype.define=X.prototype.define,X.prototype.upgrade=X.prototype.upgrade,X.prototype.get=X.prototype.get,X.prototype.whenDefined=X.prototype.whenDefined,X.prototype.polyfillDefineLazy=X.prototype.H,X.prototype.polyfillWrapFlushCallback=X.prototype.polyfillWrapFlushCallback;var oe={},ae=window.customElements;function se(){var M=new U;!function(t){function n(){var n=this.constructor,r=document.__CE_registry.C.get(n);if(!r)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var i=r.constructionStack;if(0===i.length)return i=e.call(document,r.localName),Object.setPrototypeOf(i,n.prototype),i.__CE_state=1,i.__CE_definition=r,V(t,i),i;var o=i.length-1,a=i[o];if(a===oe)throw Error("Failed to construct '"+r.localName+"': This element was already constructed.");return i[o]=oe,Object.setPrototypeOf(a,n.prototype),V(t,a),a}n.prototype=T.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:n}),window.HTMLElement=n}(M),function(e){Document.prototype.createElement=function(t){return $(e,this,t,null)},Document.prototype.importNode=function(t,r){return t=n.call(this,t,!!r),this.__CE_registry?Z(e,t):z(e,t),t},Document.prototype.createElementNS=function(t,n){return $(e,this,n,t)},ie(e,Document.prototype,{prepend:r,append:i})}(M),ie(M,DocumentFragment.prototype,{prepend:o,append:a}),function(e){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var r=void 0;if(this.firstChild){var i=this.childNodes,o=i.length;if(0<o&&N(this)){r=Array(o);for(var a=0;a<o;a++)r[a]=i[a]}}if(n.set.call(this,t),r)for(t=0;t<r.length;t++)K(e,r[t])}}})}Node.prototype.insertBefore=function(t,n){if(t instanceof DocumentFragment){var r=H(t);if(t=u.call(this,t,n),N(this))for(n=0;n<r.length;n++)W(e,r[n]);return t}return r=t instanceof Element&&N(t),n=u.call(this,t,n),r&&K(e,t),N(this)&&W(e,t),n},Node.prototype.appendChild=function(t){if(t instanceof DocumentFragment){var n=H(t);if(t=c.call(this,t),N(this))for(var r=0;r<n.length;r++)W(e,n[r]);return t}return n=t instanceof Element&&N(t),r=c.call(this,t),n&&K(e,t),N(this)&&W(e,t),r},Node.prototype.cloneNode=function(t){return t=s.call(this,!!t),this.ownerDocument.__CE_registry?Z(e,t):z(e,t),t},Node.prototype.removeChild=function(t){var n=t instanceof Element&&N(t),r=l.call(this,t);return n&&K(e,t),r},Node.prototype.replaceChild=function(t,n){if(t instanceof DocumentFragment){var r=H(t);if(t=d.call(this,t,n),N(this))for(K(e,n),n=0;n<r.length;n++)W(e,r[n]);return t}r=t instanceof Element&&N(t);var i=d.call(this,t,n),o=N(this);return o&&K(e,n),r&&K(e,t),o&&W(e,t),i},h&&h.get?t(Node.prototype,h):function(e,t){e.j=!0,e.m.push(t)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)l.call(this,this.firstChild);null!=e&&""!==e&&c.call(this,document.createTextNode(e))}})}))}(M),function(e){function n(t,n){Object.defineProperty(t,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){var r=this,i=void 0;if(N(this)&&(i=[],B(e,this,(function(e){e!==r&&i.push(e)}))),n.set.call(this,t),i)for(var o=0;o<i.length;o++){var a=i[o];1===a.__CE_state&&e.disconnectedCallback(a)}return this.ownerDocument.__CE_registry?Z(e,this):z(e,this),t}})}function r(t,n){t.insertAdjacentElement=function(t,r){var i=N(r);return t=n.call(this,t,r),i&&K(e,r),N(t)&&W(e,r),t}}function i(t,n){function r(t,n){for(var r=[];t!==n;t=t.nextSibling)r.push(t);for(n=0;n<r.length;n++)Z(e,r[n])}t.insertAdjacentHTML=function(e,t){if("beforebegin"===(e=e.toLowerCase())){var i=this.previousSibling;n.call(this,e,t),r(i||this.parentNode.firstChild,this)}else if("afterbegin"===e)i=this.firstChild,n.call(this,e,t),r(this.firstChild,i);else if("beforeend"===e)i=this.lastChild,n.call(this,e,t),r(i||this.firstChild,null);else{if("afterend"!==e)throw new SyntaxError("The value provided ("+String(e)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");i=this.nextSibling,n.call(this,e,t),r(this.nextSibling,i)}}}f&&(Element.prototype.attachShadow=function(t){if(t=f.call(this,t),e.j&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.m.length;n++)e.m[n](t)}return this.__CE_shadowRoot=t}),p&&p.get?n(Element.prototype,p):O&&O.get?n(HTMLElement.prototype,O):function(e,t){e.j=!0,e.g.push(t)}(e,(function(e){n(e,{enumerable:!0,configurable:!0,get:function(){return s.call(this,!0).innerHTML},set:function(e){var n="template"===this.localName,r=n?this.content:this,i=t.call(document,this.namespaceURI,this.localName);for(i.innerHTML=e;0<r.childNodes.length;)l.call(r,r.childNodes[0]);for(e=n?i.content:i;0<e.childNodes.length;)c.call(r,e.childNodes[0])}})})),Element.prototype.setAttribute=function(t,n){if(1!==this.__CE_state)return y.call(this,t,n);var r=m.call(this,t);y.call(this,t,n),n=m.call(this,t),e.attributeChangedCallback(this,t,r,n,null)},Element.prototype.setAttributeNS=function(t,n,r){if(1!==this.__CE_state)return w.call(this,t,n,r);var i=v.call(this,t,n);w.call(this,t,n,r),r=v.call(this,t,n),e.attributeChangedCallback(this,n,i,r,t)},Element.prototype.removeAttribute=function(t){if(1!==this.__CE_state)return g.call(this,t);var n=m.call(this,t);g.call(this,t),null!==n&&e.attributeChangedCallback(this,t,n,null,null)},Element.prototype.removeAttributeNS=function(t,n){if(1!==this.__CE_state)return b.call(this,t,n);var r=v.call(this,t,n);b.call(this,t,n);var i=v.call(this,t,n);r!==i&&e.attributeChangedCallback(this,n,r,i,t)},x?r(HTMLElement.prototype,x):E&&r(Element.prototype,E),D?i(HTMLElement.prototype,D):S&&i(Element.prototype,S),ie(e,Element.prototype,{prepend:A,append:_}),function(e){function t(t){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];i=[];for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&N(s)&&o.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(t.apply(this,r),r=0;r<o.length;r++)K(e,o[r]);if(N(this))for(r=0;r<i.length;r++)(o=i[r])instanceof Element&&W(e,o)}}var n=Element.prototype;void 0!==k&&(n.before=t(k)),void 0!==C&&(n.after=t(C)),void 0!==P&&(n.replaceWith=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];r=[];for(var i=[],o=0;o<n.length;o++){var a=n[o];if(a instanceof Element&&N(a)&&i.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(o=N(this),P.apply(this,n),n=0;n<i.length;n++)K(e,i[n]);if(o)for(K(e,this),n=0;n<r.length;n++)(i=r[n])instanceof Element&&W(e,i)}),void 0!==I&&(n.remove=function(){var t=N(this);I.call(this),t&&K(e,this)})}(e)}(M),M=new X(M),document.__CE_registry=M,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:M})}ae&&!ae.forcePolyfill&&"function"==typeof ae.define&&"function"==typeof ae.get||se(),window.__CE_installPolyfill=se}).call(self)},6392:()=>{window.performance=window.performance||!1,[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((e=>{Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})),[HTMLElement.prototype].forEach((e=>{if(Object.prototype.hasOwnProperty.call(e,"addEventListener"))return;const t=e.addEventListener;Object.defineProperty(e,"addEventListener",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(this,n)}})})),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){const e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((e=>{const n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))})),this.appendChild(t)}})}))},8924:(e,t,n)=>{"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.createElement(e);return Object.keys(t).forEach((e=>n.setAttribute(e,t[e]))),n}n.d(t,{BO:()=>a,hP:()=>i,yR:()=>s,z3:()=>r});const i=(e,t)=>{null==t||t.classList.toggle(e)};function o(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=`${e} `;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(n=".gallery-info__section"),n=n.concat(t?".truncate-text":".expand-text"),n}function a(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=document.querySelector(e);if(a&&a.querySelector(".expandable")){const e=a.querySelector(n),s=a.querySelector(t);[o(n,r,!0),o(t,r,!1)].forEach(((e,t)=>{document.querySelectorAll(e).forEach((e=>{e.setAttribute("data-ga-track",`${!0===r?"Galleries ":""}Caption - ${0===t?"Expand":"Reduce"}`)}))})),[s,e].forEach((t=>{t.hasAttribute("clickable")||(t.addEventListener("click",(()=>{i("hidden",s),i("hidden",e)})),t.setAttribute("clickable",""))}))}}const s=(e,t,n)=>{e&&e.classList[n](t)}},5521:(e,t,n)=>{"use strict";var r=n(7460);document.addEventListener("DOMContentLoaded",(()=>{r.Q.isE2E&&(window.isE2EBootstrapped=!0)}))},3398:(e,t,n)=>{const{checkIsIOS:r,checkIsMobile:i,checkIsTablet:o}=n(903),{userAgent:a}=navigator,s=i(a),c=o(a),u=r(a,window);e.exports={isMobile:s,isTablet:c,isIOS:u}},9555:(e,t,n)=>{"use strict";var r=n(7460),i=n(1741);function o(e){const t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie="notice_gdpr_prefs=; Path=/; Domain=.forbes.com; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",(0,i.LE)()||e?document.cookie=`notice_gdpr_prefs=0,1,2; Path=/; Domain=.forbes.com; expires=${t.toUTCString()};`:document.cookie=`notice_gdpr_prefs=0; Path=/; Domain=.forbes.com; expires=${t.toUTCString()};`}window.ketchStubsPreloaded=!0,(r.$p||r.Ur||r.a9)&&function(){window.ketchStubsPreloaded=!0,window.semaphore=window.semaphore||[],window.ketch=function(){window.semaphore.push(arguments)};var e=new URLSearchParams(document.location.search),t=e.has("property")?e.get("property"):"website_smart_tag",n=document.createElement("script");n.type="text/javascript",n.src="https://global.ketchcdn.com/web/v2/config/forbes/".concat(t,"/boot.js"),n.defer=n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}(),r.a9&&!i.Uu&&o(!0),(r.$p||r.Ur||r.a9)&&(window.semaphore.push(["onHideExperience",function(e){(r.$p||r.Ur||(0,i.PE)())&&"willNotShow"!==e&&(o(),window.location.reload())}]),window.semaphore.push(["onConsent",o]),(r.$p||r.Ur)&&(0,i.PE)()&&(window.semaphore.push(["onWillShowExperience",function(){const e=document.createElement("div");e.id="ketch-consent-overlay",e.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background-color:black;opacity:0.5;z-index:2000;";try{document.body.appendChild(e)}catch{console.log("error while appending overlay")}}]),window.semaphore.push(["onHideExperience",function(){const e=document.getElementById("ketch-consent-overlay");e&&e.remove()}])))},1741:(e,t,n)=>{"use strict";n.d(t,{LE:()=>a,PE:()=>s,Uu:()=>o});var r=n(7969);const i=()=>{var e;const{isEurope:t,isChina:n,isUsDpa:r}=(null===(e=window)||void 0===e?void 0:e.forbes)||{};return{isEurope:t,isChina:n,isUsDpa:r}},o=()=>"undefined"!=typeof window&&(0,r.getIsConsentCookieSet)(),a=()=>"undefined"!=typeof window&&"ready"===(0,r.getConsentState)(i()),s=()=>(0,r.checkJurisdictionCode)(i())},9285:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2152);const i=(e,t,n,i)=>{const o={eventCategory:n,eventAction:t,eventLabel:i};e.addEventListener(t,(()=>{(0,r.fireGAEvent)(o)}))}},9034:e=>{function t(){const e=[...document.querySelectorAll(".social-share__icon")];for(let t=0;t<e.length;t++){const n=e[t];n.onclick=e=>{e.preventDefault();const t=n.getAttribute("href");n.classList.contains("search-hidden-icon")||window.open(t,"","width=400,height=500,resizable=1")}}}function n(){const e=[...document.querySelectorAll(".social-share__arrow")];for(let t=0;t<e.length;t++){const n=e[t];n.onclick=()=>{window.outerWidth<=1024&&n.parentElement.classList.toggle("social-share--share-open")}}}document.addEventListener("DOMContentLoaded",(()=>{t(),n()})),e.exports={addHandlers:t,toggleIcons:n,checkArticleIsPremiumOrMasthead:function(){const e=window.forbes["simple-site"]||{};return"premium"===e.tracking.templateType||"masthead"===e.tracking.templateSubType}}},68:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fireGAEvent:()=>m,generateUniqueId:()=>w,getBbgTerm:()=>v,getFvid:()=>g,primeInviewEvent:()=>y,virtualTrack:()=>k});var r=n(4572),i=n(182),o=n(938),a=n(6754),s=n(3398),c=n(7460),u=n(8492),l=n(2152);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.trackingService=window.trackingService||new i.FbsTrackingService;const{trackingService:f}=window;let p;f.isEurope=c.$p,f.isChina=c.Ur,f.isUsDpa=c.a9;const m=l.fireGAEvent,y=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"scroll";if(!e)return;const r=new IntersectionObserver((e=>{e[0].isIntersecting&&(m({eventAction:n,eventLabel:t}),r.unobserve(e[0].target))}),{threshold:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1});r.observe(e)},g=()=>f.getOrCreateClientId(),v=()=>window.location.search.substr(1).split("&").find((e=>e.match(/(^|&)source=bloomberg($|&)/)))?"true":"false",w=()=>Date.now()+Math.random().toString(36).slice(2),b=e=>{if(!e.index)return"none";const t=s.isMobile?"mobile ":"";return/RKPEVDB|R8W03AS/g.test((0,a.getCookie)(document.cookie,"fbs-zephr-access")||"")&&-1!==["insights","ad","connoisseur"].indexOf(e.blogType)?`${t}subscriber stream`:e.startFromBrandvoice?e.index<4?`${t.trim()}recommend`:`${t.trim()}other`:[1,5,8].indexOf(e.index)>=0?e.ntvContentLineItemId?`${t.trim()}ad`:`${t}scheduler`:`${t.trim()}other`},E=()=>{const e=(0,a.getCookie)(document.cookie,"prospect-id");return e?e.slice(e.indexOf("=")+1):void 0},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{blogType:t="",index:n=0,ntvContentLineItemId:r="",startFromBrandvoice:i=null}=e;return"boolean"!=typeof i?"":[1,5,8].indexOf(n)>=0&&"ad"!==t&&!i&&!s.isMobile&&r?"true":"false"},A=(()=>{const e=window.PushlySDK;let t,n;if(e)t=(((e||{}).context||{}).user||{}).puuid,n=(((e||{}).context||{}).user||{}).isSubscribed();else{const{localStorage:e}=window;t=e.getItem("pushlyUserId"),n=e.getItem("pushlyOptInStatus")}return{pushlyUserId:t,pushlyOptInStatus:n}})(),_=async e=>{const t=(0,c.Ac)(),n={author:t.author||"none",site:t.siteSlug||"none",contribType:t.contribType||"none",bertieBadgeSlugs:t.bertieBadgeSlugs||"none",blogType:t.blogType||"none",brandVoice:t.brandVoice||"none",bvCategory:t.bvCategory||[],slot:t.slot||"none",bertie:t.bertie||"false",pageType:t.pageType||"none",DFPSite:s.isMobile?"fdcmobile":"fdc.forbes",DFPZone:t.dfpZone||"none",published:t.publishDate||"none",categories:t.categories||"none",edit:t.edit||"none",hashtags:t.hashtags||"none",naturalID:t.naturalID||"none",gamZone:t.gamZone||"none",pageNumber:`${t.pageNumber||"none"}`,pageTotal:`${t.pageTotal||"none"}`,section:t.section||"none",videoPlacement:t.videoLocation||"none",login:t.login||"none",trendingHashtags:t.hashtagsTrending||"none",heroImage:t.heroImage||"none",imageCount:"number"==typeof t.imageCount?t.imageCount.toString():"none",customPage:t.customPage||"none",primaryChannel:t.primaryChannel||"none",primarySection:t.primarySection||"none",bvContentSource:t.brandVoice&&t.bvContentSource||"none",bvLeftRailHeadline:b(t),streamPosition:"number"==typeof t.streamPosition?t.streamPosition:"none",DFPLineItemID:t.ntvContentLineItemId||"none",bvProgramType:t.bvProgramType||"none",coreBrands:t.coreBrands||"none",contribDivision:t.contribDivision||"none",nonBVLeftRailAd:S(t)||"none",insights:t.insights||"none",coAuthorControl:t.coAuthorControl,newsKeywords:t.newsKeywords||"none",coAuthor:t.coAuthor||"none",channelNames:t.channelNames||"none",sectionNames:t.sectionNames||"none",cbSections:t.sections||"",cbPath:window.location.pathname,version:t.version||"",description:t.description||"",seniorContributor:t.seniorContributor||"none",paidContentType:t.paidContentType||"none",paidContentBrand:t.paidContentBrand||"none",premiumProfiles:t.premiumProfiles||"none",signedIn:(0,a.getCookie)(document.cookie,"_utp")?"signed-in":"not signed-in",adBlockerDetection:t.adBlockerDetection||void 0,templateType:t.templateType||"none",templateSubType:t.templateSubType||"none",firebaseId:((0,a.getCookie)(document.cookie,"firebaseAuthUser")||"").split("=")[1]||"",publicCompany:t.publicCompany||"none",stockTicker:t.stockTicker||"none",recircUnit:t.recircUnit||"none",salesforce:E(),shPost:p,isSponsored:t.isSponsored||!1,isRetracted:t.isRetracted||!1,entitySegments:(t.entitySegments||[]).join(",")||"none",testName:"",testVariant:"",ip:(window.forbes.fingerPrint||{}).ip,ispName:(window.forbes.fingerPrint||{}).ispName,isProd:c.BB,swimLane:c.NH,pushlyUserId:A.pushlyUserId||"",pushlyOptInStatus:A.pushlyOptInStatus||"false",randId:((window.forbes||{})["simple-site"]||{}).randId,naturalIdVersion:t.naturalIdVersion||"none",resourceId:t.resourceId,contentPaywall:t.contentPaywall,categoryId:t.categoryId,isE2E:c.ie};if(e&&(n.event="analyticsVPV",n.virtualPage="true",n.cbTitle=t.title||""),0===t.streamPosition){const e=await(0,u.F5)();n.testName=e?"RecircUnit":"",n.testVariant=e}return window.countryCode&&(n.countryCode=window.countryCode),(()=>{window.fbsCordial=window.fbsCordial||new o.Z;const e=new URLSearchParams(window.location.search).get("cdlcid");e?localStorage.setItem("contactID",e):window.fbsCordial.getUserCordialData().then((e=>{e&&localStorage.setItem("contactID",e.cID||"")}))})(),n.cdlcid=localStorage.getItem("contactID")||"",n},k=e=>{_(e).then((t=>{f.track(t,e)}))},{"simple-site":{adZone:C="",isPreview:P=!1,tracking:{blogType:I=""}}={}}=window.forbes||{};P||(C.indexOf("article")>=0&&(window.forbes["simple-site"].tracking=h(h({},window.forbes["simple-site"].tracking),{},{startFromBrandvoice:"ad"===I})),window.geolocationInit||(window.geolocationInit=!0,(e=>{const t=c.D0?"/simple-data/geolocation":"https://geolocation.forbes.com/json/";fetch(t,{method:"POST"}).then((e=>e.json())).then((e=>{const t=e&&e["client.geo.country_code"]||"US",n="US"===t?t:"INTL";window.__region=n,window.countryCode=t,p=e["client.geo.encrypted_postal_code"],window.forbes.fingerPrint={ip:e["client.encrypted_ip"],ispName:e["client.as.encrypted_name"]}})).catch((e=>{window.__region="",console.error("Geolocation fetch error: ",e)})).then((()=>{const t=new CustomEvent("geo-fetch-finished");document.dispatchEvent(t),_(e).then((e=>{f.track(e,!0)}))}))})()))},2152:(e,t,n)=>{var r=n(8416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a=e=>{const{event:t="analyticsEvent",eventCategory:n="Template Area Interaction",eventAction:r="",eventLabel:i=""}=e;(window.dataLayer||[])[0]?window.dataLayer.push({event:t,"event category":n,"event action":r,"event label":i}):setTimeout((()=>{a(e)}),100)},s={track:(e,t,n)=>{a({eventCategory:e,eventAction:t,eventLabel:n})},category:"Template Area Interaction",action:"click",label:"newsletter-subscribe-navigation"};e.exports={fireGAEvent:a,getIsNewsletterPage:()=>"newsletters"===window.location.pathname.split("/")[1],updateTrackingData:e=>{window.forbes||(window.forbes={}),window.forbes["simple-site"]||(window.forbes["simple-site"]={}),window.forbes["simple-site"].tracking=o(o({},window.forbes["simple-site"].tracking||{}),e)},newsLetterSubscribeTracking:s}},6754:(e,t,n)=>{const{getCookie:r,getCookieValue:i}=n(903);e.exports={expiresMidnight:()=>{const e=new Date;return e.setUTCHours(24,0,0,0),e},createCookie:function(){return`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}=${arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}; expires=${arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()}; path=/; domain=forbes.com`},getCookie:r,getCookieValue:i,getCookieClientId:function(){return(arguments.length>1?arguments[1]:void 0)?"00000000000000000000000000000000000":i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","client_id")}}},9490:(e,t)=>{"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t,n){return s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i},s.apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)},c(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}var d=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(c(Error)),h=function(e){function t(t){return e.call(this,"Invalid DateTime: "+t.toMessage())||this}return i(t,e),t}(d),f=function(e){function t(t){return e.call(this,"Invalid Interval: "+t.toMessage())||this}return i(t,e),t}(d),p=function(e){function t(t){return e.call(this,"Invalid Duration: "+t.toMessage())||this}return i(t,e),t}(d),m=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(d),y=function(e){function t(t){return e.call(this,"Invalid unit "+t)||this}return i(t,e),t}(d),g=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(d),v=function(e){function t(){return e.call(this,"Zone is an abstract class")||this}return i(t,e),t}(d),w="numeric",b="short",E="long",S={year:w,month:w,day:w},A={year:w,month:b,day:w},_={year:w,month:b,day:w,weekday:b},k={year:w,month:E,day:w},C={year:w,month:E,day:w,weekday:E},P={hour:w,minute:w},I={hour:w,minute:w,second:w},T={hour:w,minute:w,second:w,timeZoneName:b},O={hour:w,minute:w,second:w,timeZoneName:E},x={hour:w,minute:w,hour12:!1},D={hour:w,minute:w,second:w,hour12:!1},M={hour:w,minute:w,second:w,hour12:!1,timeZoneName:b},j={hour:w,minute:w,second:w,hour12:!1,timeZoneName:E},L={year:w,month:w,day:w,hour:w,minute:w},N={year:w,month:w,day:w,hour:w,minute:w,second:w},H={year:w,month:b,day:w,hour:w,minute:w},F={year:w,month:b,day:w,hour:w,minute:w,second:w},R={year:w,month:b,day:w,weekday:b,hour:w,minute:w},U={year:w,month:E,day:w,hour:w,minute:w,timeZoneName:b},B={year:w,month:E,day:w,hour:w,minute:w,second:w,timeZoneName:b},z={year:w,month:E,day:w,weekday:E,hour:w,minute:w,timeZoneName:E},V={year:w,month:E,day:w,weekday:E,hour:w,minute:w,second:w,timeZoneName:E};function W(e){return void 0===e}function K(e){return"number"==typeof e}function Z(e){return"number"==typeof e&&e%1==0}function J(){try{return"undefined"!=typeof Intl&&Intl.DateTimeFormat}catch(e){return!1}}function $(){return!W(Intl.DateTimeFormat.prototype.formatToParts)}function q(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function G(e,t,n){if(0!==e.length)return e.reduce((function(e,r){var i=[t(r),r];return e&&n(e[0],i[0])===e[0]?e:i}),null)[1]}function Y(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})}function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function X(e,t,n){return Z(e)&&e>=t&&e<=n}function ee(e,t){void 0===t&&(t=2);var n=e<0?"-":"",r=n?-1*e:e;return""+n+(r.toString().length<t?("0".repeat(t)+r).slice(-t):r.toString())}function te(e){return W(e)||null===e||""===e?void 0:parseInt(e,10)}function ne(e){if(!W(e)&&null!==e&&""!==e){var t=1e3*parseFloat("0."+e);return Math.floor(t)}}function re(e,t,n){void 0===n&&(n=!1);var r=Math.pow(10,t);return(n?Math.trunc:Math.round)(e*r)/r}function ie(e){return e%4==0&&(e%100!=0||e%400==0)}function oe(e){return ie(e)?366:365}function ae(e,t){var n,r=(n=t-1)-12*Math.floor(n/12)+1;return 2===r?ie(e+(t-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function se(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(t.getUTCFullYear()-1900),+t}function ce(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===t||3===r?53:52}function ue(e){return e>99?e:e>60?1900+e:2e3+e}function le(e,t,n,r){void 0===r&&(r=null);var i=new Date(e),o={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);var a=Object.assign({timeZoneName:t},o),s=J();if(s&&$()){var c=new Intl.DateTimeFormat(n,a).formatToParts(i).find((function(e){return"timezonename"===e.type.toLowerCase()}));return c?c.value:null}if(s){var u=new Intl.DateTimeFormat(n,o).format(i);return new Intl.DateTimeFormat(n,a).format(i).substring(u.length).replace(/^[, \u200e]+/,"")}return null}function de(e,t){var n=parseInt(e,10);Number.isNaN(n)&&(n=0);var r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function he(e){var t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new g("Invalid unit value "+e);return t}function fe(e,t,n){var r={};for(var i in e)if(Q(e,i)){if(n.indexOf(i)>=0)continue;var o=e[i];if(null==o)continue;r[t(i)]=he(o)}return r}function pe(e,t){var n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return""+i+ee(n,2)+":"+ee(r,2);case"narrow":return""+i+n+(r>0?":"+r:"");case"techie":return""+i+ee(n,2)+ee(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function me(e){return Y(e,["hour","minute","second","millisecond"])}var ye=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/;function ge(e){return JSON.stringify(e,Object.keys(e).sort())}var ve=["January","February","March","April","May","June","July","August","September","October","November","December"],we=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],be=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ee(e){switch(e){case"narrow":return[].concat(be);case"short":return[].concat(we);case"long":return[].concat(ve);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Se=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ae=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_e=["M","T","W","T","F","S","S"];function ke(e){switch(e){case"narrow":return[].concat(_e);case"short":return[].concat(Ae);case"long":return[].concat(Se);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Ce=["AM","PM"],Pe=["Before Christ","Anno Domini"],Ie=["BC","AD"],Te=["B","A"];function Oe(e){switch(e){case"narrow":return[].concat(Te);case"short":return[].concat(Ie);case"long":return[].concat(Pe);default:return null}}function xe(e,t){for(var n,r="",i=l(e);!(n=i()).done;){var o=n.value;o.literal?r+=o.val:r+=t(o.val)}return r}var De={D:S,DD:A,DDD:k,DDDD:C,t:P,tt:I,ttt:T,tttt:O,T:x,TT:D,TTT:M,TTTT:j,f:L,ff:H,fff:U,ffff:z,F:N,FF:F,FFF:B,FFFF:V},Me=function(){function e(e,t){this.opts=t,this.loc=e,this.systemLoc=null}e.create=function(t,n){return void 0===n&&(n={}),new e(t,n)},e.parseFormat=function(e){for(var t=null,n="",r=!1,i=[],o=0;o<e.length;o++){var a=e.charAt(o);"'"===a?(n.length>0&&i.push({literal:r,val:n}),t=null,n="",r=!r):r||a===t?n+=a:(n.length>0&&i.push({literal:!1,val:n}),n=a,t=a)}return n.length>0&&i.push({literal:r,val:n}),i},e.macroTokenToFormatOpts=function(e){return De[e]};var t=e.prototype;return t.formatWithSystemDefault=function(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,Object.assign({},this.opts,t)).format()},t.formatDateTime=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).format()},t.formatDateTimeParts=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).formatToParts()},t.resolvedOptions=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).resolvedOptions()},t.num=function(e,t){if(void 0===t&&(t=0),this.opts.forceSimple)return ee(e,t);var n=Object.assign({},this.opts);return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)},t.formatDateTimeFromString=function(t,n){var r=this,i="en"===this.loc.listingMode(),o=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar&&$(),a=function(e,n){return r.loc.extract(t,e,n)},s=function(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},c=function(e,n){return i?function(e,t){return Ee(t)[e.month-1]}(t,e):a(n?{month:e}:{month:e,day:"numeric"},"month")},u=function(e,n){return i?function(e,t){return ke(t)[e.weekday-1]}(t,e):a(n?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},l=function(e){return i?function(e,t){return Oe(t)[e.year<0?0:1]}(t,e):a({era:e},"era")};return xe(e.parseFormat(n),(function(n){switch(n){case"S":return r.num(t.millisecond);case"u":case"SSS":return r.num(t.millisecond,3);case"s":return r.num(t.second);case"ss":return r.num(t.second,2);case"m":return r.num(t.minute);case"mm":return r.num(t.minute,2);case"h":return r.num(t.hour%12==0?12:t.hour%12);case"hh":return r.num(t.hour%12==0?12:t.hour%12,2);case"H":return r.num(t.hour);case"HH":return r.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:r.opts.allowZ});case"ZZ":return s({format:"short",allowZ:r.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:r.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:r.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:r.loc.locale});case"z":return t.zoneName;case"a":return i?function(e){return Ce[e.hour<12?0:1]}(t):a({hour:"numeric",hour12:!0},"dayperiod");case"d":return o?a({day:"numeric"},"day"):r.num(t.day);case"dd":return o?a({day:"2-digit"},"day"):r.num(t.day,2);case"c":case"E":return r.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return o?a({month:"numeric",day:"numeric"},"month"):r.num(t.month);case"LL":return o?a({month:"2-digit",day:"numeric"},"month"):r.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return o?a({month:"numeric"},"month"):r.num(t.month);case"MM":return o?a({month:"2-digit"},"month"):r.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return o?a({year:"numeric"},"year"):r.num(t.year);case"yy":return o?a({year:"2-digit"},"year"):r.num(t.year.toString().slice(-2),2);case"yyyy":return o?a({year:"numeric"},"year"):r.num(t.year,4);case"yyyyyy":return o?a({year:"numeric"},"year"):r.num(t.year,6);case"G":return l("short");case"GG":return l("long");case"GGGGG":return l("narrow");case"kk":return r.num(t.weekYear.toString().slice(-2),2);case"kkkk":return r.num(t.weekYear,4);case"W":return r.num(t.weekNumber);case"WW":return r.num(t.weekNumber,2);case"o":return r.num(t.ordinal);case"ooo":return r.num(t.ordinal,3);case"q":return r.num(t.quarter);case"qq":return r.num(t.quarter,2);case"X":return r.num(Math.floor(t.ts/1e3));case"x":return r.num(t.ts);default:return function(n){var i=e.macroTokenToFormatOpts(n);return i?r.formatWithSystemDefault(t,i):n}(n)}}))},t.formatDurationFromString=function(t,n){var r,i=this,o=function(e){switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},a=e.parseFormat(n),s=a.reduce((function(e,t){var n=t.literal,r=t.val;return n?e:e.concat(r)}),[]),c=t.shiftTo.apply(t,s.map(o).filter((function(e){return e})));return xe(a,(r=c,function(e){var t=o(e);return t?i.num(r.get(t),e.length):e}))},e}(),je=function(){function e(e,t){this.reason=e,this.explanation=t}return e.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),Le=function(){function e(){}var t=e.prototype;return t.offsetName=function(e,t){throw new v},t.formatOffset=function(e,t){throw new v},t.offset=function(e){throw new v},t.equals=function(e){throw new v},r(e,[{key:"type",get:function(){throw new v}},{key:"name",get:function(){throw new v}},{key:"universal",get:function(){throw new v}},{key:"isValid",get:function(){throw new v}}]),e}(),Ne=null,He=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.offsetName=function(e,t){return le(e,t.format,t.locale)},n.formatOffset=function(e,t){return pe(this.offset(e),t)},n.offset=function(e){return-new Date(e).getTimezoneOffset()},n.equals=function(e){return"local"===e.type},r(t,[{key:"type",get:function(){return"local"}},{key:"name",get:function(){return J()?(new Intl.DateTimeFormat).resolvedOptions().timeZone:"local"}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===Ne&&(Ne=new t),Ne}}]),t}(Le),Fe=RegExp("^"+ye.source+"$"),Re={},Ue={year:0,month:1,day:2,hour:3,minute:4,second:5},Be={},ze=function(e){function t(n){var r;return(r=e.call(this)||this).zoneName=n,r.valid=t.isValidZone(n),r}i(t,e),t.create=function(e){return Be[e]||(Be[e]=new t(e)),Be[e]},t.resetCache=function(){Be={},Re={}},t.isValidSpecifier=function(e){return!(!e||!e.match(Fe))},t.isValidZone=function(e){try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}},t.parseGMTOffset=function(e){if(e){var t=e.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i);if(t)return-60*parseInt(t[1])}return null};var n=t.prototype;return n.offsetName=function(e,t){return le(e,t.format,t.locale,this.name)},n.formatOffset=function(e,t){return pe(this.offset(e),t)},n.offset=function(e){var t=new Date(e);if(isNaN(t))return NaN;var n,r=(n=this.name,Re[n]||(Re[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Re[n]),i=r.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var o=n[i],a=o.type,s=o.value,c=Ue[a];W(c)||(r[c]=parseInt(s,10))}return r}(r,t):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n),i=r[1],o=r[2];return[r[3],i,o,r[4],r[5],r[6]]}(r,t),o=i[0],a=i[1],s=i[2],c=i[3],u=+t,l=u%1e3;return(se({year:o,month:a,day:s,hour:24===c?0:c,minute:i[4],second:i[5],millisecond:0})-(u-=l>=0?l:1e3+l))/6e4},n.equals=function(e){return"iana"===e.type&&e.name===this.name},r(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Le),Ve=null,We=function(e){function t(t){var n;return(n=e.call(this)||this).fixed=t,n}i(t,e),t.instance=function(e){return 0===e?t.utcInstance:new t(e)},t.parseSpecifier=function(e){if(e){var n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new t(de(n[1],n[2]))}return null},r(t,null,[{key:"utcInstance",get:function(){return null===Ve&&(Ve=new t(0)),Ve}}]);var n=t.prototype;return n.offsetName=function(){return this.name},n.formatOffset=function(e,t){return pe(this.fixed,t)},n.offset=function(){return this.fixed},n.equals=function(e){return"fixed"===e.type&&e.fixed===this.fixed},r(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+pe(this.fixed,"narrow")}},{key:"universal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}]),t}(Le),Ke=function(e){function t(t){var n;return(n=e.call(this)||this).zoneName=t,n}i(t,e);var n=t.prototype;return n.offsetName=function(){return null},n.formatOffset=function(){return""},n.offset=function(){return NaN},n.equals=function(){return!1},r(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Le);function Ze(e,t){var n;if(W(e)||null===e)return t;if(e instanceof Le)return e;if("string"==typeof e){var r=e.toLowerCase();return"local"===r?t:"utc"===r||"gmt"===r?We.utcInstance:null!=(n=ze.parseGMTOffset(e))?We.instance(n):ze.isValidSpecifier(r)?ze.create(e):We.parseSpecifier(r)||new Ke(e)}return K(e)?We.instance(e):"object"==typeof e&&e.offset&&"number"==typeof e.offset?e:new Ke(e)}var Je=function(){return Date.now()},$e=null,qe=null,Ge=null,Ye=null,Qe=!1,Xe=function(){function e(){}return e.resetCaches=function(){ut.resetCache(),ze.resetCache()},r(e,null,[{key:"now",get:function(){return Je},set:function(e){Je=e}},{key:"defaultZoneName",get:function(){return e.defaultZone.name},set:function(e){$e=e?Ze(e):null}},{key:"defaultZone",get:function(){return $e||He.instance}},{key:"defaultLocale",get:function(){return qe},set:function(e){qe=e}},{key:"defaultNumberingSystem",get:function(){return Ge},set:function(e){Ge=e}},{key:"defaultOutputCalendar",get:function(){return Ye},set:function(e){Ye=e}},{key:"throwOnInvalid",get:function(){return Qe},set:function(e){Qe=e}}]),e}(),et={};function tt(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=et[n];return r||(r=new Intl.DateTimeFormat(e,t),et[n]=r),r}var nt={},rt={};var it=null;function ot(e,t,n,r,i){var o=e.listingMode(n);return"error"===o?null:"en"===o?r(t):i(t)}var at=function(){function e(e,t,n){if(this.padTo=n.padTo||0,this.floor=n.floor||!1,!t&&J()){var r={useGrouping:!1};n.padTo>0&&(r.minimumIntegerDigits=n.padTo),this.inf=function(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=nt[n];return r||(r=new Intl.NumberFormat(e,t),nt[n]=r),r}(e,r)}}return e.prototype.format=function(e){if(this.inf){var t=this.floor?Math.floor(e):e;return this.inf.format(t)}return ee(this.floor?Math.floor(e):re(e,3),this.padTo)},e}(),st=function(){function e(e,t,n){var r;if(this.opts=n,this.hasIntl=J(),e.zone.universal&&this.hasIntl){var i=e.offset/60*-1,o=i>=0?"Etc/GMT+"+i:"Etc/GMT"+i,a=ze.isValidZone(o);0!==e.offset&&a?(r=o,this.dt=e):(r="UTC",n.timeZoneName?this.dt=e:this.dt=0===e.offset?e:sr.fromMillis(e.ts+60*e.offset*1e3))}else"local"===e.zone.type?this.dt=e:(this.dt=e,r=e.zone.name);if(this.hasIntl){var s=Object.assign({},this.opts);r&&(s.timeZone=r),this.dtf=tt(t,s)}}var t=e.prototype;return t.format=function(){if(this.hasIntl)return this.dtf.format(this.dt.toJSDate());var e=function(e){var t="EEEE, LLLL d, yyyy, h:mm a";switch(ge(Y(e,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"]))){case ge(S):return"M/d/yyyy";case ge(A):return"LLL d, yyyy";case ge(_):return"EEE, LLL d, yyyy";case ge(k):return"LLLL d, yyyy";case ge(C):return"EEEE, LLLL d, yyyy";case ge(P):return"h:mm a";case ge(I):return"h:mm:ss a";case ge(T):case ge(O):return"h:mm a";case ge(x):return"HH:mm";case ge(D):return"HH:mm:ss";case ge(M):case ge(j):return"HH:mm";case ge(L):return"M/d/yyyy, h:mm a";case ge(H):return"LLL d, yyyy, h:mm a";case ge(U):return"LLLL d, yyyy, h:mm a";case ge(z):return t;case ge(N):return"M/d/yyyy, h:mm:ss a";case ge(F):return"LLL d, yyyy, h:mm:ss a";case ge(R):return"EEE, d LLL yyyy, h:mm a";case ge(B):return"LLLL d, yyyy, h:mm:ss a";case ge(V):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return t}}(this.opts),t=ut.create("en-US");return Me.create(t).formatDateTimeFromString(this.dt,e)},t.formatToParts=function(){return this.hasIntl&&$()?this.dtf.formatToParts(this.dt.toJSDate()):[]},t.resolvedOptions=function(){return this.hasIntl?this.dtf.resolvedOptions():{locale:"en-US",numberingSystem:"latn",outputCalendar:"gregory"}},e}(),ct=function(){function e(e,t,n){this.opts=Object.assign({style:"long"},n),!t&&q()&&(this.rtf=function(e,t){void 0===t&&(t={});var n=t,r=(n.base,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["base"])),i=JSON.stringify([e,r]),o=rt[i];return o||(o=new Intl.RelativeTimeFormat(e,t),rt[i]=o),o}(e,n))}var t=e.prototype;return t.format=function(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n,r){void 0===n&&(n="always"),void 0===r&&(r=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&o){var a="days"===e;switch(t){case 1:return a?"tomorrow":"next "+i[e][0];case-1:return a?"yesterday":"last "+i[e][0];case 0:return a?"today":"this "+i[e][0]}}var s=Object.is(t,-0)||t<0,c=Math.abs(t),u=1===c,l=i[e],d=r?u?l[1]:l[2]||l[1]:u?i[e][0]:e;return s?c+" "+d+" ago":"in "+c+" "+d}(t,e,this.opts.numeric,"long"!==this.opts.style)},t.formatToParts=function(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]},e}(),ut=function(){function e(e,t,n,r){var i=function(e){var t=e.indexOf("-u-");if(-1===t)return[e];var n,r=e.substring(0,t);try{n=tt(e).resolvedOptions()}catch(e){n=tt(r).resolvedOptions()}var i=n;return[r,i.numberingSystem,i.calendar]}(e),o=i[0],a=i[1],s=i[2];this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=n||s||null,this.intl=function(e,t,n){return J()?n||t?(e+="-u",n&&(e+="-ca-"+n),t&&(e+="-nu-"+t),e):e:[]}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}e.fromOpts=function(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)},e.create=function(t,n,r,i){void 0===i&&(i=!1);var o=t||Xe.defaultLocale;return new e(o||(i?"en-US":function(){if(it)return it;if(J()){var e=(new Intl.DateTimeFormat).resolvedOptions().locale;return it=e&&"und"!==e?e:"en-US"}return it="en-US"}()),n||Xe.defaultNumberingSystem,r||Xe.defaultOutputCalendar,o)},e.resetCache=function(){it=null,et={},nt={},rt={}},e.fromObject=function(t){var n=void 0===t?{}:t,r=n.locale,i=n.numberingSystem,o=n.outputCalendar;return e.create(r,i,o)};var t=e.prototype;return t.listingMode=function(e){void 0===e&&(e=!0);var t=J()&&$(),n=this.isEnglish(),r=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return t||n&&r||e?!t||n&&r?"en":"intl":"error"},t.clone=function(t){return t&&0!==Object.getOwnPropertyNames(t).length?e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this},t.redefaultToEN=function(e){return void 0===e&&(e={}),this.clone(Object.assign({},e,{defaultToEN:!0}))},t.redefaultToSystem=function(e){return void 0===e&&(e={}),this.clone(Object.assign({},e,{defaultToEN:!1}))},t.months=function(e,t,n){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!0),ot(this,e,n,Ee,(function(){var n=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return r.monthsCache[i][e]||(r.monthsCache[i][e]=function(e){for(var t=[],n=1;n<=12;n++){var r=sr.utc(2016,n,1);t.push(e(r))}return t}((function(e){return r.extract(e,n,"month")}))),r.monthsCache[i][e]}))},t.weekdays=function(e,t,n){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!0),ot(this,e,n,ke,(function(){var n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return r.weekdaysCache[i][e]||(r.weekdaysCache[i][e]=function(e){for(var t=[],n=1;n<=7;n++){var r=sr.utc(2016,11,13+n);t.push(e(r))}return t}((function(e){return r.extract(e,n,"weekday")}))),r.weekdaysCache[i][e]}))},t.meridiems=function(e){var t=this;return void 0===e&&(e=!0),ot(this,void 0,e,(function(){return Ce}),(function(){if(!t.meridiemCache){var e={hour:"numeric",hour12:!0};t.meridiemCache=[sr.utc(2016,11,13,9),sr.utc(2016,11,13,19)].map((function(n){return t.extract(n,e,"dayperiod")}))}return t.meridiemCache}))},t.eras=function(e,t){var n=this;return void 0===t&&(t=!0),ot(this,e,t,Oe,(function(){var t={era:e};return n.eraCache[e]||(n.eraCache[e]=[sr.utc(-40,1,1),sr.utc(2017,1,1)].map((function(e){return n.extract(e,t,"era")}))),n.eraCache[e]}))},t.extract=function(e,t,n){var r=this.dtFormatter(e,t).formatToParts().find((function(e){return e.type.toLowerCase()===n}));return r?r.value:null},t.numberFormatter=function(e){return void 0===e&&(e={}),new at(this.intl,e.forceSimple||this.fastNumbers,e)},t.dtFormatter=function(e,t){return void 0===t&&(t={}),new st(e,this.intl,t)},t.relFormatter=function(e){return void 0===e&&(e={}),new ct(this.intl,this.isEnglish(),e)},t.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||J()&&new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},r(e,[{key:"fastNumbers",get:function(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||J()&&"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}}]),e}();function lt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e+t.source}),"");return RegExp("^"+r+"$")}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){var r=t[0],i=t[1],o=t[2],a=n(e,o),s=a[0],c=a[1],u=a[2];return[Object.assign(r,s),i||c,u]}),[{},null,1]).slice(0,2)}}function ht(e){if(null==e)return[null,null];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i],s=a[0],c=a[1],u=s.exec(e);if(u)return c(u)}return[null,null]}function ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r,i={};for(r=0;r<t.length;r++)i[t[r]]=te(e[n+r]);return[i,null,n+r]}}var pt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,yt=RegExp(""+mt.source+pt.source+"?"),gt=RegExp("(?:T"+yt.source+")?"),vt=ft("weekYear","weekNumber","weekDay"),wt=ft("year","ordinal"),bt=RegExp(mt.source+" ?(?:"+pt.source+"|("+ye.source+"))?"),Et=RegExp("(?: "+bt.source+")?");function St(e,t,n){var r=e[t];return W(r)?n:te(r)}function At(e,t){return[{year:St(e,t),month:St(e,t+1,1),day:St(e,t+2,1)},null,t+3]}function _t(e,t){return[{hours:St(e,t,0),minutes:St(e,t+1,0),seconds:St(e,t+2,0),milliseconds:ne(e[t+3])},null,t+4]}function kt(e,t){var n=!e[t]&&!e[t+1],r=de(e[t+1],e[t+2]);return[{},n?null:We.instance(r),t+3]}function Ct(e,t){return[{},e[t]?ze.create(e[t]):null,t+1]}var Pt=RegExp("^T?"+mt.source+"$"),It=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function Tt(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8],l="-"===t[0],d=c&&"-"===c[0],h=function(e,t){return void 0===t&&(t=!1),void 0!==e&&(t||e&&l)?-e:e};return[{years:h(te(n)),months:h(te(r)),weeks:h(te(i)),days:h(te(o)),hours:h(te(a)),minutes:h(te(s)),seconds:h(te(c),"-0"===c),milliseconds:h(ne(u),d)}]}var Ot={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function xt(e,t,n,r,i,o,a){var s={year:2===t.length?ue(te(t)):te(t),month:we.indexOf(n)+1,day:te(r),hour:te(i),minute:te(o)};return a&&(s.second=te(a)),e&&(s.weekday=e.length>3?Se.indexOf(e)+1:Ae.indexOf(e)+1),s}var Dt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Mt(e){var t,n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8],l=e[9],d=e[10],h=e[11],f=xt(n,o,i,r,a,s,c);return t=u?Ot[u]:l?0:de(d,h),[f,new We(t)]}var jt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Lt=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Nt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ht(e){var t=e[1],n=e[2],r=e[3];return[xt(t,e[4],r,n,e[5],e[6],e[7]),We.utcInstance]}function Ft(e){var t=e[1],n=e[2],r=e[3],i=e[4],o=e[5],a=e[6];return[xt(t,e[7],n,r,i,o,a),We.utcInstance]}var Rt=lt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,gt),Ut=lt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,gt),Bt=lt(/(\d{4})-?(\d{3})/,gt),zt=lt(yt),Vt=dt(At,_t,kt),Wt=dt(vt,_t,kt),Kt=dt(wt,_t,kt),Zt=dt(_t,kt),Jt=dt(_t),$t=lt(/(\d{4})-(\d\d)-(\d\d)/,Et),qt=lt(bt),Gt=dt(At,_t,kt,Ct),Yt=dt(_t,kt,Ct),Qt={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Xt=Object.assign({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},Qt),en=Object.assign({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},Qt),tn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],nn=tn.slice(0).reverse();function rn(e,t,n){void 0===n&&(n=!1);var r={values:n?t.values:Object.assign({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new an(r)}function on(e,t,n,r,i){var o=e[i][n],a=t[n]/o,s=Math.sign(a)!==Math.sign(r[i])&&0!==r[i]&&Math.abs(a)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(a):Math.trunc(a);r[i]+=s,t[n]-=s*o}var an=function(){function e(e){var t="longterm"===e.conversionAccuracy||!1;this.values=e.values,this.loc=e.loc||ut.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=t?en:Xt,this.isLuxonDuration=!0}e.fromMillis=function(t,n){return e.fromObject(Object.assign({milliseconds:t},n))},e.fromObject=function(t){if(null==t||"object"!=typeof t)throw new g("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new e({values:fe(t,e.normalizeUnit,["locale","numberingSystem","conversionAccuracy","zone"]),loc:ut.fromObject(t),conversionAccuracy:t.conversionAccuracy})},e.fromISO=function(t,n){var r=function(e){return ht(e,[It,Tt])}(t),i=r[0];if(i){var o=Object.assign(i,n);return e.fromObject(o)}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.fromISOTime=function(t,n){var r=function(e){return ht(e,[Pt,Jt])}(t),i=r[0];if(i){var o=Object.assign(i,n);return e.fromObject(o)}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new g("need to specify a reason the Duration is invalid");var r=t instanceof je?t:new je(t,n);if(Xe.throwOnInvalid)throw new p(r);return new e({invalid:r})},e.normalizeUnit=function(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new y(e);return t},e.isDuration=function(e){return e&&e.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(e,t){void 0===t&&(t={});var n=Object.assign({},t,{floor:!1!==t.round&&!1!==t.floor});return this.isValid?Me.create(this.loc,n).formatDurationFromString(this,e):"Invalid Duration"},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=Object.assign({},this.values);return e.includeConfig&&(t.conversionAccuracy=this.conversionAccuracy,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toISO=function(){if(!this.isValid)return null;var e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=re(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e},t.toISOTime=function(e){if(void 0===e&&(e={}),!this.isValid)return null;var t=this.toMillis();if(t<0||t>=864e5)return null;e=Object.assign({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e);var n=this.shiftTo("hours","minutes","seconds","milliseconds"),r="basic"===e.format?"hhmm":"hh:mm";e.suppressSeconds&&0===n.seconds&&0===n.milliseconds||(r+="basic"===e.format?"ss":":ss",e.suppressMilliseconds&&0===n.milliseconds||(r+=".SSS"));var i=n.toFormat(r);return e.includePrefix&&(i="T"+i),i},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(e){if(!this.isValid)return this;for(var t,n=sn(e),r={},i=l(tn);!(t=i()).done;){var o=t.value;(Q(n.values,o)||Q(this.values,o))&&(r[o]=n.get(o)+this.get(o))}return rn(this,{values:r},!0)},t.minus=function(e){if(!this.isValid)return this;var t=sn(e);return this.plus(t.negate())},t.mapUnits=function(e){if(!this.isValid)return this;for(var t={},n=0,r=Object.keys(this.values);n<r.length;n++){var i=r[n];t[i]=he(e(this.values[i],i))}return rn(this,{values:t},!0)},t.get=function(t){return this[e.normalizeUnit(t)]},t.set=function(t){return this.isValid?rn(this,{values:Object.assign(this.values,fe(t,e.normalizeUnit,[]))}):this},t.reconfigure=function(e){var t=void 0===e?{}:e,n=t.locale,r=t.numberingSystem,i=t.conversionAccuracy,o={loc:this.loc.clone({locale:n,numberingSystem:r})};return i&&(o.conversionAccuracy=i),rn(this,o)},t.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},t.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return function(e,t){nn.reduce((function(n,r){return W(t[r])?n:(n&&on(e,t,n,t,r),r)}),null)}(this.matrix,e),rn(this,{values:e},!0)},t.shiftTo=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!this.isValid)return this;if(0===n.length)return this;n=n.map((function(t){return e.normalizeUnit(t)}));for(var i,o,a={},s={},c=this.toObject(),u=l(tn);!(o=u()).done;){var d=o.value;if(n.indexOf(d)>=0){i=d;var h=0;for(var f in s)h+=this.matrix[f][d]*s[f],s[f]=0;K(c[d])&&(h+=c[d]);var p=Math.trunc(h);for(var m in a[d]=p,s[d]=h-p,c)tn.indexOf(m)>tn.indexOf(d)&&on(this.matrix,c,m,a,d)}else K(c[d])&&(s[d]=c[d])}for(var y in s)0!==s[y]&&(a[i]+=y===i?s[y]:s[y]/this.matrix[i][y]);return rn(this,{values:a},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var e={},t=0,n=Object.keys(this.values);t<n.length;t++){var r=n[t];e[r]=-this.values[r]}return rn(this,{values:e},!0)},t.equals=function(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(var t,n=l(tn);!(t=n()).done;){var r=t.value;if(i=this.values[r],o=e.values[r],!(void 0===i||0===i?void 0===o||0===o:i===o))return!1}var i,o;return!0},r(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}();function sn(e){if(K(e))return an.fromMillis(e);if(an.isDuration(e))return e;if("object"==typeof e)return an.fromObject(e);throw new g("Unknown duration argument "+e+" of type "+typeof e)}var cn="Invalid Interval";function un(e,t){return e&&e.isValid?t&&t.isValid?t<e?ln.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null:ln.invalid("missing or invalid end"):ln.invalid("missing or invalid start")}var ln=function(){function e(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new g("need to specify a reason the Interval is invalid");var r=t instanceof je?t:new je(t,n);if(Xe.throwOnInvalid)throw new f(r);return new e({invalid:r})},e.fromDateTimes=function(t,n){var r=cr(t),i=cr(n),o=un(r,i);return null==o?new e({start:r,end:i}):o},e.after=function(t,n){var r=sn(n),i=cr(t);return e.fromDateTimes(i,i.plus(r))},e.before=function(t,n){var r=sn(n),i=cr(t);return e.fromDateTimes(i.minus(r),i)},e.fromISO=function(t,n){var r=(t||"").split("/",2),i=r[0],o=r[1];if(i&&o){var a,s,c,u;try{s=(a=sr.fromISO(i,n)).isValid}catch(o){s=!1}try{u=(c=sr.fromISO(o,n)).isValid}catch(o){u=!1}if(s&&u)return e.fromDateTimes(a,c);if(s){var l=an.fromISO(o,n);if(l.isValid)return e.after(a,l)}else if(u){var d=an.fromISO(i,n);if(d.isValid)return e.before(c,d)}}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.isInterval=function(e){return e&&e.isLuxonInterval||!1};var t=e.prototype;return t.length=function(e){return void 0===e&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},t.count=function(e){if(void 0===e&&(e="milliseconds"),!this.isValid)return NaN;var t=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(t,e).get(e))+1},t.hasSame=function(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(e){return!!this.isValid&&this.s>e},t.isBefore=function(e){return!!this.isValid&&this.e<=e},t.contains=function(e){return!!this.isValid&&this.s<=e&&this.e>e},t.set=function(t){var n=void 0===t?{}:t,r=n.start,i=n.end;return this.isValid?e.fromDateTimes(r||this.s,i||this.e):this},t.splitAt=function(){var t=this;if(!this.isValid)return[];for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=r.map(cr).filter((function(e){return t.contains(e)})).sort(),a=[],s=this.s,c=0;s<this.e;){var u=o[c]||this.e,l=+u>+this.e?this.e:u;a.push(e.fromDateTimes(s,l)),s=l,c+=1}return a},t.splitBy=function(t){var n=sn(t);if(!this.isValid||!n.isValid||0===n.as("milliseconds"))return[];for(var r,i=this.s,o=1,a=[];i<this.e;){var s=this.start.plus(n.mapUnits((function(e){return e*o})));r=+s>+this.e?this.e:s,a.push(e.fromDateTimes(i,r)),i=r,o+=1}return a},t.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},t.overlaps=function(e){return this.e>e.s&&this.s<e.e},t.abutsStart=function(e){return!!this.isValid&&+this.e==+e.s},t.abutsEnd=function(e){return!!this.isValid&&+e.e==+this.s},t.engulfs=function(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e},t.equals=function(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)},t.intersection=function(t){if(!this.isValid)return this;var n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return n>=r?null:e.fromDateTimes(n,r)},t.union=function(t){if(!this.isValid)return this;var n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return e.fromDateTimes(n,r)},e.merge=function(e){var t=e.sort((function(e,t){return e.s-t.s})).reduce((function(e,t){var n=e[0],r=e[1];return r?r.overlaps(t)||r.abutsStart(t)?[n,r.union(t)]:[n.concat([r]),t]:[n,t]}),[[],null]),n=t[0],r=t[1];return r&&n.push(r),n},e.xor=function(t){for(var n,r,i=null,o=0,a=[],s=t.map((function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]})),c=l((n=Array.prototype).concat.apply(n,s).sort((function(e,t){return e.time-t.time})));!(r=c()).done;){var u=r.value;1===(o+="s"===u.type?1:-1)?i=u.time:(i&&+i!=+u.time&&a.push(e.fromDateTimes(i,u.time)),i=null)}return e.merge(a)},t.difference=function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.xor([this].concat(r)).map((function(e){return t.intersection(e)})).filter((function(e){return e&&!e.isEmpty()}))},t.toString=function(){return this.isValid?"["+this.s.toISO()+"  "+this.e.toISO()+")":cn},t.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):cn},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():cn},t.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):cn},t.toFormat=function(e,t){var n=(void 0===t?{}:t).separator,r=void 0===n?"  ":n;return this.isValid?""+this.s.toFormat(e)+r+this.e.toFormat(e):cn},t.toDuration=function(e,t){return this.isValid?this.e.diff(this.s,e,t):an.invalid(this.invalidReason)},t.mapEndpoints=function(t){return e.fromDateTimes(t(this.s),t(this.e))},r(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),dn=function(){function e(){}return e.hasDST=function(e){void 0===e&&(e=Xe.defaultZone);var t=sr.now().setZone(e).set({month:12});return!e.universal&&t.offset!==t.set({month:6}).offset},e.isValidIANAZone=function(e){return ze.isValidSpecifier(e)&&ze.isValidZone(e)},e.normalizeZone=function(e){return Ze(e,Xe.defaultZone)},e.months=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,a=void 0===o?null:o,s=n.locObj,c=void 0===s?null:s,u=n.outputCalendar,l=void 0===u?"gregory":u;return(c||ut.create(i,a,l)).months(e)},e.monthsFormat=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,a=void 0===o?null:o,s=n.locObj,c=void 0===s?null:s,u=n.outputCalendar,l=void 0===u?"gregory":u;return(c||ut.create(i,a,l)).months(e,!0)},e.weekdays=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,a=void 0===o?null:o,s=n.locObj;return((void 0===s?null:s)||ut.create(i,a,null)).weekdays(e)},e.weekdaysFormat=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,a=void 0===o?null:o,s=n.locObj;return((void 0===s?null:s)||ut.create(i,a,null)).weekdays(e,!0)},e.meridiems=function(e){var t=(void 0===e?{}:e).locale,n=void 0===t?null:t;return ut.create(n).meridiems()},e.eras=function(e,t){void 0===e&&(e="short");var n=(void 0===t?{}:t).locale,r=void 0===n?null:n;return ut.create(r,null,"gregory").eras(e)},e.features=function(){var e=!1,t=!1,n=!1,r=!1;if(J()){e=!0,t=$(),r=q();try{n="America/New_York"===new Intl.DateTimeFormat("en",{timeZone:"America/New_York"}).resolvedOptions().timeZone}catch(e){n=!1}}return{intl:e,intlTokens:t,zones:n,relative:r}},e}();function hn(e,t){var n=function(e){return e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=n(t)-n(e);return Math.floor(an.fromMillis(r).as("days"))}var fn={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},pn={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},mn=fn.hanidec.replace(/[\[|\]]/g,"").split("");function yn(e,t){var n=e.numberingSystem;return void 0===t&&(t=""),new RegExp(""+fn[n||"latn"]+t)}function gn(e,t){return void 0===t&&(t=function(e){return e}),{regex:e,deser:function(e){var n=e[0];return t(function(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(-1!==e[n].search(fn.hanidec))t+=mn.indexOf(e[n]);else for(var i in pn){var o=pn[i],a=o[0],s=o[1];r>=a&&r<=s&&(t+=r-a)}}return parseInt(t,10)}return t}(n))}}}var vn="( |"+String.fromCharCode(160)+")",wn=new RegExp(vn,"g");function bn(e){return e.replace(/\./g,"\\.?").replace(wn,vn)}function En(e){return e.replace(/\./g,"").replace(wn," ").toLowerCase()}function Sn(e,t){return null===e?null:{regex:RegExp(e.map(bn).join("|")),deser:function(n){var r=n[0];return e.findIndex((function(e){return En(r)===En(e)}))+t}}}function An(e,t){return{regex:e,deser:function(e){return de(e[1],e[2])},groups:t}}function _n(e){return{regex:e,deser:function(e){return e[0]}}}var kn={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Cn=null;function Pn(e,t,n){var r=function(e,t){var n;return(n=Array.prototype).concat.apply(n,e.map((function(e){return function(e,t){if(e.literal)return e;var n=Me.macroTokenToFormatOpts(e.val);if(!n)return e;var r=Me.create(t,n).formatDateTimeParts((Cn||(Cn=sr.fromMillis(1555555555555)),Cn)).map((function(e){return function(e,t,n){var r=e.type,i=e.value;if("literal"===r)return{literal:!0,val:i};var o=n[r],a=kn[r];return"object"==typeof a&&(a=a[o]),a?{literal:!1,val:a}:void 0}(e,0,n)}));return r.includes(void 0)?e:r}(e,t)})))}(Me.parseFormat(n),e),i=r.map((function(t){return n=t,i=yn(r=e),o=yn(r,"{2}"),a=yn(r,"{3}"),s=yn(r,"{4}"),c=yn(r,"{6}"),u=yn(r,"{1,2}"),l=yn(r,"{1,3}"),d=yn(r,"{1,6}"),h=yn(r,"{1,9}"),f=yn(r,"{2,4}"),p=yn(r,"{4,6}"),m=function(e){return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function(e){return e[0]},literal:!0};var t},y=function(e){if(n.literal)return m(e);switch(e.val){case"G":return Sn(r.eras("short",!1),0);case"GG":return Sn(r.eras("long",!1),0);case"y":return gn(d);case"yy":case"kk":return gn(f,ue);case"yyyy":case"kkkk":return gn(s);case"yyyyy":return gn(p);case"yyyyyy":return gn(c);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return gn(u);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return gn(o);case"MMM":return Sn(r.months("short",!0,!1),1);case"MMMM":return Sn(r.months("long",!0,!1),1);case"LLL":return Sn(r.months("short",!1,!1),1);case"LLLL":return Sn(r.months("long",!1,!1),1);case"o":case"S":return gn(l);case"ooo":case"SSS":return gn(a);case"u":return _n(h);case"a":return Sn(r.meridiems(),0);case"E":case"c":return gn(i);case"EEE":return Sn(r.weekdays("short",!1,!1),1);case"EEEE":return Sn(r.weekdays("long",!1,!1),1);case"ccc":return Sn(r.weekdays("short",!0,!1),1);case"cccc":return Sn(r.weekdays("long",!0,!1),1);case"Z":case"ZZ":return An(new RegExp("([+-]"+u.source+")(?::("+o.source+"))?"),2);case"ZZZ":return An(new RegExp("([+-]"+u.source+")("+o.source+")?"),2);case"z":return _n(/[a-z_+-/]{1,256}?/i);default:return m(e)}}(n)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"},y.token=n,y;var n,r,i,o,a,s,c,u,l,d,h,f,p,m,y})),o=i.find((function(e){return e.invalidReason}));if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};var a=function(e){return["^"+e.map((function(e){return e.regex})).reduce((function(e,t){return e+"("+t.source+")"}),"")+"$",e]}(i),s=a[0],c=a[1],u=RegExp(s,"i"),l=function(e,t,n){var r=e.match(t);if(r){var i={},o=1;for(var a in n)if(Q(n,a)){var s=n[a],c=s.groups?s.groups+1:1;!s.literal&&s.token&&(i[s.token.val[0]]=s.deser(r.slice(o,o+c))),o+=c}return[r,i]}return[r,{}]}(t,u,c),d=l[0],h=l[1],f=h?function(e){var t;return t=W(e.Z)?W(e.z)?null:ze.create(e.z):new We(e.Z),W(e.q)||(e.M=3*(e.q-1)+1),W(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),W(e.u)||(e.S=ne(e.u)),[Object.keys(e).reduce((function(t,n){var r=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(n);return r&&(t[r]=e[n]),t}),{}),t]}(h):[null,null],p=f[0],y=f[1];if(Q(h,"a")&&Q(h,"H"))throw new m("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:u,rawMatches:d,matches:h,result:p,zone:y}}var In=[0,31,59,90,120,151,181,212,243,273,304,334],Tn=[0,31,60,91,121,152,182,213,244,274,305,335];function On(e,t){return new je("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function xn(e,t,n){var r=new Date(Date.UTC(e,t-1,n)).getUTCDay();return 0===r?7:r}function Dn(e,t,n){return n+(ie(e)?Tn:In)[t-1]}function Mn(e,t){var n=ie(e)?Tn:In,r=n.findIndex((function(e){return e<t}));return{month:r+1,day:t-n[r]}}function jn(e){var t,n=e.year,r=e.month,i=e.day,o=Dn(n,r,i),a=xn(n,r,i),s=Math.floor((o-a+10)/7);return s<1?s=ce(t=n-1):s>ce(n)?(t=n+1,s=1):t=n,Object.assign({weekYear:t,weekNumber:s,weekday:a},me(e))}function Ln(e){var t,n=e.weekYear,r=e.weekNumber,i=e.weekday,o=xn(n,1,4),a=oe(n),s=7*r+i-o-3;s<1?s+=oe(t=n-1):s>a?(t=n+1,s-=oe(n)):t=n;var c=Mn(t,s),u=c.month,l=c.day;return Object.assign({year:t,month:u,day:l},me(e))}function Nn(e){var t=e.year,n=Dn(t,e.month,e.day);return Object.assign({year:t,ordinal:n},me(e))}function Hn(e){var t=e.year,n=Mn(t,e.ordinal),r=n.month,i=n.day;return Object.assign({year:t,month:r,day:i},me(e))}function Fn(e){var t=Z(e.year),n=X(e.month,1,12),r=X(e.day,1,ae(e.year,e.month));return t?n?!r&&On("day",e.day):On("month",e.month):On("year",e.year)}function Rn(e){var t=e.hour,n=e.minute,r=e.second,i=e.millisecond,o=X(t,0,23)||24===t&&0===n&&0===r&&0===i,a=X(n,0,59),s=X(r,0,59),c=X(i,0,999);return o?a?s?!c&&On("millisecond",i):On("second",r):On("minute",n):On("hour",t)}var Un="Invalid DateTime",Bn=864e13;function zn(e){return new je("unsupported zone",'the zone "'+e.name+'" is not supported')}function Vn(e){return null===e.weekData&&(e.weekData=jn(e.c)),e.weekData}function Wn(e,t){var n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new sr(Object.assign({},n,t,{old:n}))}function Kn(e,t,n){var r=e-60*t*1e3,i=n.offset(r);if(t===i)return[r,t];r-=60*(i-t)*1e3;var o=n.offset(r);return i===o?[r,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}function Zn(e,t){var n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Jn(e,t,n){return Kn(se(e),t,n)}function $n(e,t){var n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),o=Object.assign({},e.c,{year:r,month:i,day:Math.min(e.c.day,ae(r,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)}),a=an.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),s=Kn(se(o),n,e.zone),c=s[0],u=s[1];return 0!==a&&(c+=a,u=e.zone.offset(c)),{ts:c,o:u}}function qn(e,t,n,r,i){var o=n.setZone,a=n.zone;if(e&&0!==Object.keys(e).length){var s=t||a,c=sr.fromObject(Object.assign(e,n,{zone:s,setZone:void 0}));return o?c:c.setZone(a)}return sr.invalid(new je("unparsable",'the input "'+i+"\" can't be parsed as "+r))}function Gn(e,t,n){return void 0===n&&(n=!0),e.isValid?Me.create(ut.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Yn(e,t){var n=t.suppressSeconds,r=void 0!==n&&n,i=t.suppressMilliseconds,o=void 0!==i&&i,a=t.includeOffset,s=t.includePrefix,c=void 0!==s&&s,u=t.includeZone,l=void 0!==u&&u,d=t.spaceZone,h=void 0!==d&&d,f=t.format,p=void 0===f?"extended":f,m="basic"===p?"HHmm":"HH:mm";r&&0===e.second&&0===e.millisecond||(m+="basic"===p?"ss":":ss",o&&0===e.millisecond||(m+=".SSS")),(l||a)&&h&&(m+=" "),l?m+="z":a&&(m+="basic"===p?"ZZZ":"ZZ");var y=Gn(e,m);return c&&(y="T"+y),y}var Qn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Xn={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},er={ordinal:1,hour:0,minute:0,second:0,millisecond:0},tr=["year","month","day","hour","minute","second","millisecond"],nr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],rr=["year","ordinal","hour","minute","second","millisecond"];function ir(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new y(e);return t}function or(e,t){for(var n,r=l(tr);!(n=r()).done;){var i=n.value;W(e[i])&&(e[i]=Qn[i])}var o=Fn(e)||Rn(e);if(o)return sr.invalid(o);var a=Xe.now(),s=Jn(e,t.offset(a),t),c=s[0],u=s[1];return new sr({ts:c,zone:t,o:u})}function ar(e,t,n){var r=!!W(n.round)||n.round,i=function(e,i){return e=re(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,i)},o=function(r){return n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r)};if(n.unit)return i(o(n.unit),n.unit);for(var a,s=l(n.units);!(a=s()).done;){var c=a.value,u=o(c);if(Math.abs(u)>=1)return i(u,c)}return i(e>t?-0:0,n.units[n.units.length-1])}var sr=function(){function e(e){var t=e.zone||Xe.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new je("invalid input"):null)||(t.isValid?null:zn(t));this.ts=W(e.ts)?Xe.now():e.ts;var r=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t)){var o=[e.old.c,e.old.o];r=o[0],i=o[1]}else{var a=t.offset(this.ts);r=Zn(this.ts,a),r=(n=Number.isNaN(r.year)?new je("invalid input"):null)?null:r,i=n?null:a}this._zone=t,this.loc=e.loc||ut.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(t,n,r,i,o,a,s){return W(t)?e.now():or({year:t,month:n,day:r,hour:i,minute:o,second:a,millisecond:s},Xe.defaultZone)},e.utc=function(t,n,r,i,o,a,s){return W(t)?new e({ts:Xe.now(),zone:We.utcInstance}):or({year:t,month:n,day:r,hour:i,minute:o,second:a,millisecond:s},We.utcInstance)},e.fromJSDate=function(t,n){void 0===n&&(n={});var r,i=(r=t,"[object Date]"===Object.prototype.toString.call(r)?t.valueOf():NaN);if(Number.isNaN(i))return e.invalid("invalid input");var o=Ze(n.zone,Xe.defaultZone);return o.isValid?new e({ts:i,zone:o,loc:ut.fromObject(n)}):e.invalid(zn(o))},e.fromMillis=function(t,n){if(void 0===n&&(n={}),K(t))return t<-Bn||t>Bn?e.invalid("Timestamp out of range"):new e({ts:t,zone:Ze(n.zone,Xe.defaultZone),loc:ut.fromObject(n)});throw new g("fromMillis requires a numerical input, but received a "+typeof t+" with value "+t)},e.fromSeconds=function(t,n){if(void 0===n&&(n={}),K(t))return new e({ts:1e3*t,zone:Ze(n.zone,Xe.defaultZone),loc:ut.fromObject(n)});throw new g("fromSeconds requires a numerical input")},e.fromObject=function(t){var n=Ze(t.zone,Xe.defaultZone);if(!n.isValid)return e.invalid(zn(n));var r=Xe.now(),i=n.offset(r),o=fe(t,ir,["zone","locale","outputCalendar","numberingSystem"]),a=!W(o.ordinal),s=!W(o.year),c=!W(o.month)||!W(o.day),u=s||c,d=o.weekYear||o.weekNumber,h=ut.fromObject(t);if((u||a)&&d)throw new m("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new m("Can't mix ordinal dates with month/day");var f,p,y=d||o.weekday&&!u,g=Zn(r,i);y?(f=nr,p=Xn,g=jn(g)):a?(f=rr,p=er,g=Nn(g)):(f=tr,p=Qn);for(var v,w=!1,b=l(f);!(v=b()).done;){var E=v.value;W(o[E])?o[E]=w?p[E]:g[E]:w=!0}var S=y?function(e){var t=Z(e.weekYear),n=X(e.weekNumber,1,ce(e.weekYear)),r=X(e.weekday,1,7);return t?n?!r&&On("weekday",e.weekday):On("week",e.week):On("weekYear",e.weekYear)}(o):a?function(e){var t=Z(e.year),n=X(e.ordinal,1,oe(e.year));return t?!n&&On("ordinal",e.ordinal):On("year",e.year)}(o):Fn(o),A=S||Rn(o);if(A)return e.invalid(A);var _=Jn(y?Ln(o):a?Hn(o):o,i,n),k=new e({ts:_[0],zone:n,o:_[1],loc:h});return o.weekday&&u&&t.weekday!==k.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+o.weekday+" and a date of "+k.toISO()):k},e.fromISO=function(e,t){void 0===t&&(t={});var n=function(e){return ht(e,[Rt,Vt],[Ut,Wt],[Bt,Kt],[zt,Zt])}(e);return qn(n[0],n[1],t,"ISO 8601",e)},e.fromRFC2822=function(e,t){void 0===t&&(t={});var n=function(e){return ht(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Dt,Mt])}(e);return qn(n[0],n[1],t,"RFC 2822",e)},e.fromHTTP=function(e,t){void 0===t&&(t={});var n=function(e){return ht(e,[jt,Ht],[Lt,Ht],[Nt,Ft])}(e);return qn(n[0],n[1],t,"HTTP",t)},e.fromFormat=function(t,n,r){if(void 0===r&&(r={}),W(t)||W(n))throw new g("fromFormat requires an input string and a format");var i=r,o=i.locale,a=void 0===o?null:o,s=i.numberingSystem,c=void 0===s?null:s,u=function(e,t,n){var r=Pn(e,t,n);return[r.result,r.zone,r.invalidReason]}(ut.fromOpts({locale:a,numberingSystem:c,defaultToEN:!0}),t,n),l=u[0],d=u[1],h=u[2];return h?e.invalid(h):qn(l,d,r,"format "+n,t)},e.fromString=function(t,n,r){return void 0===r&&(r={}),e.fromFormat(t,n,r)},e.fromSQL=function(e,t){void 0===t&&(t={});var n=function(e){return ht(e,[$t,Gt],[qt,Yt])}(e);return qn(n[0],n[1],t,"SQL",e)},e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new g("need to specify a reason the DateTime is invalid");var r=t instanceof je?t:new je(t,n);if(Xe.throwOnInvalid)throw new h(r);return new e({invalid:r})},e.isDateTime=function(e){return e&&e.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(e){return this[e]},t.resolvedLocaleOpts=function(e){void 0===e&&(e={});var t=Me.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t.locale,numberingSystem:t.numberingSystem,outputCalendar:t.calendar}},t.toUTC=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),this.setZone(We.instance(e),t)},t.toLocal=function(){return this.setZone(Xe.defaultZone)},t.setZone=function(t,n){var r=void 0===n?{}:n,i=r.keepLocalTime,o=void 0!==i&&i,a=r.keepCalendarTime,s=void 0!==a&&a;if((t=Ze(t,Xe.defaultZone)).equals(this.zone))return this;if(t.isValid){var c=this.ts;if(o||s){var u=t.offset(this.ts);c=Jn(this.toObject(),u,t)[0]}return Wn(this,{ts:c,zone:t})}return e.invalid(zn(t))},t.reconfigure=function(e){var t=void 0===e?{}:e,n=t.locale,r=t.numberingSystem,i=t.outputCalendar;return Wn(this,{loc:this.loc.clone({locale:n,numberingSystem:r,outputCalendar:i})})},t.setLocale=function(e){return this.reconfigure({locale:e})},t.set=function(e){if(!this.isValid)return this;var t,n=fe(e,ir,[]),r=!W(n.weekYear)||!W(n.weekNumber)||!W(n.weekday),i=!W(n.ordinal),o=!W(n.year),a=!W(n.month)||!W(n.day),s=o||a,c=n.weekYear||n.weekNumber;if((s||i)&&c)throw new m("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&i)throw new m("Can't mix ordinal dates with month/day");r?t=Ln(Object.assign(jn(this.c),n)):W(n.ordinal)?(t=Object.assign(this.toObject(),n),W(n.day)&&(t.day=Math.min(ae(t.year,t.month),t.day))):t=Hn(Object.assign(Nn(this.c),n));var u=Jn(t,this.o,this.zone);return Wn(this,{ts:u[0],o:u[1]})},t.plus=function(e){return this.isValid?Wn(this,$n(this,sn(e))):this},t.minus=function(e){return this.isValid?Wn(this,$n(this,sn(e).negate())):this},t.startOf=function(e){if(!this.isValid)return this;var t={},n=an.normalizeUnit(e);switch(n){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===n&&(t.weekday=1),"quarters"===n){var r=Math.ceil(this.month/3);t.month=3*(r-1)+1}return this.set(t)},t.endOf=function(e){var t;return this.isValid?this.plus((t={},t[e]=1,t)).startOf(e).minus(1):this},t.toFormat=function(e,t){return void 0===t&&(t={}),this.isValid?Me.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Un},t.toLocaleString=function(e){return void 0===e&&(e=S),this.isValid?Me.create(this.loc.clone(e),e).formatDateTime(this):Un},t.toLocaleParts=function(e){return void 0===e&&(e={}),this.isValid?Me.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},t.toISO=function(e){return void 0===e&&(e={}),this.isValid?this.toISODate(e)+"T"+this.toISOTime(e):null},t.toISODate=function(e){var t=(void 0===e?{}:e).format,n="basic"===(void 0===t?"extended":t)?"yyyyMMdd":"yyyy-MM-dd";return this.year>9999&&(n="+"+n),Gn(this,n)},t.toISOWeekDate=function(){return Gn(this,"kkkk-'W'WW-c")},t.toISOTime=function(e){var t=void 0===e?{}:e,n=t.suppressMilliseconds,r=void 0!==n&&n,i=t.suppressSeconds,o=void 0!==i&&i,a=t.includeOffset,s=void 0===a||a,c=t.includePrefix,u=void 0!==c&&c,l=t.format;return Yn(this,{suppressSeconds:o,suppressMilliseconds:r,includeOffset:s,includePrefix:u,format:void 0===l?"extended":l})},t.toRFC2822=function(){return Gn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return Gn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return Gn(this,"yyyy-MM-dd")},t.toSQLTime=function(e){var t=void 0===e?{}:e,n=t.includeOffset,r=void 0===n||n,i=t.includeZone;return Yn(this,{includeOffset:r,includeZone:void 0!==i&&i,spaceZone:!0})},t.toSQL=function(e){return void 0===e&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},t.toString=function(){return this.isValid?this.toISO():Un},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=Object.assign({},this.c);return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(e,t,n){if(void 0===t&&(t="milliseconds"),void 0===n&&(n={}),!this.isValid||!e.isValid)return an.invalid(this.invalid||e.invalid,"created by diffing an invalid DateTime");var r,i=Object.assign({locale:this.locale,numberingSystem:this.numberingSystem},n),o=(r=t,Array.isArray(r)?r:[r]).map(an.normalizeUnit),a=e.valueOf()>this.valueOf(),s=function(e,t,n,r){var i,o=function(e,t,n){for(var r,i,o={},a=0,s=[["years",function(e,t){return t.year-e.year}],["quarters",function(e,t){return t.quarter-e.quarter}],["months",function(e,t){return t.month-e.month+12*(t.year-e.year)}],["weeks",function(e,t){var n=hn(e,t);return(n-n%7)/7}],["days",hn]];a<s.length;a++){var c=s[a],u=c[0],l=c[1];if(n.indexOf(u)>=0){var d;r=u;var h,f=l(e,t);(i=e.plus(((d={})[u]=f,d)))>t?(e=e.plus(((h={})[u]=f-1,h)),f-=1):e=i,o[u]=f}}return[e,o,i,r]}(e,t,n),a=o[0],s=o[1],c=o[2],u=o[3],l=t-a,d=n.filter((function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0}));0===d.length&&(c<t&&(c=a.plus(((i={})[u]=1,i))),c!==a&&(s[u]=(s[u]||0)+l/(c-a)));var h,f=an.fromObject(Object.assign(s,r));return d.length>0?(h=an.fromMillis(l,r)).shiftTo.apply(h,d).plus(f):f}(a?this:e,a?e:this,o,i);return a?s.negate():s},t.diffNow=function(t,n){return void 0===t&&(t="milliseconds"),void 0===n&&(n={}),this.diff(e.now(),t,n)},t.until=function(e){return this.isValid?ln.fromDateTimes(this,e):this},t.hasSame=function(e,t){if(!this.isValid)return!1;var n=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t)<=n&&n<=r.endOf(t)},t.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},t.toRelative=function(t){if(void 0===t&&(t={}),!this.isValid)return null;var n=t.base||e.fromObject({zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0,i=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(i=t.unit,o=void 0),ar(n,this.plus(r),Object.assign(t,{numeric:"always",units:i,unit:o}))},t.toRelativeCalendar=function(t){return void 0===t&&(t={}),this.isValid?ar(t.base||e.fromObject({zone:this.zone}),this,Object.assign(t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.every(e.isDateTime))throw new g("min requires all arguments be DateTimes");return G(n,(function(e){return e.valueOf()}),Math.min)},e.max=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.every(e.isDateTime))throw new g("max requires all arguments be DateTimes");return G(n,(function(e){return e.valueOf()}),Math.max)},e.fromFormatExplain=function(e,t,n){void 0===n&&(n={});var r=n,i=r.locale,o=void 0===i?null:i,a=r.numberingSystem,s=void 0===a?null:a;return Pn(ut.fromOpts({locale:o,numberingSystem:s,defaultToEN:!0}),e,t)},e.fromStringExplain=function(t,n,r){return void 0===r&&(r={}),e.fromFormatExplain(t,n,r)},r(e,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Vn(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Vn(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Vn(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Nn(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?dn.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?dn.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?dn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?dn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.universal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return ie(this.year)}},{key:"daysInMonth",get:function(){return ae(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?oe(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?ce(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return S}},{key:"DATE_MED",get:function(){return A}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return _}},{key:"DATE_FULL",get:function(){return k}},{key:"DATE_HUGE",get:function(){return C}},{key:"TIME_SIMPLE",get:function(){return P}},{key:"TIME_WITH_SECONDS",get:function(){return I}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return T}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return O}},{key:"TIME_24_SIMPLE",get:function(){return x}},{key:"TIME_24_WITH_SECONDS",get:function(){return D}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return M}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return j}},{key:"DATETIME_SHORT",get:function(){return L}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return N}},{key:"DATETIME_MED",get:function(){return H}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return F}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return R}},{key:"DATETIME_FULL",get:function(){return U}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return B}},{key:"DATETIME_HUGE",get:function(){return z}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return V}}]),e}();function cr(e){if(sr.isDateTime(e))return e;if(e&&e.valueOf&&K(e.valueOf()))return sr.fromJSDate(e);if(e&&"object"==typeof e)return sr.fromObject(e);throw new g("Unknown datetime argument: "+e+", of type "+typeof e)}t.ou=sr},7147:(e,t,n)=>{"use strict";var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g||{},i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,c="ArrayBuffer"in r;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function y(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=y(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&a&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(a)return this.blob().then(g);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,o=m(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,n=y(t=new FileReader),i=(r=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=h(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,o=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(n=t.method||this.method||"GET").toUpperCase(),b.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function S(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function A(e,t){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},w.call(E.prototype),w.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:200,statusText:""});return e.status=0,e.type="error",e};var _=[301,302,303,307,308];A.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})};var k=r.DOMException;try{new k}catch(e){(k=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),k.prototype.constructor=k}function C(e,t){return new Promise((function(n,i){var o=new E(e,t);if(o.signal&&o.signal.aborted)return i(new k("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}if(s.onload=function(){var e=s.getAllResponseHeaders(),t=s.getResponseHeader("set-cookie");t&&(e=e.replace(t,t.replace(/\r?\n/g,", ")));var r,i,o={status:s.status,statusText:s.statusText,headers:(r=e||"",i=new p,r.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var t=e.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();try{i.append(n,r)}catch(e){console.warn("Response "+e.message)}}})),i)};o.url="responseURL"in s?s.responseURL:o.headers.get("X-Request-URL");var a="response"in s?s.response:s.responseText;setTimeout((function(){n(new A(a,o))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new k("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":c&&(s.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof p||r.Headers&&t.headers instanceof r.Headers)){var l=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){l.push(d(e)),s.setRequestHeader(e,h(t.headers[e]))})),o.headers.forEach((function(e,t){-1===l.indexOf(t)&&s.setRequestHeader(t,e)}))}else o.headers.forEach((function(e,t){s.setRequestHeader(t,e)}));o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}C.polyfill=!0,r.fetch||(r.fetch=C,r.Headers=p,r.Request=E,r.Response=A)},8416:(e,t,n)=>{var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5036:(e,t,n)=>{var r=n(8698).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:(e,t,n)=>{var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4572:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t,n){return i=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==r(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var i}n.d(t,{Z:()=>i})},7462:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})},9588:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CompactEncrypt:()=>it,CompactSign:()=>at,EmbeddedJWK:()=>yt,EncryptJWT:()=>ht,FlattenedEncrypt:()=>ze,FlattenedSign:()=>ot,GeneralEncrypt:()=>We,GeneralSign:()=>ct,SignJWT:()=>dt,UnsecuredJWT:()=>kt,base64url:()=>i,calculateJwkThumbprint:()=>pt,calculateJwkThumbprintUri:()=>mt,compactDecrypt:()=>je,compactVerify:()=>qe,createLocalJWKSet:()=>Et,createRemoteJWKSet:()=>_t,cryptoRuntime:()=>Mt,decodeJwt:()=>Tt,decodeProtectedHeader:()=>It,errors:()=>r,exportJWK:()=>Re,exportPKCS8:()=>Fe,exportSPKI:()=>He,flattenedDecrypt:()=>Me,flattenedVerify:()=>$e,generalDecrypt:()=>Le,generalVerify:()=>Ge,generateKeyPair:()=>xt,generateSecret:()=>Dt,importJWK:()=>Pe,importPKCS8:()=>Ce,importSPKI:()=>_e,importX509:()=>ke,jwtDecrypt:()=>rt,jwtVerify:()=>nt});var r={};n.r(r),n.d(r,{JOSEAlgNotAllowed:()=>A,JOSEError:()=>b,JOSENotSupported:()=>_,JWEDecryptionFailed:()=>k,JWEInvalid:()=>C,JWKInvalid:()=>T,JWKSInvalid:()=>O,JWKSMultipleMatchingKeys:()=>D,JWKSNoMatchingKey:()=>x,JWKSTimeout:()=>M,JWSInvalid:()=>P,JWSSignatureVerificationFailed:()=>j,JWTClaimValidationFailed:()=>E,JWTExpired:()=>S,JWTInvalid:()=>I});var i={};n.r(i),n.d(i,{decode:()=>Pt,encode:()=>Ct});const o=crypto,a=e=>e instanceof CryptoKey,s=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await o.subtle.digest(n,t))},c=new TextEncoder,u=new TextDecoder,l=2**32;function d(...e){const t=e.reduce(((e,{length:t})=>e+t),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}function h(e,t,n){if(t<0||t>=l)throw new RangeError(`value must be >= 0 and <= ${l-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],n)}function f(e){const t=Math.floor(e/l),n=e%l,r=new Uint8Array(8);return h(r,t,0),h(r,n,4),r}function p(e){const t=new Uint8Array(4);return h(t,e),t}function m(e){return d(p(e.length),e)}const y=e=>{let t=e;"string"==typeof t&&(t=c.encode(t));const n=[];for(let e=0;e<t.length;e+=32768)n.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(n.join(""))},g=e=>y(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),v=e=>{const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n},w=e=>{let t=e;t instanceof Uint8Array&&(t=u.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return v(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class b extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class E extends b{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=n}}class S extends b{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=n}}class A extends b{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class _ extends b{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class k extends b{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class C extends b{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class P extends b{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class I extends b{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class T extends b{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class O extends b{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class x extends b{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class D extends b{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator;class M extends b{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class j extends b{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const L=o.getRandomValues.bind(o);function N(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new _(`Unsupported JWE Algorithm: ${e}`)}}const H=e=>L(new Uint8Array(N(e)>>3)),F=(e,t)=>{if(t.length<<3!==N(e))throw new C("Invalid Initialization Vector length")},R=(e,t)=>{const n=e.byteLength<<3;if(n!==t)throw new C(`Invalid Content Encryption Key length. Expected ${t} bits, got ${n} bits`)};function U(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function B(e,t){return e.name===t}function z(e){return parseInt(e.name.slice(4),10)}function V(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();e+=`one of ${t.join(", ")}, or ${n}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}function W(e,t,...n){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!B(e.algorithm,"AES-GCM"))throw U("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw U(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!B(e.algorithm,"AES-KW"))throw U("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw U(n,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw U("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!B(e.algorithm,"PBKDF2"))throw U("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!B(e.algorithm,"RSA-OAEP"))throw U("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(z(e.algorithm.hash)!==n)throw U(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}V(e,n)}function K(e,t,...n){if(n.length>2){const t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Z=(e,...t)=>K("Key must be ",e,...t);function J(e,t,...n){return K(`Key for the ${e} algorithm must be `,t,...n)}const $=e=>a(e),q=["CryptoKey"],G=async(e,t,n,r,i,s)=>{if(!(a(t)||t instanceof Uint8Array))throw new TypeError(Z(t,...q,"Uint8Array"));if(!r)throw new C("JWE Initialization Vector missing");if(!i)throw new C("JWE Authentication Tag missing");switch(F(e,r),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&R(t,parseInt(e.slice(-3),10)),async function(e,t,n,r,i,a){if(!(t instanceof Uint8Array))throw new TypeError(Z(t,"Uint8Array"));const s=parseInt(e.slice(1,4),10),c=await o.subtle.importKey("raw",t.subarray(s>>3),"AES-CBC",!1,["decrypt"]),u=await o.subtle.importKey("raw",t.subarray(0,s>>3),{hash:"SHA-"+(s<<1),name:"HMAC"},!1,["sign"]),l=d(a,r,n,f(a.length<<3)),h=new Uint8Array((await o.subtle.sign("HMAC",u,l)).slice(0,s>>3));let p,m;try{p=((e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const n=e.length;let r=0,i=-1;for(;++i<n;)r|=e[i]^t[i];return 0===r})(i,h)}catch{}if(!p)throw new k;try{m=new Uint8Array(await o.subtle.decrypt({iv:r,name:"AES-CBC"},c,n))}catch{}if(!m)throw new k;return m}(e,t,n,r,i,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&R(t,parseInt(e.slice(1,4),10)),async function(e,t,n,r,i,a){let s;t instanceof Uint8Array?s=await o.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(W(t,e,"decrypt"),s=t);try{return new Uint8Array(await o.subtle.decrypt({additionalData:a,iv:r,name:"AES-GCM",tagLength:128},s,d(n,i)))}catch{throw new k}}(e,t,n,r,i,s);default:throw new _("Unsupported JWE Content Encryption Algorithm")}},Y=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let n;for(const e of t){const t=Object.keys(e);if(n&&0!==n.size)for(const e of t){if(n.has(e))return!1;n.add(e)}else n=new Set(t)}return!0};function Q(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}const X=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function ee(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function te(e,t,n){if(a(e))return W(e,t,n),e;if(e instanceof Uint8Array)return o.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(Z(e,...q,"Uint8Array"))}const ne=async(e,t,n)=>{const r=await te(t,e,"wrapKey");ee(r,e);const i=await o.subtle.importKey("raw",n,...X);return new Uint8Array(await o.subtle.wrapKey("raw",i,r,"AES-KW"))},re=async(e,t,n)=>{const r=await te(t,e,"unwrapKey");ee(r,e);const i=await o.subtle.unwrapKey("raw",n,r,"AES-KW",...X);return new Uint8Array(await o.subtle.exportKey("raw",i))};async function ie(e,t,n,r,i=new Uint8Array(0),u=new Uint8Array(0)){if(!a(e))throw new TypeError(Z(e,...q));if(W(e,"ECDH"),!a(t))throw new TypeError(Z(t,...q));W(t,"ECDH","deriveBits");const l=d(m(c.encode(n)),m(i),m(u),p(r));let h;return h="X25519"===e.algorithm.name?256:"X448"===e.algorithm.name?448:Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3,async function(e,t,n){const r=Math.ceil((t>>3)/32),i=new Uint8Array(32*r);for(let t=0;t<r;t++){const r=new Uint8Array(4+e.length+n.length);r.set(p(t+1)),r.set(e,4),r.set(n,4+e.length),i.set(await s("sha256",r),32*t)}return i.slice(0,t>>3)}(new Uint8Array(await o.subtle.deriveBits({name:e.algorithm.name,public:e},t,h)),r,l)}function oe(e){if(!a(e))throw new TypeError(Z(e,...q));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}async function ae(e,t,n,r){!function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new C("PBES2 Salt Input must be 8 or more octets")}(e);const i=function(e,t){return d(c.encode(e),new Uint8Array([0]),t)}(t,e),s=parseInt(t.slice(13,16),10),u={hash:`SHA-${t.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:i},l={length:s,name:"AES-KW"},h=await function(e,t){if(e instanceof Uint8Array)return o.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(a(e))return W(e,t,"deriveBits","deriveKey"),e;throw new TypeError(Z(e,...q,"Uint8Array"))}(r,t);if(h.usages.includes("deriveBits"))return new Uint8Array(await o.subtle.deriveBits(u,h,s));if(h.usages.includes("deriveKey"))return o.subtle.deriveKey(u,h,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}function se(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new _(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const ce=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if("number"!=typeof n||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function ue(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new _(`Unsupported JWE Algorithm: ${e}`)}}const le=e=>L(new Uint8Array(ue(e)>>3)),de=(e,t)=>`-----BEGIN ${t}-----\n${(e.match(/.{1,64}/g)||[]).join("\n")}\n-----END ${t}-----`,he=async(e,t,n)=>{if(!a(n))throw new TypeError(Z(n,...q));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==e)throw new TypeError(`key is not a ${e} key`);return de(y(new Uint8Array(await o.subtle.exportKey(t,n))),`${e.toUpperCase()} KEY`)},fe=e=>he("public","spki",e),pe=e=>he("private","pkcs8",e),me=(e,t,n=0)=>{0===n&&(t.unshift(t.length),t.unshift(6));const r=e.indexOf(t[0],n);if(-1===r)return!1;const i=e.subarray(r,r+t.length);return i.length===t.length&&(i.every(((e,n)=>e===t[n]))||me(e,t,r+1))},ye=e=>{switch(!0){case me(e,[42,134,72,206,61,3,1,7]):return"P-256";case me(e,[43,129,4,0,34]):return"P-384";case me(e,[43,129,4,0,35]):return"P-521";case me(e,[43,101,110]):return"X25519";case me(e,[43,101,111]):return"X448";case me(e,[43,101,112]):return"Ed25519";case me(e,[43,101,113]):return"Ed448";default:throw new _("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},ge=async(e,t,n,r,i)=>{let a,s;const c=new Uint8Array(atob(n.replace(e,"")).split("").map((e=>e.charCodeAt(0)))),u="spki"===t;switch(r){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${r.slice(-3)}`},s=u?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.slice(-3)}`},s=u?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(r.slice(-3),10)||1}`},s=u?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},s=u?["verify"]:["sign"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},s=u?["verify"]:["sign"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},s=u?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const e=ye(c);a=e.startsWith("P-")?{name:"ECDH",namedCurve:e}:{name:e},s=u?[]:["deriveBits"];break}case"EdDSA":a={name:ye(c)},s=u?["verify"]:["sign"];break;default:throw new _('Invalid or unsupported "alg" (Algorithm) value')}return o.subtle.importKey(t,c,a,i?.extractable??!1,s)},ve=(e,t,n)=>ge(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,n),we=(e,t,n)=>ge(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,n);function be(e){const t=[];let n=0;for(;n<e.length;){const r=Ee(e.subarray(n));t.push(r),n+=r.byteLength}return t}function Ee(e){let t=0,n=31&e[0];if(t++,31===n){for(n=0;e[t]>=128;)n=128*n+e[t]-128,t++;n=128*n+e[t]-128,t++}let r=0;if(e[t]<128)r=e[t],t++;else{if(128===r){for(r=0;0!==e[t+r]||0!==e[t+r+1];){if(r>e.byteLength)throw new TypeError("invalid indefinite form length");r++}const n=t+r+2;return{byteLength:n,contents:e.subarray(t,t+r),raw:e.subarray(0,n)}}{const n=127&e[t];t++,r=0;for(let i=0;i<n;i++)r=256*r+e[t],t++}}const i=t+r;return{byteLength:i,contents:e.subarray(t,i),raw:e.subarray(0,i)}}const Se=(e,t,n)=>{let r;try{r=function(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=v(t);return de(function(e){const t=be(be(Ee(e).contents)[0].contents);return y(t[160===t[0].raw[0]?6:5].raw)}(n),"PUBLIC KEY")}(e)}catch(e){throw new TypeError("Failed to parse the X.509 certificate",{cause:e})}return we(r,t,n)},Ae=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:n}=function(e){let t,n;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new _('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}(e),r=[t,e.ext??!1,e.key_ops??n],i={...e};return delete i.alg,delete i.use,o.subtle.importKey("jwk",i,...r)};async function _e(e,t,n){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw new TypeError('"spki" must be SPKI formatted string');return we(e,t,n)}async function ke(e,t,n){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw new TypeError('"x509" must be X.509 formatted string');return Se(e,t,n)}async function Ce(e,t,n){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return ve(e,t,n)}async function Pe(e,t){if(!Q(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return w(e.k);case"RSA":if(void 0!==e.oth)throw new _('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Ae({...e,alg:t});default:throw new _('Unsupported "kty" (Key Type) Parameter value')}}const Ie=(e,t,n)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((e,t)=>{if(!(t instanceof Uint8Array)){if(!$(t))throw new TypeError(J(e,t,...q,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${q.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e,t):((e,t,n)=>{if(!$(t))throw new TypeError(J(e,t,...q));if("secret"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===n&&"public"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===n&&"public"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===n&&"private"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===n&&"private"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,t,n)},Te=async(e,t,n,r,i)=>{if(!(a(n)||n instanceof Uint8Array))throw new TypeError(Z(n,...q,"Uint8Array"));switch(F(e,r),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&R(n,parseInt(e.slice(-3),10)),async function(e,t,n,r,i){if(!(n instanceof Uint8Array))throw new TypeError(Z(n,"Uint8Array"));const a=parseInt(e.slice(1,4),10),s=await o.subtle.importKey("raw",n.subarray(a>>3),"AES-CBC",!1,["encrypt"]),c=await o.subtle.importKey("raw",n.subarray(0,a>>3),{hash:"SHA-"+(a<<1),name:"HMAC"},!1,["sign"]),u=new Uint8Array(await o.subtle.encrypt({iv:r,name:"AES-CBC"},s,t)),l=d(i,r,u,f(i.length<<3));return{ciphertext:u,tag:new Uint8Array((await o.subtle.sign("HMAC",c,l)).slice(0,a>>3))}}(e,t,n,r,i);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&R(n,parseInt(e.slice(1,4),10)),async function(e,t,n,r,i){let a;n instanceof Uint8Array?a=await o.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(W(n,e,"encrypt"),a=n);const s=new Uint8Array(await o.subtle.encrypt({additionalData:i,iv:r,name:"AES-GCM",tagLength:128},a,t)),c=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:c}}(e,t,n,r,i);default:throw new _("Unsupported JWE Content Encryption Algorithm")}},Oe=async function(e,t,n,r,i){switch(Ie(e,t,"decrypt"),e){case"dir":if(void 0!==n)throw new C("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==n)throw new C("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Q(r.epk))throw new C('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!oe(t))throw new _("ECDH with the provided key is not allowed or not supported by your javascript runtime");const i=await Pe(r.epk,e);let o,a;if(void 0!==r.apu){if("string"!=typeof r.apu)throw new C('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=w(r.apu)}catch{throw new C("Failed to base64url decode the apu")}}if(void 0!==r.apv){if("string"!=typeof r.apv)throw new C('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=w(r.apv)}catch{throw new C("Failed to base64url decode the apv")}}const s=await ie(i,t,"ECDH-ES"===e?r.enc:e,"ECDH-ES"===e?ue(r.enc):parseInt(e.slice(-5,-2),10),o,a);if("ECDH-ES"===e)return s;if(void 0===n)throw new C("JWE Encrypted Key missing");return re(e.slice(-6),s,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===n)throw new C("JWE Encrypted Key missing");return(async(e,t,n)=>{if(!a(t))throw new TypeError(Z(t,...q));if(W(t,e,"decrypt","unwrapKey"),ce(e,t),t.usages.includes("decrypt"))return new Uint8Array(await o.subtle.decrypt(se(e),t,n));if(t.usages.includes("unwrapKey")){const r=await o.subtle.unwrapKey("raw",n,t,se(e),...X);return new Uint8Array(await o.subtle.exportKey("raw",r))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')})(e,t,n);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(void 0===n)throw new C("JWE Encrypted Key missing");if("number"!=typeof r.p2c)throw new C('JOSE Header "p2c" (PBES2 Count) missing or invalid');const o=i?.maxPBES2Count||1e4;if(r.p2c>o)throw new C('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof r.p2s)throw new C('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let a;try{a=w(r.p2s)}catch{throw new C("Failed to base64url decode the p2s")}return(async(e,t,n,r,i)=>{const o=await ae(i,e,r,t);return re(e.slice(-6),o,n)})(e,t,n,r.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===n)throw new C("JWE Encrypted Key missing");return re(e,t,n);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(void 0===n)throw new C("JWE Encrypted Key missing");if("string"!=typeof r.iv)throw new C('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof r.tag)throw new C('JOSE Header "tag" (Authentication Tag) missing or invalid');let i,o;try{i=w(r.iv)}catch{throw new C("Failed to base64url decode the iv")}try{o=w(r.tag)}catch{throw new C("Failed to base64url decode the tag")}return async function(e,t,n,r,i){const o=e.slice(0,7);return G(o,t,n,r,i,new Uint8Array(0))}(e,t,n,i,o)}default:throw new _('Invalid or unsupported "alg" (JWE Algorithm) header value')}},xe=function(e,t,n,r,i){if(void 0!==i.crit&&void 0===r.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==n?new Map([...Object.entries(n),...t.entries()]):t;for(const t of r.crit){if(!o.has(t))throw new _(`Extension Header Parameter "${t}" is not recognized`);if(void 0===i[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(o.get(t)&&void 0===r[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(r.crit)},De=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!=typeof e))))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function Me(e,t,n){if(!Q(e))throw new C("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new C("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new C("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new C("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new C("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new C("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new C("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new C("JWE AAD incorrect type");if(void 0!==e.header&&!Q(e.header))throw new C("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!Q(e.unprotected))throw new C("JWE Per-Recipient Unprotected Header incorrect type");let r;if(e.protected)try{const t=w(e.protected);r=JSON.parse(u.decode(t))}catch{throw new C("JWE Protected Header is invalid")}if(!Y(r,e.header,e.unprotected))throw new C("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const i={...r,...e.header,...e.unprotected};if(xe(C,new Map,n?.crit,r,i),void 0!==i.zip)throw new _('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:o,enc:a}=i;if("string"!=typeof o||!o)throw new C("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof a||!a)throw new C("missing JWE Encryption Algorithm (enc) in JWE Header");const s=n&&De("keyManagementAlgorithms",n.keyManagementAlgorithms),l=n&&De("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(s&&!s.has(o)||!s&&o.startsWith("PBES2"))throw new A('"alg" (Algorithm) Header Parameter value not allowed');if(l&&!l.has(a))throw new A('"enc" (Encryption Algorithm) Header Parameter value not allowed');let h;if(void 0!==e.encrypted_key)try{h=w(e.encrypted_key)}catch{throw new C("Failed to base64url decode the encrypted_key")}let f,p,m,y=!1;"function"==typeof t&&(t=await t(r,e),y=!0);try{f=await Oe(o,t,h,i,n)}catch(e){if(e instanceof TypeError||e instanceof C||e instanceof _)throw e;f=le(a)}if(void 0!==e.iv)try{p=w(e.iv)}catch{throw new C("Failed to base64url decode the iv")}if(void 0!==e.tag)try{m=w(e.tag)}catch{throw new C("Failed to base64url decode the tag")}const g=c.encode(e.protected??"");let v,b;v=void 0!==e.aad?d(g,c.encode("."),c.encode(e.aad)):g;try{b=w(e.ciphertext)}catch{throw new C("Failed to base64url decode the ciphertext")}const E={plaintext:await G(a,f,b,p,m,v)};if(void 0!==e.protected&&(E.protectedHeader=r),void 0!==e.aad)try{E.additionalAuthenticatedData=w(e.aad)}catch{throw new C("Failed to base64url decode the aad")}return void 0!==e.unprotected&&(E.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(E.unprotectedHeader=e.header),y?{...E,key:t}:E}async function je(e,t,n){if(e instanceof Uint8Array&&(e=u.decode(e)),"string"!=typeof e)throw new C("Compact JWE must be a string or Uint8Array");const{0:r,1:i,2:o,3:a,4:s,length:c}=e.split(".");if(5!==c)throw new C("Invalid Compact JWE");const l=await Me({ciphertext:a,iv:o||void 0,protected:r,tag:s||void 0,encrypted_key:i||void 0},t,n),d={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"==typeof t?{...d,key:l.key}:d}async function Le(e,t,n){if(!Q(e))throw new C("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(Q))throw new C("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new C("JWE Recipients has no members");for(const r of e.recipients)try{return await Me({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:r.encrypted_key,header:r.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,n)}catch{}throw new k}const Ne=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:g(e)};if(!a(e))throw new TypeError(Z(e,...q,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:r,use:i,...s}=await o.subtle.exportKey("jwk",e);return s};async function He(e){return fe(e)}async function Fe(e){return pe(e)}async function Re(e){return Ne(e)}const Ue=async function(e,t,n,r,i={}){let s,c,u;switch(Ie(e,n,"encrypt"),e){case"dir":u=n;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!oe(n))throw new _("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:l,apv:d}=i;let{epk:h}=i;h||(h=(await async function(e){if(!a(e))throw new TypeError(Z(e,...q));return o.subtle.generateKey(e.algorithm,!0,["deriveBits"])}(n)).privateKey);const{x:f,y:p,crv:m,kty:y}=await Re(h),v=await ie(n,h,"ECDH-ES"===e?t:e,"ECDH-ES"===e?ue(t):parseInt(e.slice(-5,-2),10),l,d);if(c={epk:{x:f,crv:m,kty:y}},"EC"===y&&(c.epk.y=p),l&&(c.apu=g(l)),d&&(c.apv=g(d)),"ECDH-ES"===e){u=v;break}u=r||le(t);const w=e.slice(-6);s=await ne(w,v,u);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":u=r||le(t),s=await(async(e,t,n)=>{if(!a(t))throw new TypeError(Z(t,...q));if(W(t,e,"encrypt","wrapKey"),ce(e,t),t.usages.includes("encrypt"))return new Uint8Array(await o.subtle.encrypt(se(e),t,n));if(t.usages.includes("wrapKey")){const r=await o.subtle.importKey("raw",n,...X);return new Uint8Array(await o.subtle.wrapKey("raw",r,t,se(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')})(e,n,u);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{u=r||le(t);const{p2c:o,p2s:a}=i;({encryptedKey:s,...c}=await(async(e,t,n,r=2048,i=L(new Uint8Array(16)))=>{const o=await ae(i,e,r,t);return{encryptedKey:await ne(e.slice(-6),o,n),p2c:r,p2s:g(i)}})(e,n,u,o,a));break}case"A128KW":case"A192KW":case"A256KW":u=r||le(t),s=await ne(e,n,u);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{u=r||le(t);const{iv:o}=i;({encryptedKey:s,...c}=await async function(e,t,n,r){const i=e.slice(0,7);r||(r=H(i));const{ciphertext:o,tag:a}=await Te(i,n,t,r,new Uint8Array(0));return{encryptedKey:o,iv:g(r),tag:g(a)}}(e,n,u,o));break}default:throw new _('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:u,encryptedKey:s,parameters:c}},Be=Symbol();class ze{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new C("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Y(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new C("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(xe(C,new Map,t?.crit,this._protectedHeader,n),void 0!==n.zip)throw new _('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:r,enc:i}=n;if("string"!=typeof r||!r)throw new C('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof i||!i)throw new C('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o,a,s,l,h;if("dir"===r){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===r&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let n;({cek:a,encryptedKey:o,parameters:n}=await Ue(r,i,e,this._cek,this._keyManagementParameters)),n&&(t&&Be in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}this._iv||(this._iv=H(i)),l=this._protectedHeader?c.encode(g(JSON.stringify(this._protectedHeader))):c.encode(""),this._aad?(h=g(this._aad),s=d(l,c.encode("."),c.encode(h))):s=l;const{ciphertext:f,tag:p}=await Te(i,this._plaintext,a,this._iv,s),m={ciphertext:g(f),iv:g(this._iv),tag:g(p)};return o&&(m.encrypted_key=g(o)),h&&(m.aad=h),this._protectedHeader&&(m.protected=u.decode(l)),this._sharedUnprotectedHeader&&(m.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(m.header=this._unprotectedHeader),m}}class Ve{constructor(e,t,n){this.parent=e,this.key=t,this.options=n}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class We{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const n=new Ve(this,e,{crit:t?.crit});return this._recipients.push(n),n}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(){if(!this._recipients.length)throw new C("at least one recipient must be added");if(1===this._recipients.length){const[e]=this._recipients,t=await new ze(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(e.unprotectedHeader).encrypt(e.key,{...e.options}),n={ciphertext:t.ciphertext,iv:t.iv,recipients:[{}],tag:t.tag};return t.aad&&(n.aad=t.aad),t.protected&&(n.protected=t.protected),t.unprotected&&(n.unprotected=t.unprotected),t.encrypted_key&&(n.recipients[0].encrypted_key=t.encrypted_key),t.header&&(n.recipients[0].header=t.header),n}let e;for(let t=0;t<this._recipients.length;t++){const n=this._recipients[t];if(!Y(this._protectedHeader,this._unprotectedHeader,n.unprotectedHeader))throw new C("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader,...n.unprotectedHeader},{alg:i}=r;if("string"!=typeof i||!i)throw new C('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===i||"ECDH-ES"===i)throw new C('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof r.enc||!r.enc)throw new C('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==r.enc)throw new C('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=r.enc;if(xe(C,new Map,n.options.crit,this._protectedHeader,r),void 0!==r.zip)throw new _('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const t=le(e),n={ciphertext:"",iv:"",recipients:[],tag:""};for(let r=0;r<this._recipients.length;r++){const i=this._recipients[r],o={};n.recipients.push(o);const a={...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader}.alg.startsWith("PBES2")?2048+r:void 0;if(0===r){const e=await new ze(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(t).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(i.unprotectedHeader).setKeyManagementParameters({p2c:a}).encrypt(i.key,{...i.options,[Be]:!0});n.ciphertext=e.ciphertext,n.iv=e.iv,n.tag=e.tag,e.aad&&(n.aad=e.aad),e.protected&&(n.protected=e.protected),e.unprotected&&(n.unprotected=e.unprotected),o.encrypted_key=e.encrypted_key,e.header&&(o.header=e.header);continue}const{encryptedKey:s,parameters:c}=await Ue(i.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,e,i.key,t,{p2c:a});o.encrypted_key=g(s),(i.unprotectedHeader||c)&&(o.header={...i.unprotectedHeader,...c})}return n}}function Ke(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new _(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function Ze(e,t,n){if(a(t))return function(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!B(e.algorithm,"HMAC"))throw U("HMAC");const n=parseInt(t.slice(2),10);if(z(e.algorithm.hash)!==n)throw U(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!B(e.algorithm,"RSASSA-PKCS1-v1_5"))throw U("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(z(e.algorithm.hash)!==n)throw U(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!B(e.algorithm,"RSA-PSS"))throw U("RSA-PSS");const n=parseInt(t.slice(2),10);if(z(e.algorithm.hash)!==n)throw U(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw U("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!B(e.algorithm,"ECDSA"))throw U("ECDSA");const n=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==n)throw U(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}V(e,n)}(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Z(t,...q));return o.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(Z(t,...q,"Uint8Array"))}const Je=async(e,t,n,r)=>{const i=await Ze(e,t,"verify");ce(e,i);const a=Ke(e,i.algorithm);try{return await o.subtle.verify(a,i,n,r)}catch{return!1}};async function $e(e,t,n){if(!Q(e))throw new P("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new P('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new P("JWS Protected Header incorrect type");if(void 0===e.payload)throw new P("JWS Payload missing");if("string"!=typeof e.signature)throw new P("JWS Signature missing or incorrect type");if(void 0!==e.header&&!Q(e.header))throw new P("JWS Unprotected Header incorrect type");let r={};if(e.protected)try{const t=w(e.protected);r=JSON.parse(u.decode(t))}catch{throw new P("JWS Protected Header is invalid")}if(!Y(r,e.header))throw new P("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...r,...e.header};let o=!0;if(xe(P,new Map([["b64",!0]]),n?.crit,r,i).has("b64")&&(o=r.b64,"boolean"!=typeof o))throw new P('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=i;if("string"!=typeof a||!a)throw new P('JWS "alg" (Algorithm) Header Parameter missing or invalid');const s=n&&De("algorithms",n.algorithms);if(s&&!s.has(a))throw new A('"alg" (Algorithm) Header Parameter value not allowed');if(o){if("string"!=typeof e.payload)throw new P("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new P("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof t&&(t=await t(r,e),l=!0),Ie(a,t,"verify");const h=d(c.encode(e.protected??""),c.encode("."),"string"==typeof e.payload?c.encode(e.payload):e.payload);let f,p;try{f=w(e.signature)}catch{throw new P("Failed to base64url decode the signature")}if(!await Je(a,t,f,h))throw new j;if(o)try{p=w(e.payload)}catch{throw new P("Failed to base64url decode the payload")}else p="string"==typeof e.payload?c.encode(e.payload):e.payload;const m={payload:p};return void 0!==e.protected&&(m.protectedHeader=r),void 0!==e.header&&(m.unprotectedHeader=e.header),l?{...m,key:t}:m}async function qe(e,t,n){if(e instanceof Uint8Array&&(e=u.decode(e)),"string"!=typeof e)throw new P("Compact JWS must be a string or Uint8Array");const{0:r,1:i,2:o,length:a}=e.split(".");if(3!==a)throw new P("Invalid Compact JWS");const s=await $e({payload:i,protected:r,signature:o},t,n),c={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...c,key:s.key}:c}async function Ge(e,t,n){if(!Q(e))throw new P("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(Q))throw new P("JWS Signatures missing or incorrect type");for(const r of e.signatures)try{return await $e({header:r.header,payload:e.payload,protected:r.protected,signature:r.signature},t,n)}catch{}throw new j}const Ye=e=>Math.floor(e.getTime()/1e3),Qe=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Xe=e=>{const t=Qe.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const n=parseFloat(t[2]);let r;switch(t[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":r=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":r=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":r=Math.round(3600*n);break;case"day":case"days":case"d":r=Math.round(86400*n);break;case"week":case"weeks":case"w":r=Math.round(604800*n);break;default:r=Math.round(31557600*n)}return"-"===t[1]||"ago"===t[4]?-r:r},et=e=>e.toLowerCase().replace(/^application\//,""),tt=(e,t,n={})=>{const{typ:r}=n;if(r&&("string"!=typeof e.typ||et(e.typ)!==et(r)))throw new E('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(u.decode(t))}catch{}if(!Q(i))throw new I("JWT Claims Set must be a top-level JSON object");const{requiredClaims:o=[],issuer:a,subject:s,audience:c,maxTokenAge:l}=n,d=[...o];void 0!==l&&d.push("iat"),void 0!==c&&d.push("aud"),void 0!==s&&d.push("sub"),void 0!==a&&d.push("iss");for(const e of new Set(d.reverse()))if(!(e in i))throw new E(`missing required "${e}" claim`,e,"missing");if(a&&!(Array.isArray(a)?a:[a]).includes(i.iss))throw new E('unexpected "iss" claim value',"iss","check_failed");if(s&&i.sub!==s)throw new E('unexpected "sub" claim value',"sub","check_failed");if(c&&(f="string"==typeof c?[c]:c,!("string"==typeof(h=i.aud)?f.includes(h):Array.isArray(h)&&f.some(Set.prototype.has.bind(new Set(h))))))throw new E('unexpected "aud" claim value',"aud","check_failed");var h,f;let p;switch(typeof n.clockTolerance){case"string":p=Xe(n.clockTolerance);break;case"number":p=n.clockTolerance;break;case"undefined":p=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:m}=n,y=Ye(m||new Date);if((void 0!==i.iat||l)&&"number"!=typeof i.iat)throw new E('"iat" claim must be a number',"iat","invalid");if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new E('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>y+p)throw new E('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new E('"exp" claim must be a number',"exp","invalid");if(i.exp<=y-p)throw new S('"exp" claim timestamp check failed',"exp","check_failed")}if(l){const e=y-i.iat;if(e-p>("number"==typeof l?l:Xe(l)))throw new S('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-p)throw new E('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function nt(e,t,n){const r=await qe(e,t,n);if(r.protectedHeader.crit?.includes("b64")&&!1===r.protectedHeader.b64)throw new I("JWTs MUST NOT use unencoded payload");const i={payload:tt(r.protectedHeader,r.payload,n),protectedHeader:r.protectedHeader};return"function"==typeof t?{...i,key:r.key}:i}async function rt(e,t,n){const r=await je(e,t,n),i=tt(r.protectedHeader,r.plaintext,n),{protectedHeader:o}=r;if(void 0!==o.iss&&o.iss!==i.iss)throw new E('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==o.sub&&o.sub!==i.sub)throw new E('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==o.aud&&JSON.stringify(o.aud)!==JSON.stringify(i.aud))throw new E('replicated "aud" claim header parameter mismatch',"aud","mismatch");const a={payload:i,protectedHeader:o};return"function"==typeof t?{...a,key:r.key}:a}class it{constructor(e){this._flattened=new ze(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const n=await this._flattened.encrypt(e,t);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}class ot{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new P("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Y(this._protectedHeader,this._unprotectedHeader))throw new P("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader};let r=!0;if(xe(P,new Map([["b64",!0]]),t?.crit,this._protectedHeader,n).has("b64")&&(r=this._protectedHeader.b64,"boolean"!=typeof r))throw new P('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=n;if("string"!=typeof i||!i)throw new P('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ie(i,e,"sign");let a,s=this._payload;r&&(s=c.encode(g(s))),a=this._protectedHeader?c.encode(g(JSON.stringify(this._protectedHeader))):c.encode("");const l=d(a,c.encode("."),s),h=await(async(e,t,n)=>{const r=await Ze(e,t,"sign");ce(e,r);const i=await o.subtle.sign(Ke(e,r.algorithm),r,n);return new Uint8Array(i)})(i,e,l),f={signature:g(h),payload:""};return r&&(f.payload=u.decode(s)),this._unprotectedHeader&&(f.header=this._unprotectedHeader),this._protectedHeader&&(f.protected=u.decode(a)),f}}class at{constructor(e){this._flattened=new ot(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const n=await this._flattened.sign(e,t);if(void 0===n.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class st{constructor(e,t,n){this.parent=e,this.key=t,this.options=n}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class ct{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const n=new st(this,e,t);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new P("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const n=this._signatures[t],r=new ot(this._payload);r.setProtectedHeader(n.protectedHeader),r.setUnprotectedHeader(n.unprotectedHeader);const{payload:i,...o}=await r.sign(n.key,n.options);if(0===t)e.payload=i;else if(e.payload!==i)throw new P("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(o)}return e}}function ut(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class lt{constructor(e={}){if(!Q(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:ut("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:ut("setNotBefore",Ye(e))}:this._payload={...this._payload,nbf:Ye(new Date)+Xe(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:ut("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:ut("setExpirationTime",Ye(e))}:this._payload={...this._payload,exp:Ye(new Date)+Xe(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:Ye(new Date)}:e instanceof Date?this._payload={...this._payload,iat:ut("setIssuedAt",Ye(e))}:this._payload="string"==typeof e?{...this._payload,iat:ut("setIssuedAt",Ye(new Date)+Xe(e))}:{...this._payload,iat:ut("setIssuedAt",e)},this}}class dt extends lt{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){const n=new at(c.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new I("JWTs MUST NOT use unencoded payload");return n.sign(e,t)}}class ht extends lt{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const n=new it(c.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(e,t)}}const ft=(e,t)=>{if("string"!=typeof e||!e)throw new T(`${t} missing or invalid`)};async function pt(e,t){if(!Q(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(e.kty){case"EC":ft(e.crv,'"crv" (Curve) Parameter'),ft(e.x,'"x" (X Coordinate) Parameter'),ft(e.y,'"y" (Y Coordinate) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":ft(e.crv,'"crv" (Subtype of Key Pair) Parameter'),ft(e.x,'"x" (Public Key) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":ft(e.e,'"e" (Exponent) Parameter'),ft(e.n,'"n" (Modulus) Parameter'),n={e:e.e,kty:e.kty,n:e.n};break;case"oct":ft(e.k,'"k" (Key Value) Parameter'),n={k:e.k,kty:e.kty};break;default:throw new _('"kty" (Key Type) Parameter missing or unsupported')}const r=c.encode(JSON.stringify(n));return g(await s(t,r))}async function mt(e,t){t??(t="sha256");const n=await pt(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${n}`}async function yt(e,t){const n={...e,...t?.header};if(!Q(n.jwk))throw new P('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const r=await Pe({...n.jwk,ext:!0},n.alg);if(r instanceof Uint8Array||"public"!==r.type)throw new P('"jwk" (JSON Web Key) Header Parameter must be a public key');return r}function gt(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(vt)}function vt(e){return Q(e)}class wt{constructor(e){if(this._cached=new WeakMap,!gt(e))throw new O("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:n,kid:r}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new _('Unsupported "alg" value for a JSON Web Key Set')}}(n),o=this._jwks.keys.filter((e=>{let t=i===e.kty;if(t&&"string"==typeof r&&(t=r===e.kid),t&&"string"==typeof e.alg&&(t=n===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===n&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(n){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:a,length:s}=o;if(0===s)throw new x;if(1!==s){const e=new D,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(const e of o)try{yield await bt(t,e,n)}catch{}},e}return bt(this._cached,a,n)}}async function bt(e,t,n){const r=e.get(t)||e.set(t,{}).get(t);if(void 0===r[n]){const e=await Pe({...t,ext:!0},n);if(e instanceof Uint8Array||"public"!==e.type)throw new O("JSON Web Key Set members must be public keys");r[n]=e}return r[n]}function Et(e){const t=new wt(e);return async(e,n)=>t.getKey(e,n)}let St;"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(St="jose/v5.2.2");class At extends wt{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(n){if(n instanceof x&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw n}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);const e=new Headers(this._options.headers);St&&!e.has("User-Agent")&&(e.set("User-Agent",St),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=(async(e,t,n)=>{let r,i,o=!1;"function"==typeof AbortController&&(r=new AbortController,i=setTimeout((()=>{o=!0,r.abort()}),t));const a=await fetch(e.href,{signal:r?r.signal:void 0,redirect:"manual",headers:n.headers}).catch((e=>{if(o)throw new M;throw e}));if(void 0!==i&&clearTimeout(i),200!==a.status)throw new b("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new b("Failed to parse the JSON Web Key Set HTTP response as JSON")}})(this._url,this._timeoutDuration,this._options).then((e=>{if(!gt(e))throw new O("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0})).catch((e=>{throw this._pendingFetch=void 0,e}))),await this._pendingFetch}}function _t(e,t){const n=new At(e,t);return async(e,t)=>n.getKey(e,t)}class kt extends lt{encode(){return`${g(JSON.stringify({alg:"none"}))}.${g(JSON.stringify(this._payload))}.`}static decode(e,t){if("string"!=typeof e)throw new I("Unsecured JWT must be a string");const{0:n,1:r,2:i,length:o}=e.split(".");if(3!==o||""!==i)throw new I("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(u.decode(w(n))),"none"!==a.alg)throw new Error}catch{throw new I("Invalid Unsecured JWT")}return{payload:tt(a,w(r),t),header:a}}}const Ct=g,Pt=w;function It(e){let t;if("string"==typeof e){const n=e.split(".");3!==n.length&&5!==n.length||([t]=n)}else if("object"==typeof e&&e){if(!("protected"in e))throw new TypeError("Token does not contain a Protected Header");t=e.protected}try{if("string"!=typeof t||!t)throw new Error;const e=JSON.parse(u.decode(Pt(t)));if(!Q(e))throw new Error;return e}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function Tt(e){if("string"!=typeof e)throw new I("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(5===n)throw new I("Only JWTs using Compact JWS serialization can be decoded");if(3!==n)throw new I("Invalid JWT");if(!t)throw new I("JWTs must contain a payload");let r,i;try{r=Pt(t)}catch{throw new I("Failed to base64url decode the payload")}try{i=JSON.parse(u.decode(r))}catch{throw new I("Failed to parse the decoded payload as JSON")}if(!Q(i))throw new I("Invalid JWT Claims Set");return i}function Ot(e){const t=e?.modulusLength??2048;if("number"!=typeof t||t<2048)throw new _("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function xt(e,t){return async function(e,t){let n,r;switch(e){case"PS256":case"PS384":case"PS512":n={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ot(t)},r=["sign","verify"];break;case"RS256":case"RS384":case"RS512":n={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ot(t)},r=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":n={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ot(t)},r=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":n={name:"ECDSA",namedCurve:"P-256"},r=["sign","verify"];break;case"ES384":n={name:"ECDSA",namedCurve:"P-384"},r=["sign","verify"];break;case"ES512":n={name:"ECDSA",namedCurve:"P-521"},r=["sign","verify"];break;case"EdDSA":{r=["sign","verify"];const e=t?.crv??"Ed25519";switch(e){case"Ed25519":case"Ed448":n={name:e};break;default:throw new _("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{r=["deriveKey","deriveBits"];const e=t?.crv??"P-256";switch(e){case"P-256":case"P-384":case"P-521":n={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":n={name:e};break;default:throw new _("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return o.subtle.generateKey(n,t?.extractable??!1,r)}(e,t)}async function Dt(e,t){return async function(e,t){let n,r,i;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),r={name:"HMAC",hash:`SHA-${n}`,length:n},i=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),L(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),r={name:"AES-KW",length:n},i=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),r={name:"AES-GCM",length:n},i=["encrypt","decrypt"];break;default:throw new _('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return o.subtle.generateKey(r,t?.extractable??!1,i)}(e,t)}const Mt="WebCryptoAPI"}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={592:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(c)var l=c(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=globalThis.webpackChunksimple_site=globalThis.webpackChunksimple_site||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r(3404),r(7698),r(6392),r(3976),r(3300),r(7147),r(9555),r(9187),r(1639),r(4491),r(68);var i=r(5521);i=r.O(i)})();
//# sourceMappingURL=common-0f20902195fdfd49aff8.js.map